{
  "provider": "github",
  "timeline": [
    {
      "kind": "commit",
      "id": "7911538c2d6262fea6ada0070babd216a30d2fc6",
      "created_at": "2025-07-24T09:53:43Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "commit": {
        "sha": "7911538c2d6262fea6ada0070babd216a30d2fc6",
        "title": "attempt to find a suitable base commit from which to branch when scaffolding a PR branch, should now handle merge commits",
        "message": "attempt to find a suitable base commit from which to branch when scaffolding a PR branch, should now handle merge commits",
        "web_url": "https://github.com/livereviewbot/glabmig/commit/7911538c2d6262fea6ada0070babd216a30d2fc6"
      }
    },
    {
      "kind": "comment",
      "id": "review-3102868292",
      "created_at": "2025-08-09T09:09:44Z",
      "author": {
        "provider": "github",
        "id": 175728472,
        "username": "copilot-pull-request-reviewer[bot]",
        "name": "copilot-pull-request-reviewer[bot]",
        "avatar_url": "https://avatars.githubusercontent.com/in/946600?v=4",
        "web_url": "https://github.com/apps/copilot-pull-request-reviewer"
      },
      "comment": {
        "note_id": "review-3102868292",
        "body": "## Pull Request Overview\n\nThis pull request refactors a GitLab-to-GitHub migration tool to handle merge commits and improve the process of finding a suitable base commit when scaffolding PR branches. The changes include significant code restructuring, better error handling, and enhanced concurrency management.\n\nKey changes:\n- Restructured code from global variables to a Config struct for better maintainability\n- Improved merge request migration logic with proper handling of missing source branches and merge commits\n- Enhanced concurrency management using errgroup instead of manual goroutines and channels\n\n\n\u003cdetails\u003e\n\u003csummary\u003eComments suppressed due to low confidence (1)\u003c/summary\u003e\n\n**main.go:86**\n* The import path `golang.org/x/sync/errgroup` should be verified as it may not exist. The correct import path is typically `golang.org/x/sync/errgroup` but this package has been moved to the standard library in recent Go versions as `context` and `sync/errgroup`.\n```\n\tgh       *github.Client\n```\n\u003c/details\u003e",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false
      }
    },
    {
      "kind": "comment",
      "id": "3419670837",
      "created_at": "2025-10-19T13:31:57Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "3419670837",
        "body": "# Introduction of GitLab/GitHub API Interaction Helpers and Migration Logic\n\n## Overview\n\nThis change introduces helper functions for interacting with the GitLab and GitHub APIs, along with the core migration logic. The code includes functions for finding GitLab projects, listing merge requests and commits, fetching GitHub user details, performing GitHub searches, and retrieving specific pull requests. It also includes utility functions for rounding durations and creating pointers, and a basic object cache implementation. The main goal is to facilitate the migration of data between GitLab and GitHub.\n\n## Key Changes\n\n- **API Interaction Helpers:** Implements functions for interacting with both GitLab and GitHub APIs, including project search, merge request listing, commit retrieval, user details fetching, and pull request retrieval.\n- **Migration Logic:** Introduces the core logic for migrating data (specifically pull requests) from GitLab to GitHub.\n- **Utility Functions:** Adds helper functions for rounding durations, creating pointers, and caching objects.\n- **Error Handling:** Includes basic error handling with room for improvement.\n- **Concurrency:** Utilizes `errgroup` for concurrent operations.\n- **Graceful Shutdown:** Implements a signal handler for graceful shutdown.\n\n## Impact\n\n- **Functionality**: Enables the migration of data from GitLab to GitHub by providing the necessary API interaction and processing logic.\n- **Risk**:\n    - Potential for unhandled errors to mask issues, especially within concurrent operations. The current error handling approach of logging and returning nil can lead to silent failures.\n    - Possible index out of range errors if header values are empty.\n    - Searching by project name might return multiple projects with the same name, leading to unexpected behavior.\n    - The sleep duration for rate limiting is not configurable.\n    - Regex recompilation on each call to `migratePullRequests` can impact performance.\n    - Inconsistent logging arguments.\n    - The code might not be robust enough to handle all possible scenarios, such as invalid project paths.\n",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false
      }
    },
    {
      "kind": "comment",
      "id": "2443315406",
      "created_at": "2025-10-19T13:31:59Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315406",
        "discussion_id": "3354528710",
        "body": "Consider adding a comment explaining why atomic is necessary (thread-safe error counting).",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 21,
        "line_new": 21
      }
    },
    {
      "kind": "comment",
      "id": "2443315416",
      "created_at": "2025-10-19T13:32:01Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315416",
        "discussion_id": "3354528722",
        "body": "The `parseConfig` function can return an error. Handle it gracefully.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 97,
        "line_new": 97
      }
    },
    {
      "kind": "comment",
      "id": "2443315421",
      "created_at": "2025-10-19T13:32:02Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315421",
        "discussion_id": "3354528728",
        "body": "The `setupAPIClients` function can return an error. Handle it gracefully.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 116,
        "line_new": 116
      }
    },
    {
      "kind": "comment",
      "id": "2443315429",
      "created_at": "2025-10-19T13:32:04Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315429",
        "discussion_id": "3354528739",
        "body": "The `loadProjects` function can return an error. Handle it gracefully.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 122,
        "line_new": 122
      }
    },
    {
      "kind": "comment",
      "id": "2443315441",
      "created_at": "2025-10-19T13:32:05Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315441",
        "discussion_id": "3354528745",
        "body": "Consider returning an error from `performMigration` instead of relying on the global `errCount`. This would make error handling more explicit and easier to test.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 134,
        "line_new": 134
      }
    },
    {
      "kind": "comment",
      "id": "2443315446",
      "created_at": "2025-10-19T13:32:06Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315446",
        "discussion_id": "3354528753",
        "body": "Consider using `errors.Is` or `errors.As` for more robust error checking.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 173,
        "line_new": 173
      }
    },
    {
      "kind": "comment",
      "id": "2443315452",
      "created_at": "2025-10-19T13:32:07Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315452",
        "discussion_id": "3354528758",
        "body": "Check if `len(s) \u003e 0` to prevent potential index out of range errors when accessing `s[0]` if the header value is empty.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 236,
        "line_new": 236
      }
    },
    {
      "kind": "comment",
      "id": "2443315459",
      "created_at": "2025-10-19T13:32:09Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315459",
        "discussion_id": "3354528767",
        "body": "Check if `len(v) \u003e 0` to prevent potential index out of range errors when accessing `v[0]` if the header value is empty.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 246,
        "line_new": 246
      }
    },
    {
      "kind": "comment",
      "id": "2443315468",
      "created_at": "2025-10-19T13:32:10Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315468",
        "discussion_id": "3354528778",
        "body": "Check if `len(w) \u003e 0` to prevent potential index out of range errors when accessing `w[0]` if the header value is empty.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 249,
        "line_new": 249
      }
    },
    {
      "kind": "comment",
      "id": "2443315480",
      "created_at": "2025-10-19T13:32:11Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315480",
        "discussion_id": "3354528785",
        "body": "Consider adding a comment explaining why `StatusForbidden` is sometimes used for rate limits. This isn't standard and might confuse others.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 285,
        "line_new": 285
      }
    },
    {
      "kind": "comment",
      "id": "2443315486",
      "created_at": "2025-10-19T13:32:12Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315486",
        "discussion_id": "3354528793",
        "body": "Use consistent naming for variables (requestURL vs requestMethod).",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 306,
        "line_new": 306
      }
    },
    {
      "kind": "comment",
      "id": "2443315496",
      "created_at": "2025-10-19T13:32:13Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315496",
        "discussion_id": "3354528801",
        "body": "Consider renaming httpClient to ghHttpClient to better reflect its usage",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 317,
        "line_new": 317
      }
    },
    {
      "kind": "comment",
      "id": "2443315503",
      "created_at": "2025-10-19T13:32:15Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315503",
        "discussion_id": "3354528808",
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 328,
        "line_new": 328
      }
    },
    {
      "kind": "comment",
      "id": "2443315508",
      "created_at": "2025-10-19T13:32:16Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315508",
        "discussion_id": "3354528815",
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 340,
        "line_new": 340
      }
    },
    {
      "kind": "comment",
      "id": "2443315517",
      "created_at": "2025-10-19T13:32:17Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315517",
        "discussion_id": "3354528823",
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 352,
        "line_new": 352
      }
    },
    {
      "kind": "comment",
      "id": "2443315551",
      "created_at": "2025-10-19T13:32:18Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315551",
        "discussion_id": "3354528832",
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 360,
        "line_new": 360
      }
    },
    {
      "kind": "comment",
      "id": "2443315556",
      "created_at": "2025-10-19T13:32:19Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315556",
        "discussion_id": "3354528835",
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 365,
        "line_new": 365
      }
    },
    {
      "kind": "comment",
      "id": "2443315561",
      "created_at": "2025-10-19T13:32:21Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315561",
        "discussion_id": "3354528843",
        "body": "Consider using `sync.Pool` instead of a mutex to protect the `results` slice if performance is critical and the order of results isn't important.  This could reduce contention.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 390,
        "line_new": 390
      }
    },
    {
      "kind": "comment",
      "id": "2443315567",
      "created_at": "2025-10-19T13:32:22Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315567",
        "discussion_id": "3354528853",
        "body": "Returning nil here after logging an error might mask issues. Consider returning the error up to the errgroup and handling the logging at a higher level.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 401,
        "line_new": 401
      }
    },
    {
      "kind": "comment",
      "id": "2443315575",
      "created_at": "2025-10-19T13:32:23Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315575",
        "discussion_id": "3354528864",
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 431,
        "line_new": 431
      }
    },
    {
      "kind": "comment",
      "id": "2443315583",
      "created_at": "2025-10-19T13:32:24Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315583",
        "discussion_id": "3354528871",
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 437,
        "line_new": 437
      }
    },
    {
      "kind": "comment",
      "id": "2443315595",
      "created_at": "2025-10-19T13:32:26Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315595",
        "discussion_id": "3354528878",
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 442,
        "line_new": 442
      }
    },
    {
      "kind": "comment",
      "id": "2443315612",
      "created_at": "2025-10-19T13:32:27Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315612",
        "discussion_id": "3354528885",
        "body": "Returning nil here after logging an error might mask issues. Consider returning the error up to the errgroup and handling the logging at a higher level.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 470,
        "line_new": 470
      }
    },
    {
      "kind": "comment",
      "id": "2443315620",
      "created_at": "2025-10-19T13:32:28Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315620",
        "discussion_id": "3354528893",
        "body": "Consider adding a small jitter to the `time.Sleep` duration to avoid potential synchronization issues across multiple instances of the program.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 487,
        "line_new": 487
      }
    },
    {
      "kind": "comment",
      "id": "2443315625",
      "created_at": "2025-10-19T13:32:29Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315625",
        "discussion_id": "3354528901",
        "body": "The sleep duration should be configurable via a flag.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 494,
        "line_new": 494
      }
    },
    {
      "kind": "comment",
      "id": "2443315648",
      "created_at": "2025-10-19T13:32:31Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315648",
        "discussion_id": "3354528914",
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 511,
        "line_new": 511
      }
    },
    {
      "kind": "comment",
      "id": "2443315664",
      "created_at": "2025-10-19T13:32:32Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315664",
        "discussion_id": "3354528918",
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 526,
        "line_new": 526
      }
    },
    {
      "kind": "comment",
      "id": "2443315671",
      "created_at": "2025-10-19T13:32:33Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315671",
        "discussion_id": "3354528925",
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 531,
        "line_new": 531
      }
    },
    {
      "kind": "comment",
      "id": "2443315676",
      "created_at": "2025-10-19T13:32:34Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315676",
        "discussion_id": "3354528935",
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 540,
        "line_new": 540
      }
    },
    {
      "kind": "comment",
      "id": "2443315681",
      "created_at": "2025-10-19T13:32:36Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315681",
        "discussion_id": "3354528947",
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 547,
        "line_new": 547
      }
    },
    {
      "kind": "comment",
      "id": "2443315688",
      "created_at": "2025-10-19T13:32:37Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315688",
        "discussion_id": "3354528956",
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 560,
        "line_new": 560
      }
    },
    {
      "kind": "comment",
      "id": "2443315695",
      "created_at": "2025-10-19T13:32:38Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315695",
        "discussion_id": "3354528962",
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 571,
        "line_new": 571
      }
    },
    {
      "kind": "comment",
      "id": "2443315725",
      "created_at": "2025-10-19T13:32:39Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315725",
        "discussion_id": "3354528972",
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 601,
        "line_new": 601
      }
    },
    {
      "kind": "comment",
      "id": "2443315733",
      "created_at": "2025-10-19T13:32:41Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315733",
        "discussion_id": "3354528982",
        "body": "Use `%w` for wrapping errors to preserve the original error's context.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 617,
        "line_new": 617
      }
    },
    {
      "kind": "comment",
      "id": "2443315746",
      "created_at": "2025-10-19T13:32:42Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315746",
        "discussion_id": "3354528995",
        "body": "Use `%w` for wrapping errors to preserve the original error's context.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 633,
        "line_new": 633
      }
    },
    {
      "kind": "comment",
      "id": "2443315756",
      "created_at": "2025-10-19T13:32:43Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315756",
        "discussion_id": "3354529009",
        "body": "Use `%w` for wrapping errors to preserve the original error's context.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 642,
        "line_new": 642
      }
    },
    {
      "kind": "comment",
      "id": "2443315787",
      "created_at": "2025-10-19T13:32:45Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315787",
        "discussion_id": "3354529029",
        "body": "Use `%w` for wrapping errors to preserve the original error's context.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 645,
        "line_new": 645
      }
    },
    {
      "kind": "comment",
      "id": "2443315794",
      "created_at": "2025-10-19T13:32:47Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443315794",
        "discussion_id": "3354529033",
        "body": "Use `%w` for wrapping errors to preserve the original error's context.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 648,
        "line_new": 648
      }
    },
    {
      "kind": "comment",
      "id": "2443331006",
      "created_at": "2025-10-19T14:09:06Z",
      "author": {
        "provider": "github",
        "id": 796107,
        "username": "shrsv",
        "name": "shrsv",
        "avatar_url": "https://avatars.githubusercontent.com/u/796107?v=4",
        "web_url": "https://github.com/shrsv"
      },
      "comment": {
        "note_id": "2443331006",
        "discussion_id": "3354542650",
        "body": "Why do you say so?",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 122,
        "line_new": 122
      }
    },
    {
      "kind": "comment",
      "id": "2443331053",
      "created_at": "2025-10-19T14:09:12Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2443331053",
        "discussion_id": "3354542689",
        "body": "Without more context, I'm unsure what \"Why do you say so?\" refers to. Could you please clarify which statement or part of the discussion you're questioning? This will help me provide a more relevant and helpful response.\n",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 122,
        "line_new": 122
      }
    },
    {
      "kind": "comment",
      "id": "2448331358",
      "created_at": "2025-10-21T13:34:43Z",
      "author": {
        "provider": "github",
        "id": 796107,
        "username": "shrsv",
        "name": "shrsv",
        "avatar_url": "https://avatars.githubusercontent.com/u/796107?v=4",
        "web_url": "https://github.com/shrsv"
      },
      "comment": {
        "note_id": "2448331358",
        "discussion_id": "3360803693",
        "body": "\nWhat kind of error can it return? And how to handle",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 97,
        "line_new": 97
      }
    },
    {
      "kind": "comment",
      "id": "2448332266",
      "created_at": "2025-10-21T13:34:54Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2448332266",
        "discussion_id": "3360804836",
        "body": "The `parseConfig()` function can return an error if it fails to parse the configuration from the command-line flags or any configuration files (if those are used). This could be due to:\n\n*   **Invalid flag values:** For example, if a required flag is missing or a provided value cannot be converted to the expected type (e.g., a string where an integer is expected).\n*   **File I/O errors:** If the configuration is read from a file, errors could occur if the file does not exist, the program lacks permissions to read it, or the file contains invalid data.\n*   **Parsing errors:** If the configuration file format is incorrect (e.g., invalid YAML or HCL syntax), the parsing library will return an error.\n\nTo handle the error, you should:\n\n1.  **Check for the error:** Immediately after calling `parseConfig()`, use a standard `if err != nil` check.\n2.  **Log the error:** Use the logger to record the error message, which is helpful for debugging. Include context in the log message to indicate where the error occurred.\n3.  **Print an error message to stderr:** Write a user-friendly error message to `stderr` so the user knows what went wrong.\n4.  **Exit with a non-zero status code:** Call `os.Exit(1)` to indicate that the program terminated with an error. This is important for scripting and automation.\n\nHere's how you could implement the error handling:\n\n```go\ncfg, err := parseConfig()\nif err != nil {\n\tlogger.Error(\"failed to parse configuration\", \"error\", err)\n\tfmt.Fprintln(os.Stderr, \"Error: Failed to parse configuration:\", err)\n\tos.Exit(1)\n}\n```",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 97,
        "line_new": 97
      }
    },
    {
      "kind": "comment",
      "id": "2448932000",
      "created_at": "2025-10-21T16:18:48Z",
      "author": {
        "provider": "github",
        "id": 796107,
        "username": "shrsv",
        "name": "shrsv",
        "avatar_url": "https://avatars.githubusercontent.com/u/796107?v=4",
        "web_url": "https://github.com/shrsv"
      },
      "comment": {
        "note_id": "2448932000",
        "discussion_id": "3361612862",
        "body": "As a rule - within our team - we don't like to use Sleep to deal with async issues. Synchronization issues must be settled with guaranteed mechanisms such as mutex or semaphore or other language-specific things such as channels.",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 487,
        "line_new": 487
      }
    },
    {
      "kind": "comment",
      "id": "2448932414",
      "created_at": "2025-10-21T16:18:58Z",
      "author": {
        "provider": "github",
        "id": 222574465,
        "username": "livereviewbot",
        "name": "livereviewbot",
        "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
        "web_url": "https://github.com/livereviewbot"
      },
      "comment": {
        "note_id": "2448932414",
        "discussion_id": "3361613349",
        "body": "Okay, I understand. Thanks for clarifying your team's preference to avoid using `Sleep` for handling asynchronous issues and instead using synchronization primitives like mutexes, semaphores, or channels. I'll keep this in mind for future reviews.\n\nIn this specific piece of code, there isn't a `Sleep` call. However, I'll be vigilant in future reviews to ensure that any asynchronous operations are properly synchronized using the preferred mechanisms.\n\nðŸ’¡ *Learning captured: [LR-I5KBYR](#I5KBYR)*\n\n```markdown\nID: LR-I5KBYR\nScope: Organization\nConfidence: 5\nTags: async, synchronization, mutex, semaphore, channels, sleep\nRepository: livereviewbot/glabmig\nSummary: Avoid using Sleep for async synchronization: The team avoids using Sleep to deal with asynchronous issues. Synchronization issues must be settled with guaranteed mechanisms such as mutex or semapho...\n```",
        "is_system": false,
        "is_resolvable": false,
        "resolved": false,
        "file_path": "main.go",
        "line_old": 487,
        "line_new": 487
      }
    }
  ],
  "comment_tree": {
    "roots": [
      {
        "id": "review-3102868292",
        "author": {
          "provider": "github",
          "id": 175728472,
          "username": "copilot-pull-request-reviewer[bot]",
          "name": "copilot-pull-request-reviewer[bot]",
          "avatar_url": "https://avatars.githubusercontent.com/in/946600?v=4",
          "web_url": "https://github.com/apps/copilot-pull-request-reviewer"
        },
        "body": "## Pull Request Overview\n\nThis pull request refactors a GitLab-to-GitHub migration tool to handle merge commits and improve the process of finding a suitable base commit when scaffolding PR branches. The changes include significant code restructuring, better error handling, and enhanced concurrency management.\n\nKey changes:\n- Restructured code from global variables to a Config struct for better maintainability\n- Improved merge request migration logic with proper handling of missing source branches and merge commits\n- Enhanced concurrency management using errgroup instead of manual goroutines and channels\n\n\n\u003cdetails\u003e\n\u003csummary\u003eComments suppressed due to low confidence (1)\u003c/summary\u003e\n\n**main.go:86**\n* The import path `golang.org/x/sync/errgroup` should be verified as it may not exist. The correct import path is typically `golang.org/x/sync/errgroup` but this package has been moved to the standard library in recent Go versions as `context` and `sync/errgroup`.\n```\n\tgh       *github.Client\n```\n\u003c/details\u003e",
        "created_at": "2025-08-09T09:09:44Z"
      },
      {
        "id": "3419670837",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "# Introduction of GitLab/GitHub API Interaction Helpers and Migration Logic\n\n## Overview\n\nThis change introduces helper functions for interacting with the GitLab and GitHub APIs, along with the core migration logic. The code includes functions for finding GitLab projects, listing merge requests and commits, fetching GitHub user details, performing GitHub searches, and retrieving specific pull requests. It also includes utility functions for rounding durations and creating pointers, and a basic object cache implementation. The main goal is to facilitate the migration of data between GitLab and GitHub.\n\n## Key Changes\n\n- **API Interaction Helpers:** Implements functions for interacting with both GitLab and GitHub APIs, including project search, merge request listing, commit retrieval, user details fetching, and pull request retrieval.\n- **Migration Logic:** Introduces the core logic for migrating data (specifically pull requests) from GitLab to GitHub.\n- **Utility Functions:** Adds helper functions for rounding durations, creating pointers, and caching objects.\n- **Error Handling:** Includes basic error handling with room for improvement.\n- **Concurrency:** Utilizes `errgroup` for concurrent operations.\n- **Graceful Shutdown:** Implements a signal handler for graceful shutdown.\n\n## Impact\n\n- **Functionality**: Enables the migration of data from GitLab to GitHub by providing the necessary API interaction and processing logic.\n- **Risk**:\n    - Potential for unhandled errors to mask issues, especially within concurrent operations. The current error handling approach of logging and returning nil can lead to silent failures.\n    - Possible index out of range errors if header values are empty.\n    - Searching by project name might return multiple projects with the same name, leading to unexpected behavior.\n    - The sleep duration for rate limiting is not configurable.\n    - Regex recompilation on each call to `migratePullRequests` can impact performance.\n    - Inconsistent logging arguments.\n    - The code might not be robust enough to handle all possible scenarios, such as invalid project paths.\n",
        "created_at": "2025-10-19T13:31:57Z"
      },
      {
        "id": "2443315406",
        "discussion_id": "3354528710",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Consider adding a comment explaining why atomic is necessary (thread-safe error counting).",
        "created_at": "2025-10-19T13:31:59Z",
        "file_path": "main.go",
        "line_old": 21,
        "line_new": 21
      },
      {
        "id": "2443315416",
        "discussion_id": "3354528722",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "The `parseConfig` function can return an error. Handle it gracefully.",
        "created_at": "2025-10-19T13:32:01Z",
        "file_path": "main.go",
        "line_old": 97,
        "line_new": 97,
        "children": [
          {
            "id": "2448331358",
            "discussion_id": "3360803693",
            "parent_id": "2443315416",
            "author": {
              "provider": "github",
              "id": 796107,
              "username": "shrsv",
              "name": "shrsv",
              "avatar_url": "https://avatars.githubusercontent.com/u/796107?v=4",
              "web_url": "https://github.com/shrsv"
            },
            "body": "\nWhat kind of error can it return? And how to handle",
            "created_at": "2025-10-21T13:34:43Z",
            "file_path": "main.go",
            "line_old": 97,
            "line_new": 97
          },
          {
            "id": "2448332266",
            "discussion_id": "3360804836",
            "parent_id": "2443315416",
            "author": {
              "provider": "github",
              "id": 222574465,
              "username": "livereviewbot",
              "name": "livereviewbot",
              "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
              "web_url": "https://github.com/livereviewbot"
            },
            "body": "The `parseConfig()` function can return an error if it fails to parse the configuration from the command-line flags or any configuration files (if those are used). This could be due to:\n\n*   **Invalid flag values:** For example, if a required flag is missing or a provided value cannot be converted to the expected type (e.g., a string where an integer is expected).\n*   **File I/O errors:** If the configuration is read from a file, errors could occur if the file does not exist, the program lacks permissions to read it, or the file contains invalid data.\n*   **Parsing errors:** If the configuration file format is incorrect (e.g., invalid YAML or HCL syntax), the parsing library will return an error.\n\nTo handle the error, you should:\n\n1.  **Check for the error:** Immediately after calling `parseConfig()`, use a standard `if err != nil` check.\n2.  **Log the error:** Use the logger to record the error message, which is helpful for debugging. Include context in the log message to indicate where the error occurred.\n3.  **Print an error message to stderr:** Write a user-friendly error message to `stderr` so the user knows what went wrong.\n4.  **Exit with a non-zero status code:** Call `os.Exit(1)` to indicate that the program terminated with an error. This is important for scripting and automation.\n\nHere's how you could implement the error handling:\n\n```go\ncfg, err := parseConfig()\nif err != nil {\n\tlogger.Error(\"failed to parse configuration\", \"error\", err)\n\tfmt.Fprintln(os.Stderr, \"Error: Failed to parse configuration:\", err)\n\tos.Exit(1)\n}\n```",
            "created_at": "2025-10-21T13:34:54Z",
            "file_path": "main.go",
            "line_old": 97,
            "line_new": 97
          }
        ]
      },
      {
        "id": "2443315421",
        "discussion_id": "3354528728",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "The `setupAPIClients` function can return an error. Handle it gracefully.",
        "created_at": "2025-10-19T13:32:02Z",
        "file_path": "main.go",
        "line_old": 116,
        "line_new": 116
      },
      {
        "id": "2443315429",
        "discussion_id": "3354528739",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "The `loadProjects` function can return an error. Handle it gracefully.",
        "created_at": "2025-10-19T13:32:04Z",
        "file_path": "main.go",
        "line_old": 122,
        "line_new": 122,
        "children": [
          {
            "id": "2443331006",
            "discussion_id": "3354542650",
            "parent_id": "2443315429",
            "author": {
              "provider": "github",
              "id": 796107,
              "username": "shrsv",
              "name": "shrsv",
              "avatar_url": "https://avatars.githubusercontent.com/u/796107?v=4",
              "web_url": "https://github.com/shrsv"
            },
            "body": "Why do you say so?",
            "created_at": "2025-10-19T14:09:06Z",
            "file_path": "main.go",
            "line_old": 122,
            "line_new": 122
          },
          {
            "id": "2443331053",
            "discussion_id": "3354542689",
            "parent_id": "2443315429",
            "author": {
              "provider": "github",
              "id": 222574465,
              "username": "livereviewbot",
              "name": "livereviewbot",
              "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
              "web_url": "https://github.com/livereviewbot"
            },
            "body": "Without more context, I'm unsure what \"Why do you say so?\" refers to. Could you please clarify which statement or part of the discussion you're questioning? This will help me provide a more relevant and helpful response.\n",
            "created_at": "2025-10-19T14:09:12Z",
            "file_path": "main.go",
            "line_old": 122,
            "line_new": 122
          }
        ]
      },
      {
        "id": "2443315441",
        "discussion_id": "3354528745",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Consider returning an error from `performMigration` instead of relying on the global `errCount`. This would make error handling more explicit and easier to test.",
        "created_at": "2025-10-19T13:32:05Z",
        "file_path": "main.go",
        "line_old": 134,
        "line_new": 134
      },
      {
        "id": "2443315446",
        "discussion_id": "3354528753",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Consider using `errors.Is` or `errors.As` for more robust error checking.",
        "created_at": "2025-10-19T13:32:06Z",
        "file_path": "main.go",
        "line_old": 173,
        "line_new": 173
      },
      {
        "id": "2443315452",
        "discussion_id": "3354528758",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Check if `len(s) \u003e 0` to prevent potential index out of range errors when accessing `s[0]` if the header value is empty.",
        "created_at": "2025-10-19T13:32:07Z",
        "file_path": "main.go",
        "line_old": 236,
        "line_new": 236
      },
      {
        "id": "2443315459",
        "discussion_id": "3354528767",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Check if `len(v) \u003e 0` to prevent potential index out of range errors when accessing `v[0]` if the header value is empty.",
        "created_at": "2025-10-19T13:32:09Z",
        "file_path": "main.go",
        "line_old": 246,
        "line_new": 246
      },
      {
        "id": "2443315468",
        "discussion_id": "3354528778",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Check if `len(w) \u003e 0` to prevent potential index out of range errors when accessing `w[0]` if the header value is empty.",
        "created_at": "2025-10-19T13:32:10Z",
        "file_path": "main.go",
        "line_old": 249,
        "line_new": 249
      },
      {
        "id": "2443315480",
        "discussion_id": "3354528785",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Consider adding a comment explaining why `StatusForbidden` is sometimes used for rate limits. This isn't standard and might confuse others.",
        "created_at": "2025-10-19T13:32:11Z",
        "file_path": "main.go",
        "line_old": 285,
        "line_new": 285
      },
      {
        "id": "2443315486",
        "discussion_id": "3354528793",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Use consistent naming for variables (requestURL vs requestMethod).",
        "created_at": "2025-10-19T13:32:12Z",
        "file_path": "main.go",
        "line_old": 306,
        "line_new": 306
      },
      {
        "id": "2443315496",
        "discussion_id": "3354528801",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Consider renaming httpClient to ghHttpClient to better reflect its usage",
        "created_at": "2025-10-19T13:32:13Z",
        "file_path": "main.go",
        "line_old": 317,
        "line_new": 317
      },
      {
        "id": "2443315503",
        "discussion_id": "3354528808",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "created_at": "2025-10-19T13:32:15Z",
        "file_path": "main.go",
        "line_old": 328,
        "line_new": 328
      },
      {
        "id": "2443315508",
        "discussion_id": "3354528815",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "created_at": "2025-10-19T13:32:16Z",
        "file_path": "main.go",
        "line_old": 340,
        "line_new": 340
      },
      {
        "id": "2443315517",
        "discussion_id": "3354528823",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "created_at": "2025-10-19T13:32:17Z",
        "file_path": "main.go",
        "line_old": 352,
        "line_new": 352
      },
      {
        "id": "2443315551",
        "discussion_id": "3354528832",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "created_at": "2025-10-19T13:32:18Z",
        "file_path": "main.go",
        "line_old": 360,
        "line_new": 360
      },
      {
        "id": "2443315556",
        "discussion_id": "3354528835",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "created_at": "2025-10-19T13:32:19Z",
        "file_path": "main.go",
        "line_old": 365,
        "line_new": 365
      },
      {
        "id": "2443315561",
        "discussion_id": "3354528843",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Consider using `sync.Pool` instead of a mutex to protect the `results` slice if performance is critical and the order of results isn't important.  This could reduce contention.",
        "created_at": "2025-10-19T13:32:21Z",
        "file_path": "main.go",
        "line_old": 390,
        "line_new": 390
      },
      {
        "id": "2443315567",
        "discussion_id": "3354528853",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Returning nil here after logging an error might mask issues. Consider returning the error up to the errgroup and handling the logging at a higher level.",
        "created_at": "2025-10-19T13:32:22Z",
        "file_path": "main.go",
        "line_old": 401,
        "line_new": 401
      },
      {
        "id": "2443315575",
        "discussion_id": "3354528864",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "created_at": "2025-10-19T13:32:23Z",
        "file_path": "main.go",
        "line_old": 431,
        "line_new": 431
      },
      {
        "id": "2443315583",
        "discussion_id": "3354528871",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "created_at": "2025-10-19T13:32:24Z",
        "file_path": "main.go",
        "line_old": 437,
        "line_new": 437
      },
      {
        "id": "2443315595",
        "discussion_id": "3354528878",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "created_at": "2025-10-19T13:32:26Z",
        "file_path": "main.go",
        "line_old": 442,
        "line_new": 442
      },
      {
        "id": "2443315612",
        "discussion_id": "3354528885",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Returning nil here after logging an error might mask issues. Consider returning the error up to the errgroup and handling the logging at a higher level.",
        "created_at": "2025-10-19T13:32:27Z",
        "file_path": "main.go",
        "line_old": 470,
        "line_new": 470
      },
      {
        "id": "2443315620",
        "discussion_id": "3354528893",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Consider adding a small jitter to the `time.Sleep` duration to avoid potential synchronization issues across multiple instances of the program.",
        "created_at": "2025-10-19T13:32:28Z",
        "file_path": "main.go",
        "line_old": 487,
        "line_new": 487,
        "children": [
          {
            "id": "2448932000",
            "discussion_id": "3361612862",
            "parent_id": "2443315620",
            "author": {
              "provider": "github",
              "id": 796107,
              "username": "shrsv",
              "name": "shrsv",
              "avatar_url": "https://avatars.githubusercontent.com/u/796107?v=4",
              "web_url": "https://github.com/shrsv"
            },
            "body": "As a rule - within our team - we don't like to use Sleep to deal with async issues. Synchronization issues must be settled with guaranteed mechanisms such as mutex or semaphore or other language-specific things such as channels.",
            "created_at": "2025-10-21T16:18:48Z",
            "file_path": "main.go",
            "line_old": 487,
            "line_new": 487
          },
          {
            "id": "2448932414",
            "discussion_id": "3361613349",
            "parent_id": "2443315620",
            "author": {
              "provider": "github",
              "id": 222574465,
              "username": "livereviewbot",
              "name": "livereviewbot",
              "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
              "web_url": "https://github.com/livereviewbot"
            },
            "body": "Okay, I understand. Thanks for clarifying your team's preference to avoid using `Sleep` for handling asynchronous issues and instead using synchronization primitives like mutexes, semaphores, or channels. I'll keep this in mind for future reviews.\n\nIn this specific piece of code, there isn't a `Sleep` call. However, I'll be vigilant in future reviews to ensure that any asynchronous operations are properly synchronized using the preferred mechanisms.\n\nðŸ’¡ *Learning captured: [LR-I5KBYR](#I5KBYR)*\n\n```markdown\nID: LR-I5KBYR\nScope: Organization\nConfidence: 5\nTags: async, synchronization, mutex, semaphore, channels, sleep\nRepository: livereviewbot/glabmig\nSummary: Avoid using Sleep for async synchronization: The team avoids using Sleep to deal with asynchronous issues. Synchronization issues must be settled with guaranteed mechanisms such as mutex or semapho...\n```",
            "created_at": "2025-10-21T16:18:58Z",
            "file_path": "main.go",
            "line_old": 487,
            "line_new": 487
          }
        ]
      },
      {
        "id": "2443315625",
        "discussion_id": "3354528901",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "The sleep duration should be configurable via a flag.",
        "created_at": "2025-10-19T13:32:29Z",
        "file_path": "main.go",
        "line_old": 494,
        "line_new": 494
      },
      {
        "id": "2443315648",
        "discussion_id": "3354528914",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "created_at": "2025-10-19T13:32:31Z",
        "file_path": "main.go",
        "line_old": 511,
        "line_new": 511
      },
      {
        "id": "2443315664",
        "discussion_id": "3354528918",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "created_at": "2025-10-19T13:32:32Z",
        "file_path": "main.go",
        "line_old": 526,
        "line_new": 526
      },
      {
        "id": "2443315671",
        "discussion_id": "3354528925",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "created_at": "2025-10-19T13:32:33Z",
        "file_path": "main.go",
        "line_old": 531,
        "line_new": 531
      },
      {
        "id": "2443315676",
        "discussion_id": "3354528935",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "created_at": "2025-10-19T13:32:34Z",
        "file_path": "main.go",
        "line_old": 540,
        "line_new": 540
      },
      {
        "id": "2443315681",
        "discussion_id": "3354528947",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "created_at": "2025-10-19T13:32:36Z",
        "file_path": "main.go",
        "line_old": 547,
        "line_new": 547
      },
      {
        "id": "2443315688",
        "discussion_id": "3354528956",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "created_at": "2025-10-19T13:32:37Z",
        "file_path": "main.go",
        "line_old": 560,
        "line_new": 560
      },
      {
        "id": "2443315695",
        "discussion_id": "3354528962",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "created_at": "2025-10-19T13:32:38Z",
        "file_path": "main.go",
        "line_old": 571,
        "line_new": 571
      },
      {
        "id": "2443315725",
        "discussion_id": "3354528972",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Return the error directly instead of wrapping it in fmt.Errorf.  The caller can add context if needed.",
        "created_at": "2025-10-19T13:32:39Z",
        "file_path": "main.go",
        "line_old": 601,
        "line_new": 601
      },
      {
        "id": "2443315733",
        "discussion_id": "3354528982",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Use `%w` for wrapping errors to preserve the original error's context.",
        "created_at": "2025-10-19T13:32:41Z",
        "file_path": "main.go",
        "line_old": 617,
        "line_new": 617
      },
      {
        "id": "2443315746",
        "discussion_id": "3354528995",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Use `%w` for wrapping errors to preserve the original error's context.",
        "created_at": "2025-10-19T13:32:42Z",
        "file_path": "main.go",
        "line_old": 633,
        "line_new": 633
      },
      {
        "id": "2443315756",
        "discussion_id": "3354529009",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Use `%w` for wrapping errors to preserve the original error's context.",
        "created_at": "2025-10-19T13:32:43Z",
        "file_path": "main.go",
        "line_old": 642,
        "line_new": 642
      },
      {
        "id": "2443315787",
        "discussion_id": "3354529029",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Use `%w` for wrapping errors to preserve the original error's context.",
        "created_at": "2025-10-19T13:32:45Z",
        "file_path": "main.go",
        "line_old": 645,
        "line_new": 645
      },
      {
        "id": "2443315794",
        "discussion_id": "3354529033",
        "author": {
          "provider": "github",
          "id": 222574465,
          "username": "livereviewbot",
          "name": "livereviewbot",
          "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
          "web_url": "https://github.com/livereviewbot"
        },
        "body": "Use `%w` for wrapping errors to preserve the original error's context.",
        "created_at": "2025-10-19T13:32:47Z",
        "file_path": "main.go",
        "line_old": 648,
        "line_new": 648
      }
    ]
  },
  "diffs": [
    {
      "old_path": "main.go",
      "new_path": "main.go",
      "hunks": [
        {
          "old_start_line": 18,
          "old_line_count": 6,
          "new_start_line": 18,
          "new_line_count": 7,
          "header_text": "import (",
          "lines": [
            {
              "content": "\t\"strconv\"",
              "line_type": "context",
              "old_line_no": 18,
              "new_line_no": 18
            },
            {
              "content": "\t\"strings\"",
              "line_type": "context",
              "old_line_no": 19,
              "new_line_no": 19
            },
            {
              "content": "\t\"sync\"",
              "line_type": "context",
              "old_line_no": 20,
              "new_line_no": 20
            },
            {
              "content": "\t\"sync/atomic\" // For thread-safe error counting",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 21
            },
            {
              "content": "\t\"time\"",
              "line_type": "context",
              "old_line_no": 21,
              "new_line_no": 22
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 22,
              "new_line_no": 23
            },
            {
              "content": "\t\"github.com/go-git/go-billy/v5/memfs\"",
              "line_type": "context",
              "old_line_no": 23,
              "new_line_no": 24
            }
          ]
        },
        {
          "old_start_line": 32,
          "old_line_count": 122,
          "new_start_line": 33,
          "new_line_count": 182,
          "header_text": "import (",
          "lines": [
            {
              "content": "\t\"github.com/hashicorp/go-hclog\"",
              "line_type": "context",
              "old_line_no": 32,
              "new_line_no": 33
            },
            {
              "content": "\t\"github.com/hashicorp/go-retryablehttp\"",
              "line_type": "context",
              "old_line_no": 33,
              "new_line_no": 34
            },
            {
              "content": "\t\"github.com/xanzy/go-gitlab\"",
              "line_type": "context",
              "old_line_no": 34,
              "new_line_no": 35
            },
            {
              "content": "\t\"golang.org/x/sync/errgroup\" // For better concurrency management",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 36
            },
            {
              "content": ")",
              "line_type": "context",
              "old_line_no": 35,
              "new_line_no": 37
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 36,
              "new_line_no": 38
            },
            {
              "content": "const (",
              "line_type": "context",
              "old_line_no": 37,
              "new_line_no": 39
            },
            {
              "content": "\tdateFormat          = \"Mon, 2 Jan 2006\"",
              "line_type": "deleted",
              "old_line_no": 38,
              "new_line_no": 0
            },
            {
              "content": "\tdateFormat        = \"Mon, 2 Jan 2006\"",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 40
            },
            {
              "content": "\tdefaultGithubDomain = \"github.com\"",
              "line_type": "context",
              "old_line_no": 39,
              "new_line_no": 41
            },
            {
              "content": "\tdefaultGitlabDomain = \"gitlab.com\"",
              "line_type": "context",
              "old_line_no": 40,
              "new_line_no": 42
            },
            {
              "content": "\tdefaultConcurrency  = 4",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 43
            },
            {
              "content": "\tgithubAPIPerPage    = 100",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 44
            },
            {
              "content": "\tgitlabRetryAfterSeconds = 30",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 45
            },
            {
              "content": "\tgithubRateLimitResetBuffer = 30 * time.Second",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 46
            },
            {
              "content": "\tgithubRateLimitWaitFallback = 60 * time.Second",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 47
            },
            {
              "content": "\tpullRequestLinkPattern = \".+/([0-9]+)$\" // Regex for extracting PR number from URL",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 48
            },
            {
              "content": ")",
              "line_type": "context",
              "old_line_no": 41,
              "new_line_no": 49
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 42,
              "new_line_no": 50
            },
            {
              "content": "var loop, report bool",
              "line_type": "deleted",
              "old_line_no": 43,
              "new_line_no": 0
            },
            {
              "content": "var deleteExistingRepos, enablePullRequests, renameMasterToMain bool",
              "line_type": "deleted",
              "old_line_no": 44,
              "new_line_no": 0
            },
            {
              "content": "var githubDomain, githubRepo, githubToken, githubUser, gitlabDomain, gitlabProject, gitlabToken, projectsCsvPath string",
              "line_type": "deleted",
              "old_line_no": 45,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 46,
              "new_line_no": 0
            },
            {
              "content": "var (",
              "line_type": "deleted",
              "old_line_no": 47,
              "new_line_no": 0
            },
            {
              "content": "\tcache          *objectCache",
              "line_type": "deleted",
              "old_line_no": 48,
              "new_line_no": 0
            },
            {
              "content": "\terrCount       int",
              "line_type": "deleted",
              "old_line_no": 49,
              "new_line_no": 0
            },
            {
              "content": "\tlogger         hclog.Logger",
              "line_type": "deleted",
              "old_line_no": 50,
              "new_line_no": 0
            },
            {
              "content": "\tgh             *github.Client",
              "line_type": "deleted",
              "old_line_no": 51,
              "new_line_no": 0
            },
            {
              "content": "\tgl             *gitlab.Client",
              "line_type": "deleted",
              "old_line_no": 52,
              "new_line_no": 0
            },
            {
              "content": "\tmaxConcurrency int",
              "line_type": "deleted",
              "old_line_no": 53,
              "new_line_no": 0
            },
            {
              "content": ")",
              "line_type": "deleted",
              "old_line_no": 54,
              "new_line_no": 0
            },
            {
              "content": "// Config holds all the command-line flags and environment variables.",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 51
            },
            {
              "content": "type Config struct {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 52
            },
            {
              "content": "\tLoop                 bool",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 53
            },
            {
              "content": "\tReport               bool",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 54
            },
            {
              "content": "\tDeleteExistingRepos  bool",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 55
            },
            {
              "content": "\tEnablePullRequests   bool",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 56
            },
            {
              "content": "\tRenameMasterToMain   bool",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 57
            },
            {
              "content": "\tGithubDomain         string",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 58
            },
            {
              "content": "\tGithubRepo           string",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 59
            },
            {
              "content": "\tGithubToken          string",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 60
            },
            {
              "content": "\tGithubUser           string",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 61
            },
            {
              "content": "\tGitlabDomain         string",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 62
            },
            {
              "content": "\tGitlabProject        string",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 63
            },
            {
              "content": "\tProjectsCsvPath      string",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 64
            },
            {
              "content": "\tMaxConcurrency       int",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 65
            },
            {
              "content": "}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 66
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 55,
              "new_line_no": 67
            },
            {
              "content": "type Project = []string",
              "line_type": "deleted",
              "old_line_no": 56,
              "new_line_no": 0
            },
            {
              "content": "// ProjectConfig represents a single project mapping from GitLab to GitHub.",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 68
            },
            {
              "content": "type ProjectConfig struct {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 69
            },
            {
              "content": "\tGitlabPath string",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 70
            },
            {
              "content": "\tGithubRepo string",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 71
            },
            {
              "content": "}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 72
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 57,
              "new_line_no": 73
            },
            {
              "content": "// Report holds the migration report data for a single project.",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 74
            },
            {
              "content": "type Report struct {",
              "line_type": "context",
              "old_line_no": 58,
              "new_line_no": 75
            },
            {
              "content": "\tGroupName          string",
              "line_type": "context",
              "old_line_no": 59,
              "new_line_no": 76
            },
            {
              "content": "\tProjectName        string",
              "line_type": "context",
              "old_line_no": 60,
              "new_line_no": 77
            },
            {
              "content": "\tMergeRequestsCount int",
              "line_type": "context",
              "old_line_no": 61,
              "new_line_no": 78
            },
            {
              "content": "}",
              "line_type": "context",
              "old_line_no": 62,
              "new_line_no": 79
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 63,
              "new_line_no": 80
            },
            {
              "content": "func sendErr(err error) {",
              "line_type": "deleted",
              "old_line_no": 64,
              "new_line_no": 0
            },
            {
              "content": "\terrCount++",
              "line_type": "deleted",
              "old_line_no": 65,
              "new_line_no": 0
            },
            {
              "content": "\tlogger.Error(err.Error())",
              "line_type": "deleted",
              "old_line_no": 66,
              "new_line_no": 0
            },
            {
              "content": "}",
              "line_type": "deleted",
              "old_line_no": 67,
              "new_line_no": 0
            },
            {
              "content": "// Global clients and cache (still global, but less impactful than config flags)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 81
            },
            {
              "content": "var (",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 82
            },
            {
              "content": "\tcache    *objectCache",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 83
            },
            {
              "content": "\terrCount atomic.Int32 // Use atomic for thread-safe increment",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 84
            },
            {
              "content": "\tlogger   hclog.Logger",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 85
            },
            {
              "content": "\tgh       *github.Client",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 86
            },
            {
              "content": "\tgl       *gitlab.Client",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 87
            },
            {
              "content": ")",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 88
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 68,
              "new_line_no": 89
            },
            {
              "content": "func main() {",
              "line_type": "context",
              "old_line_no": 69,
              "new_line_no": 90
            },
            {
              "content": "\tvar err error",
              "line_type": "deleted",
              "old_line_no": 70,
              "new_line_no": 0
            },
            {
              "content": "\t// Initialize logger early",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 91
            },
            {
              "content": "\tlogger = hclog.New(\u0026hclog.LoggerOptions{",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 92
            },
            {
              "content": "\t\tName:  \"gitlab-migrator\",",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 93
            },
            {
              "content": "\t\tLevel: hclog.LevelFromString(os.Getenv(\"LOG_LEVEL\")),",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 94
            },
            {
              "content": "\t})",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 95
            },
            {
              "content": "",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 96
            },
            {
              "content": "\tcfg, err := parseConfig()",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 97
            },
            {
              "content": "\tif err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 98
            },
            {
              "content": "\t\tlogger.Error(\"configuration error\", \"err\", err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 99
            },
            {
              "content": "\t\tos.Exit(1)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 100
            },
            {
              "content": "\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 101
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 71,
              "new_line_no": 102
            },
            {
              "content": "\t// Bypass pre-emptive rate limit checks in the GitHub client, as we will handle these via go-retryablehttp",
              "line_type": "context",
              "old_line_no": 72,
              "new_line_no": 103
            },
            {
              "content": "\tvalueCtx := context.WithValue(context.Background(), github.BypassRateLimitCheck, true)",
              "line_type": "context",
              "old_line_no": 73,
              "new_line_no": 104
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 74,
              "new_line_no": 105
            },
            {
              "content": "\t// Assign a Done channel so we can abort on Ctrl-c",
              "line_type": "context",
              "old_line_no": 75,
              "new_line_no": 106
            },
            {
              "content": "\tctx, cancel := context.WithCancel(valueCtx)",
              "line_type": "context",
              "old_line_no": 76,
              "new_line_no": 107
            },
            {
              "content": "\tdefer cancel() // Ensure cancel is called on exit",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 108
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 77,
              "new_line_no": 109
            },
            {
              "content": "\tc := make(chan os.Signal, 1)",
              "line_type": "deleted",
              "old_line_no": 78,
              "new_line_no": 0
            },
            {
              "content": "\tsignal.Notify(c, os.Interrupt)",
              "line_type": "deleted",
              "old_line_no": 79,
              "new_line_no": 0
            },
            {
              "content": "\tdefer func() {",
              "line_type": "deleted",
              "old_line_no": 80,
              "new_line_no": 0
            },
            {
              "content": "\t\tsignal.Stop(c)",
              "line_type": "deleted",
              "old_line_no": 81,
              "new_line_no": 0
            },
            {
              "content": "\t\tcancel()",
              "line_type": "deleted",
              "old_line_no": 82,
              "new_line_no": 0
            },
            {
              "content": "\t}()",
              "line_type": "deleted",
              "old_line_no": 83,
              "new_line_no": 0
            },
            {
              "content": "\tgo func() {",
              "line_type": "deleted",
              "old_line_no": 84,
              "new_line_no": 0
            },
            {
              "content": "\t\tselect {",
              "line_type": "deleted",
              "old_line_no": 85,
              "new_line_no": 0
            },
            {
              "content": "\t\tcase \u003c-c:",
              "line_type": "deleted",
              "old_line_no": 86,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tcancel()",
              "line_type": "deleted",
              "old_line_no": 87,
              "new_line_no": 0
            },
            {
              "content": "\t\tcase \u003c-ctx.Done():",
              "line_type": "deleted",
              "old_line_no": 88,
              "new_line_no": 0
            },
            {
              "content": "\t\t}",
              "line_type": "deleted",
              "old_line_no": 89,
              "new_line_no": 0
            },
            {
              "content": "\t}()",
              "line_type": "deleted",
              "old_line_no": 90,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 91,
              "new_line_no": 0
            },
            {
              "content": "\tlogger = hclog.New(\u0026hclog.LoggerOptions{",
              "line_type": "deleted",
              "old_line_no": 92,
              "new_line_no": 0
            },
            {
              "content": "\t\tName:  \"gitlab-migrator\",",
              "line_type": "deleted",
              "old_line_no": 93,
              "new_line_no": 0
            },
            {
              "content": "\t\tLevel: hclog.LevelFromString(os.Getenv(\"LOG_LEVEL\")),",
              "line_type": "deleted",
              "old_line_no": 94,
              "new_line_no": 0
            },
            {
              "content": "\t})",
              "line_type": "deleted",
              "old_line_no": 95,
              "new_line_no": 0
            },
            {
              "content": "\tsetupSignalHandler(cancel)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 110
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 96,
              "new_line_no": 111
            },
            {
              "content": "\tcache = newObjectCache()",
              "line_type": "context",
              "old_line_no": 97,
              "new_line_no": 112
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 98,
              "new_line_no": 113
            },
            {
              "content": "\tgithubToken = os.Getenv(\"GITHUB_TOKEN\")",
              "line_type": "deleted",
              "old_line_no": 99,
              "new_line_no": 0
            },
            {
              "content": "\tif githubToken == \"\" {",
              "line_type": "deleted",
              "old_line_no": 100,
              "new_line_no": 0
            },
            {
              "content": "\t\tlogger.Error(\"missing environment variable\", \"name\", \"GITHUB_TOKEN\")",
              "line_type": "deleted",
              "old_line_no": 101,
              "new_line_no": 0
            },
            {
              "content": "\t// Setup HTTP clients for GitHub and GitLab",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 114
            },
            {
              "content": "\thttpClient := setupRetryableHTTPClient()",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 115
            },
            {
              "content": "\tgh, gl, err = setupAPIClients(ctx, httpClient, cfg)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 116
            },
            {
              "content": "\tif err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 117
            },
            {
              "content": "\t\tlogger.Error(\"failed to set up API clients\", \"err\", err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 118
            },
            {
              "content": "\t\tos.Exit(1)",
              "line_type": "context",
              "old_line_no": 102,
              "new_line_no": 119
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 103,
              "new_line_no": 120
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 104,
              "new_line_no": 121
            },
            {
              "content": "\tgitlabToken = os.Getenv(\"GITLAB_TOKEN\")",
              "line_type": "deleted",
              "old_line_no": 105,
              "new_line_no": 0
            },
            {
              "content": "\tif gitlabToken == \"\" {",
              "line_type": "deleted",
              "old_line_no": 106,
              "new_line_no": 0
            },
            {
              "content": "\t\tlogger.Error(\"missing environment variable\", \"name\", \"GITLAB_TOKEN\")",
              "line_type": "deleted",
              "old_line_no": 107,
              "new_line_no": 0
            },
            {
              "content": "\tprojects, err := loadProjects(cfg)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 122
            },
            {
              "content": "\tif err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 123
            },
            {
              "content": "\t\tlogger.Error(\"failed to load projects\", \"err\", err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 124
            },
            {
              "content": "\t\tos.Exit(1)",
              "line_type": "context",
              "old_line_no": 108,
              "new_line_no": 125
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 109,
              "new_line_no": 126
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 110,
              "new_line_no": 127
            },
            {
              "content": "\tflag.BoolVar(\u0026loop, \"loop\", false, \"continue migrating until canceled\")",
              "line_type": "deleted",
              "old_line_no": 111,
              "new_line_no": 0
            },
            {
              "content": "\tflag.BoolVar(\u0026report, \"report\", false, \"report on primitives to be migrated instead of beginning migration\")",
              "line_type": "deleted",
              "old_line_no": 112,
              "new_line_no": 0
            },
            {
              "content": "\tif cfg.Report {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 128
            },
            {
              "content": "\t\tprintReport(ctx, projects)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 129
            },
            {
              "content": "\t} else {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 130
            },
            {
              "content": "\t\tif err := performMigration(ctx, cfg, projects); err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 131
            },
            {
              "content": "\t\t\tlogger.Error(\"migration failed\", \"err\", err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 132
            },
            {
              "content": "\t\t\tos.Exit(1)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 133
            },
            {
              "content": "\t\t} else if errCount.Load() \u003e 0 {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 134
            },
            {
              "content": "\t\t\tlogger.Warn(fmt.Sprintf(\"encountered %d errors during migration, review log output for details\", errCount.Load()))",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 135
            },
            {
              "content": "\t\t\tos.Exit(1)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 136
            },
            {
              "content": "\t\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 137
            },
            {
              "content": "\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 138
            },
            {
              "content": "}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 139
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 113,
              "new_line_no": 140
            },
            {
              "content": "\tflag.BoolVar(\u0026deleteExistingRepos, \"delete-existing-repos\", false, \"whether existing repositories should be deleted before migrating\")",
              "line_type": "deleted",
              "old_line_no": 114,
              "new_line_no": 0
            },
            {
              "content": "\tflag.BoolVar(\u0026enablePullRequests, \"migrate-pull-requests\", false, \"whether pull requests should be migrated\")",
              "line_type": "deleted",
              "old_line_no": 115,
              "new_line_no": 0
            },
            {
              "content": "\tflag.BoolVar(\u0026renameMasterToMain, \"rename-master-to-main\", false, \"rename master branch to main and update pull requests\")",
              "line_type": "deleted",
              "old_line_no": 116,
              "new_line_no": 0
            },
            {
              "content": "// parseConfig parses command-line flags and environment variables into a Config struct.",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 141
            },
            {
              "content": "func parseConfig() (*Config, error) {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 142
            },
            {
              "content": "\tcfg := \u0026Config{}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 143
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 117,
              "new_line_no": 144
            },
            {
              "content": "\tflag.StringVar(\u0026githubDomain, \"github-domain\", defaultGithubDomain, \"specifies the GitHub domain to use\")",
              "line_type": "deleted",
              "old_line_no": 118,
              "new_line_no": 0
            },
            {
              "content": "\tflag.StringVar(\u0026githubRepo, \"github-repo\", \"\", \"the GitHub repository to migrate to\")",
              "line_type": "deleted",
              "old_line_no": 119,
              "new_line_no": 0
            },
            {
              "content": "\tflag.StringVar(\u0026githubUser, \"github-user\", \"\", \"specifies the GitHub user to use, who will author any migrated PRs (required)\")",
              "line_type": "deleted",
              "old_line_no": 120,
              "new_line_no": 0
            },
            {
              "content": "\tflag.StringVar(\u0026gitlabDomain, \"gitlab-domain\", defaultGitlabDomain, \"specifies the GitLab domain to use\")",
              "line_type": "deleted",
              "old_line_no": 121,
              "new_line_no": 0
            },
            {
              "content": "\tflag.StringVar(\u0026gitlabProject, \"gitlab-project\", \"\", \"the GitLab project to migrate\")",
              "line_type": "deleted",
              "old_line_no": 122,
              "new_line_no": 0
            },
            {
              "content": "\tflag.StringVar(\u0026projectsCsvPath, \"projects-csv\", \"\", \"specifies the path to a CSV file describing projects to migrate (incompatible with -gitlab-project and -github-repo)\")",
              "line_type": "deleted",
              "old_line_no": 123,
              "new_line_no": 0
            },
            {
              "content": "\tflag.BoolVar(\u0026cfg.Loop, \"loop\", false, \"continue migrating until canceled\")",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 145
            },
            {
              "content": "\tflag.BoolVar(\u0026cfg.Report, \"report\", false, \"report on primitives to be migrated instead of beginning migration\")",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 146
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 124,
              "new_line_no": 147
            },
            {
              "content": "\tflag.IntVar(\u0026maxConcurrency, \"max-concurrency\", 4, \"how many projects to migrate in parallel\")",
              "line_type": "deleted",
              "old_line_no": 125,
              "new_line_no": 0
            },
            {
              "content": "\tflag.BoolVar(\u0026cfg.DeleteExistingRepos, \"delete-existing-repos\", false, \"whether existing repositories should be deleted before migrating\")",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 148
            },
            {
              "content": "\tflag.BoolVar(\u0026cfg.EnablePullRequests, \"migrate-pull-requests\", false, \"whether pull requests should be migrated\")",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 149
            },
            {
              "content": "\tflag.BoolVar(\u0026cfg.RenameMasterToMain, \"rename-master-to-main\", false, \"rename master branch to main and update pull requests\")",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 150
            },
            {
              "content": "",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 151
            },
            {
              "content": "\tflag.StringVar(\u0026cfg.GithubDomain, \"github-domain\", defaultGithubDomain, \"specifies the GitHub domain to use\")",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 152
            },
            {
              "content": "\tflag.StringVar(\u0026cfg.GithubRepo, \"github-repo\", \"\", \"the GitHub repository to migrate to\")",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 153
            },
            {
              "content": "\tflag.StringVar(\u0026cfg.GithubUser, \"github-user\", \"\", \"specifies the GitHub user to use, who will author any migrated PRs (required)\")",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 154
            },
            {
              "content": "\tflag.StringVar(\u0026cfg.GitlabDomain, \"gitlab-domain\", defaultGitlabDomain, \"specifies the GitLab domain to use\")",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 155
            },
            {
              "content": "\tflag.StringVar(\u0026cfg.GitlabProject, \"gitlab-project\", \"\", \"the GitLab project to migrate\")",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 156
            },
            {
              "content": "\tflag.StringVar(\u0026cfg.ProjectsCsvPath, \"projects-csv\", \"\", \"specifies the path to a CSV file describing projects to migrate (incompatible with -gitlab-project and -github-repo)\")",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 157
            },
            {
              "content": "",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 158
            },
            {
              "content": "\tflag.IntVar(\u0026cfg.MaxConcurrency, \"max-concurrency\", defaultConcurrency, \"how many projects to migrate in parallel\")",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 159
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 126,
              "new_line_no": 160
            },
            {
              "content": "\tflag.Parse()",
              "line_type": "context",
              "old_line_no": 127,
              "new_line_no": 161
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 128,
              "new_line_no": 162
            },
            {
              "content": "\tif githubUser == \"\" {",
              "line_type": "deleted",
              "old_line_no": 129,
              "new_line_no": 0
            },
            {
              "content": "\t\tgithubUser = os.Getenv(\"GITHUB_USER\")",
              "line_type": "deleted",
              "old_line_no": 130,
              "new_line_no": 0
            },
            {
              "content": "\tcfg.GithubToken = os.Getenv(\"GITHUB_TOKEN\")",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 163
            },
            {
              "content": "\tif cfg.GithubToken == \"\" {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 164
            },
            {
              "content": "\t\treturn nil, errors.New(\"missing environment variable GITHUB_TOKEN\")",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 165
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 131,
              "new_line_no": 166
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 132,
              "new_line_no": 167
            },
            {
              "content": "\tif githubUser == \"\" {",
              "line_type": "deleted",
              "old_line_no": 133,
              "new_line_no": 0
            },
            {
              "content": "\t\tlogger.Error(\"must specify GitHub user\")",
              "line_type": "deleted",
              "old_line_no": 134,
              "new_line_no": 0
            },
            {
              "content": "\t\tos.Exit(1)",
              "line_type": "deleted",
              "old_line_no": 135,
              "new_line_no": 0
            },
            {
              "content": "\tcfg.GitlabToken = os.Getenv(\"GITLAB_TOKEN\")",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 168
            },
            {
              "content": "\tif cfg.GitlabToken == \"\" {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 169
            },
            {
              "content": "\t\treturn nil, errors.New(\"missing environment variable GITLAB_TOKEN\")",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 170
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 136,
              "new_line_no": 171
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 137,
              "new_line_no": 172
            },
            {
              "content": "\trepoSpecifiedInline := githubRepo != \"\" \u0026\u0026 gitlabProject != \"\"",
              "line_type": "deleted",
              "old_line_no": 138,
              "new_line_no": 0
            },
            {
              "content": "\tif repoSpecifiedInline \u0026\u0026 projectsCsvPath != \"\" {",
              "line_type": "deleted",
              "old_line_no": 139,
              "new_line_no": 0
            },
            {
              "content": "\t\tlogger.Error(\"cannot specify -projects-csv and either -github-repo or -gitlab-project at the same time\")",
              "line_type": "deleted",
              "old_line_no": 140,
              "new_line_no": 0
            },
            {
              "content": "\t\tos.Exit(1)",
              "line_type": "deleted",
              "old_line_no": 141,
              "new_line_no": 0
            },
            {
              "content": "\tif cfg.GithubUser == \"\" {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 173
            },
            {
              "content": "\t\tcfg.GithubUser = os.Getenv(\"GITHUB_USER\")",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 174
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 142,
              "new_line_no": 175
            },
            {
              "content": "\tif !repoSpecifiedInline \u0026\u0026 projectsCsvPath == \"\" {",
              "line_type": "deleted",
              "old_line_no": 143,
              "new_line_no": 0
            },
            {
              "content": "\t\tlogger.Error(\"must specify either -projects-csv or both of -github-repo and -gitlab-project\")",
              "line_type": "deleted",
              "old_line_no": 144,
              "new_line_no": 0
            },
            {
              "content": "\t\tos.Exit(1)",
              "line_type": "deleted",
              "old_line_no": 145,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 176
            },
            {
              "content": "\tif cfg.GithubUser == \"\" {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 177
            },
            {
              "content": "\t\treturn nil, errors.New(\"must specify GitHub user via -github-user or GITHUB_USER environment variable\")",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 178
            },
            {
              "content": "\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 179
            },
            {
              "content": "",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 180
            },
            {
              "content": "\trepoSpecifiedInline := cfg.GithubRepo != \"\" \u0026\u0026 cfg.GitlabProject != \"\"",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 181
            },
            {
              "content": "\tif repoSpecifiedInline \u0026\u0026 cfg.ProjectsCsvPath != \"\" {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 182
            },
            {
              "content": "\t\treturn nil, errors.New(\"cannot specify -projects-csv and either -github-repo or -gitlab-project at the same time\")",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 183
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 146,
              "new_line_no": 184
            },
            {
              "content": "\tif !repoSpecifiedInline \u0026\u0026 cfg.ProjectsCsvPath == \"\" {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 185
            },
            {
              "content": "\t\treturn nil, errors.New(\"must specify either -projects-csv or both of -github-repo and -gitlab-project\")",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 186
            },
            {
              "content": "\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 187
            },
            {
              "content": "",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 188
            },
            {
              "content": "\treturn cfg, nil",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 189
            },
            {
              "content": "}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 190
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 147,
              "new_line_no": 191
            },
            {
              "content": "// setupSignalHandler sets up a goroutine to listen for OS interrupt signals.",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 192
            },
            {
              "content": "func setupSignalHandler(cancel context.CancelFunc) {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 193
            },
            {
              "content": "\tc := make(chan os.Signal, 1)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 194
            },
            {
              "content": "\tsignal.Notify(c, os.Interrupt)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 195
            },
            {
              "content": "\tgo func() {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 196
            },
            {
              "content": "\t\tselect {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 197
            },
            {
              "content": "\t\tcase \u003c-c:",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 198
            },
            {
              "content": "\t\t\tlogger.Info(\"received interrupt signal, shutting down...\")",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 199
            },
            {
              "content": "\t\t\tcancel()",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 200
            },
            {
              "content": "\t\tcase \u003c-context.Background().Done(): // Fallback if main context finishes",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 201
            },
            {
              "content": "\t\t\tsignal.Stop(c)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 202
            },
            {
              "content": "\t\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 203
            },
            {
              "content": "\t}()",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 204
            },
            {
              "content": "}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 205
            },
            {
              "content": "",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 206
            },
            {
              "content": "// setupRetryableHTTPClient configures and returns a retryable HTTP client.",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 207
            },
            {
              "content": "func setupRetryableHTTPClient() *retryablehttp.Client {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 208
            },
            {
              "content": "\tretryClient := \u0026retryablehttp.Client{",
              "line_type": "context",
              "old_line_no": 148,
              "new_line_no": 209
            },
            {
              "content": "\t\tHTTPClient:   cleanhttp.DefaultPooledClient(),",
              "line_type": "context",
              "old_line_no": 149,
              "new_line_no": 210
            },
            {
              "content": "\t\tLogger:       nil,",
              "line_type": "deleted",
              "old_line_no": 150,
              "new_line_no": 0
            },
            {
              "content": "\t\tLogger:       nil, // retryablehttp's logger is verbose, using hclog's Trace instead",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 211
            },
            {
              "content": "\t\tRetryMax:     2,",
              "line_type": "context",
              "old_line_no": 151,
              "new_line_no": 212
            },
            {
              "content": "\t\tRetryWaitMin: 30 * time.Second,",
              "line_type": "context",
              "old_line_no": 152,
              "new_line_no": 213
            },
            {
              "content": "\t\tRetryWaitMax: 300 * time.Second,",
              "line_type": "context",
              "old_line_no": 153,
              "new_line_no": 214
            }
          ]
        },
        {
          "old_start_line": 155,
          "old_line_count": 22,
          "new_start_line": 216,
          "new_line_count": 24,
          "header_text": "func main() {",
          "lines": [
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 155,
              "new_line_no": 216
            },
            {
              "content": "\tretryClient.Backoff = func(min, max time.Duration, attemptNum int, resp *http.Response) (sleep time.Duration) {",
              "line_type": "context",
              "old_line_no": 156,
              "new_line_no": 217
            },
            {
              "content": "\t\trequestMethod := \"unknown\"",
              "line_type": "context",
              "old_line_no": 157,
              "new_line_no": 218
            },
            {
              "content": "\t\trequestUrl := \"unknown\"",
              "line_type": "deleted",
              "old_line_no": 158,
              "new_line_no": 0
            },
            {
              "content": "\t\trequestURL := \"unknown\"",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 219
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 159,
              "new_line_no": 220
            },
            {
              "content": "\t\tif req := resp.Request; req != nil {",
              "line_type": "context",
              "old_line_no": 160,
              "new_line_no": 221
            },
            {
              "content": "\t\t\trequestMethod = req.Method",
              "line_type": "context",
              "old_line_no": 161,
              "new_line_no": 222
            },
            {
              "content": "\t\t\tif req.URL != nil {",
              "line_type": "context",
              "old_line_no": 162,
              "new_line_no": 223
            },
            {
              "content": "\t\t\t\trequestUrl = req.URL.String()",
              "line_type": "deleted",
              "old_line_no": 163,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\trequestURL = req.URL.String()",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 224
            },
            {
              "content": "\t\t\t}",
              "line_type": "context",
              "old_line_no": 164,
              "new_line_no": 225
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 165,
              "new_line_no": 226
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 166,
              "new_line_no": 227
            },
            {
              "content": "\t\tdefer func() {",
              "line_type": "context",
              "old_line_no": 167,
              "new_line_no": 228
            },
            {
              "content": "\t\t\tlogger.Trace(\"waiting before retrying failed API request\", \"method\", requestMethod, \"url\", requestUrl, \"status\", resp.StatusCode, \"sleep\", sleep, \"attempt\", attemptNum, \"max_attempts\", retryClient.RetryMax)",
              "line_type": "deleted",
              "old_line_no": 168,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tlogger.Trace(\"waiting before retrying failed API request\",",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 229
            },
            {
              "content": "\t\t\t\t\"method\", requestMethod, \"url\", requestURL, \"status\", resp.StatusCode,",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 230
            },
            {
              "content": "\t\t\t\t\"sleep\", sleep, \"attempt\", attemptNum, \"max_attempts\", retryClient.RetryMax)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 231
            },
            {
              "content": "\t\t}()",
              "line_type": "context",
              "old_line_no": 169,
              "new_line_no": 232
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 170,
              "new_line_no": 233
            },
            {
              "content": "\t\tif resp != nil {",
              "line_type": "context",
              "old_line_no": 171,
              "new_line_no": 234
            },
            {
              "content": "\t\t\t// Check the Retry-After header",
              "line_type": "context",
              "old_line_no": 172,
              "new_line_no": 235
            },
            {
              "content": "\t\t\tif s, ok := resp.Header[\"Retry-After\"]; ok {",
              "line_type": "deleted",
              "old_line_no": 173,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tif s, ok := resp.Header[\"Retry-After\"]; ok \u0026\u0026 len(s) \u003e 0 {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 236
            },
            {
              "content": "\t\t\t\tif retryAfter, err := strconv.ParseInt(s[0], 10, 64); err == nil {",
              "line_type": "context",
              "old_line_no": 174,
              "new_line_no": 237
            },
            {
              "content": "\t\t\t\t\tsleep = time.Second * time.Duration(retryAfter)",
              "line_type": "context",
              "old_line_no": 175,
              "new_line_no": 238
            },
            {
              "content": "\t\t\t\t\treturn",
              "line_type": "context",
              "old_line_no": 176,
              "new_line_no": 239
            }
          ]
        },
        {
          "old_start_line": 180,
          "old_line_count": 20,
          "new_start_line": 243,
          "new_line_count": 18,
          "header_text": "func main() {",
          "lines": [
            {
              "content": "\t\t\t// Reference:",
              "line_type": "context",
              "old_line_no": 180,
              "new_line_no": 243
            },
            {
              "content": "\t\t\t// - https://docs.github.com/en/rest/using-the-rest-api/rate-limits-for-the-rest-api?apiVersion=2022-11-28",
              "line_type": "context",
              "old_line_no": 181,
              "new_line_no": 244
            },
            {
              "content": "\t\t\t// - https://docs.github.com/en/rest/using-the-rest-api/best-practices-for-using-the-rest-api?apiVersion=2022-11-28",
              "line_type": "context",
              "old_line_no": 182,
              "new_line_no": 245
            },
            {
              "content": "\t\t\tif v, ok := resp.Header[\"X-Ratelimit-Remaining\"]; ok {",
              "line_type": "deleted",
              "old_line_no": 183,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tif v, ok := resp.Header[\"X-Ratelimit-Remaining\"]; ok \u0026\u0026 len(v) \u003e 0 {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 246
            },
            {
              "content": "\t\t\t\tif remaining, err := strconv.ParseInt(v[0], 10, 64); err == nil \u0026\u0026 remaining == 0 {",
              "line_type": "context",
              "old_line_no": 184,
              "new_line_no": 247
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 185,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t// If x-ratelimit-reset is present, this indicates the UTC timestamp when we can retry",
              "line_type": "context",
              "old_line_no": 186,
              "new_line_no": 248
            },
            {
              "content": "\t\t\t\t\tif w, ok := resp.Header[\"X-Ratelimit-Reset\"]; ok {",
              "line_type": "deleted",
              "old_line_no": 187,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tif w, ok := resp.Header[\"X-Ratelimit-Reset\"]; ok \u0026\u0026 len(w) \u003e 0 {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 249
            },
            {
              "content": "\t\t\t\t\t\tif recoveryEpoch, err := strconv.ParseInt(w[0], 10, 64); err == nil {",
              "line_type": "context",
              "old_line_no": 188,
              "new_line_no": 250
            },
            {
              "content": "\t\t\t\t\t\t\t// Add 30 seconds to recovery timestamp for clock differences",
              "line_type": "deleted",
              "old_line_no": 189,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\t\tsleep = roundDuration(time.Until(time.Unix(recoveryEpoch+30, 0)), time.Second)",
              "line_type": "deleted",
              "old_line_no": 190,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\t\t// Add a buffer to recovery timestamp for clock differences",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 251
            },
            {
              "content": "\t\t\t\t\t\t\tsleep = roundDuration(time.Until(time.Unix(recoveryEpoch, 0))+githubRateLimitResetBuffer, time.Second)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 252
            },
            {
              "content": "\t\t\t\t\t\t\treturn",
              "line_type": "context",
              "old_line_no": 191,
              "new_line_no": 253
            },
            {
              "content": "\t\t\t\t\t\t}",
              "line_type": "context",
              "old_line_no": 192,
              "new_line_no": 254
            },
            {
              "content": "\t\t\t\t\t}",
              "line_type": "context",
              "old_line_no": 193,
              "new_line_no": 255
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 194,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t// Otherwise, wait for 60 seconds",
              "line_type": "deleted",
              "old_line_no": 195,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tsleep = 60 * time.Second",
              "line_type": "deleted",
              "old_line_no": 196,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t// Otherwise, wait for a fallback duration",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 256
            },
            {
              "content": "\t\t\t\t\tsleep = githubRateLimitWaitFallback",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 257
            },
            {
              "content": "\t\t\t\t\treturn",
              "line_type": "context",
              "old_line_no": 197,
              "new_line_no": 258
            },
            {
              "content": "\t\t\t\t}",
              "line_type": "context",
              "old_line_no": 198,
              "new_line_no": 259
            },
            {
              "content": "\t\t\t}",
              "line_type": "context",
              "old_line_no": 199,
              "new_line_no": 260
            }
          ]
        },
        {
          "old_start_line": 205,
          "old_line_count": 7,
          "new_start_line": 266,
          "new_line_count": 6,
          "header_text": "func main() {",
          "lines": [
            {
              "content": "\t\tif float64(wait) != mult || wait \u003e max {",
              "line_type": "context",
              "old_line_no": 205,
              "new_line_no": 266
            },
            {
              "content": "\t\t\twait = max",
              "line_type": "context",
              "old_line_no": 206,
              "new_line_no": 267
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 207,
              "new_line_no": 268
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 208,
              "new_line_no": 0
            },
            {
              "content": "\t\tsleep = wait",
              "line_type": "context",
              "old_line_no": 209,
              "new_line_no": 269
            },
            {
              "content": "\t\treturn",
              "line_type": "context",
              "old_line_no": 210,
              "new_line_no": 270
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 211,
              "new_line_no": 271
            }
          ]
        },
        {
          "old_start_line": 221,
          "old_line_count": 11,
          "new_start_line": 281,
          "new_line_count": 10,
          "header_text": "func main() {",
          "lines": [
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 221,
              "new_line_no": 281
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 222,
              "new_line_no": 282
            },
            {
              "content": "\t\tretryableStatuses := []int{",
              "line_type": "context",
              "old_line_no": 223,
              "new_line_no": 283
            },
            {
              "content": "\t\t\thttp.StatusTooManyRequests, // rate-limiting",
              "line_type": "deleted",
              "old_line_no": 224,
              "new_line_no": 0
            },
            {
              "content": "\t\t\thttp.StatusForbidden,       // rate-limiting",
              "line_type": "deleted",
              "old_line_no": 225,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 226,
              "new_line_no": 0
            },
            {
              "content": "\t\t\thttp.StatusTooManyRequests,   // rate-limiting",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 284
            },
            {
              "content": "\t\t\thttp.StatusForbidden,         // rate-limiting (sometimes used for rate limits)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 285
            },
            {
              "content": "\t\t\thttp.StatusRequestTimeout,",
              "line_type": "context",
              "old_line_no": 227,
              "new_line_no": 286
            },
            {
              "content": "\t\t\thttp.StatusFailedDependency,",
              "line_type": "deleted",
              "old_line_no": 228,
              "new_line_no": 0
            },
            {
              "content": "\t\t\thttp.StatusFailedDependency, // Used by some APIs for transient errors",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 287
            },
            {
              "content": "\t\t\thttp.StatusInternalServerError,",
              "line_type": "context",
              "old_line_no": 229,
              "new_line_no": 288
            },
            {
              "content": "\t\t\thttp.StatusBadGateway,",
              "line_type": "context",
              "old_line_no": 230,
              "new_line_no": 289
            },
            {
              "content": "\t\t\thttp.StatusServiceUnavailable,",
              "line_type": "context",
              "old_line_no": 231,
              "new_line_no": 290
            }
          ]
        },
        {
          "old_start_line": 233,
          "old_line_count": 327,
          "new_start_line": 292,
          "new_line_count": 319,
          "header_text": "func main() {",
          "lines": [
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 233,
              "new_line_no": 292
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 234,
              "new_line_no": 293
            },
            {
              "content": "\t\trequestMethod := \"unknown\"",
              "line_type": "context",
              "old_line_no": 235,
              "new_line_no": 294
            },
            {
              "content": "\t\trequestUrl := \"unknown\"",
              "line_type": "deleted",
              "old_line_no": 236,
              "new_line_no": 0
            },
            {
              "content": "\t\trequestURL := \"unknown\"",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 295
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 237,
              "new_line_no": 296
            },
            {
              "content": "\t\tif req := resp.Request; req != nil {",
              "line_type": "context",
              "old_line_no": 238,
              "new_line_no": 297
            },
            {
              "content": "\t\t\trequestMethod = req.Method",
              "line_type": "context",
              "old_line_no": 239,
              "new_line_no": 298
            },
            {
              "content": "\t\t\tif req.URL != nil {",
              "line_type": "context",
              "old_line_no": 240,
              "new_line_no": 299
            },
            {
              "content": "\t\t\t\trequestUrl = req.URL.String()",
              "line_type": "deleted",
              "old_line_no": 241,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\trequestURL = req.URL.String()",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 300
            },
            {
              "content": "\t\t\t}",
              "line_type": "context",
              "old_line_no": 242,
              "new_line_no": 301
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 243,
              "new_line_no": 302
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 244,
              "new_line_no": 303
            },
            {
              "content": "\t\tfor _, status := range retryableStatuses {",
              "line_type": "context",
              "old_line_no": 245,
              "new_line_no": 304
            },
            {
              "content": "\t\t\tif resp.StatusCode == status {",
              "line_type": "context",
              "old_line_no": 246,
              "new_line_no": 305
            },
            {
              "content": "\t\t\t\tlogger.Trace(\"retrying failed API request\", \"method\", requestMethod, \"url\", requestUrl, \"status\", resp.StatusCode)",
              "line_type": "deleted",
              "old_line_no": 247,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tlogger.Trace(\"retrying failed API request\", \"method\", requestMethod, \"url\", requestURL, \"status\", resp.StatusCode)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 306
            },
            {
              "content": "\t\t\t\treturn true, nil",
              "line_type": "context",
              "old_line_no": 248,
              "new_line_no": 307
            },
            {
              "content": "\t\t\t}",
              "line_type": "context",
              "old_line_no": 249,
              "new_line_no": 308
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 250,
              "new_line_no": 309
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 251,
              "new_line_no": 310
            },
            {
              "content": "\t\treturn false, nil",
              "line_type": "context",
              "old_line_no": 252,
              "new_line_no": 311
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 253,
              "new_line_no": 312
            },
            {
              "content": "\treturn retryClient",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 313
            },
            {
              "content": "}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 314
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 254,
              "new_line_no": 315
            },
            {
              "content": "\tclient := githubpagination.NewClient(\u0026retryablehttp.RoundTripper{Client: retryClient}, githubpagination.WithPerPage(100))",
              "line_type": "deleted",
              "old_line_no": 255,
              "new_line_no": 0
            },
            {
              "content": "// setupAPIClients initializes GitHub and GitLab clients.",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 316
            },
            {
              "content": "func setupAPIClients(ctx context.Context, httpClient *retryablehttp.Client, cfg *Config) (*github.Client, *gitlab.Client, error) {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 317
            },
            {
              "content": "\t// GitHub Client",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 318
            },
            {
              "content": "\tghClient := githubpagination.NewClient(\u0026retryablehttp.RoundTripper{Client: httpClient}, githubpagination.WithPerPage(githubAPIPerPage))",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 319
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 256,
              "new_line_no": 320
            },
            {
              "content": "\tif githubDomain == defaultGithubDomain {",
              "line_type": "deleted",
              "old_line_no": 257,
              "new_line_no": 0
            },
            {
              "content": "\t\tgh = github.NewClient(client).WithAuthToken(githubToken)",
              "line_type": "deleted",
              "old_line_no": 258,
              "new_line_no": 0
            },
            {
              "content": "\tvar gh *github.Client",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 321
            },
            {
              "content": "\tvar err error",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 322
            },
            {
              "content": "\tif cfg.GithubDomain == defaultGithubDomain {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 323
            },
            {
              "content": "\t\tgh = github.NewClient(ghClient).WithAuthToken(cfg.GithubToken)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 324
            },
            {
              "content": "\t} else {",
              "line_type": "context",
              "old_line_no": 259,
              "new_line_no": 325
            },
            {
              "content": "\t\tgithubUrl := fmt.Sprintf(\"https://%s\", githubDomain)",
              "line_type": "deleted",
              "old_line_no": 260,
              "new_line_no": 0
            },
            {
              "content": "\t\tif gh, err = github.NewClient(client).WithAuthToken(githubToken).WithEnterpriseURLs(githubUrl, githubUrl); err != nil {",
              "line_type": "deleted",
              "old_line_no": 261,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tsendErr(err)",
              "line_type": "deleted",
              "old_line_no": 262,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tos.Exit(1)",
              "line_type": "deleted",
              "old_line_no": 263,
              "new_line_no": 0
            },
            {
              "content": "\t\tgithubURL := fmt.Sprintf(\"https://%s\", cfg.GithubDomain)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 326
            },
            {
              "content": "\t\tif gh, err = github.NewClient(ghClient).WithAuthToken(cfg.GithubToken).WithEnterpriseURLs(githubURL, githubURL); err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 327
            },
            {
              "content": "\t\t\treturn nil, nil, fmt.Errorf(\"failed to create GitHub enterprise client: %w\", err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 328
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 264,
              "new_line_no": 329
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 265,
              "new_line_no": 330
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 266,
              "new_line_no": 331
            },
            {
              "content": "\t// GitLab Client",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 332
            },
            {
              "content": "\tgitlabOpts := make([]gitlab.ClientOptionFunc, 0)",
              "line_type": "context",
              "old_line_no": 267,
              "new_line_no": 333
            },
            {
              "content": "\tif gitlabDomain != defaultGitlabDomain {",
              "line_type": "deleted",
              "old_line_no": 268,
              "new_line_no": 0
            },
            {
              "content": "\t\tgitlabUrl := fmt.Sprintf(\"https://%s\", gitlabDomain)",
              "line_type": "deleted",
              "old_line_no": 269,
              "new_line_no": 0
            },
            {
              "content": "\t\tgitlabOpts = append(gitlabOpts, gitlab.WithBaseURL(gitlabUrl))",
              "line_type": "deleted",
              "old_line_no": 270,
              "new_line_no": 0
            },
            {
              "content": "\tif cfg.GitlabDomain != defaultGitlabDomain {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 334
            },
            {
              "content": "\t\tgitlabURL := fmt.Sprintf(\"https://%s\", cfg.GitlabDomain)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 335
            },
            {
              "content": "\t\tgitlabOpts = append(gitlabOpts, gitlab.WithBaseURL(gitlabURL))",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 336
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 271,
              "new_line_no": 337
            },
            {
              "content": "\tif gl, err = gitlab.NewClient(gitlabToken, gitlabOpts...); err != nil {",
              "line_type": "deleted",
              "old_line_no": 272,
              "new_line_no": 0
            },
            {
              "content": "\t\tsendErr(err)",
              "line_type": "deleted",
              "old_line_no": 273,
              "new_line_no": 0
            },
            {
              "content": "\t\tos.Exit(1)",
              "line_type": "deleted",
              "old_line_no": 274,
              "new_line_no": 0
            },
            {
              "content": "\tgl, err := gitlab.NewClient(cfg.GitlabToken, gitlabOpts...)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 338
            },
            {
              "content": "\tif err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 339
            },
            {
              "content": "\t\treturn nil, nil, fmt.Errorf(\"failed to create GitLab client: %w\", err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 340
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 275,
              "new_line_no": 341
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 276,
              "new_line_no": 342
            },
            {
              "content": "\tprojects := make([]Project, 0)",
              "line_type": "deleted",
              "old_line_no": 277,
              "new_line_no": 0
            },
            {
              "content": "\tif projectsCsvPath != \"\" {",
              "line_type": "deleted",
              "old_line_no": 278,
              "new_line_no": 0
            },
            {
              "content": "\t\tdata, err := os.ReadFile(projectsCsvPath)",
              "line_type": "deleted",
              "old_line_no": 279,
              "new_line_no": 0
            },
            {
              "content": "\treturn gh, gl, nil",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 343
            },
            {
              "content": "}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 344
            },
            {
              "content": "",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 345
            },
            {
              "content": "// loadProjects reads project configurations from a CSV file or uses inline values.",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 346
            },
            {
              "content": "func loadProjects(cfg *Config) ([]ProjectConfig, error) {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 347
            },
            {
              "content": "\tprojects := make([]ProjectConfig, 0)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 348
            },
            {
              "content": "\tif cfg.ProjectsCsvPath != \"\" {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 349
            },
            {
              "content": "\t\tdata, err := os.ReadFile(cfg.ProjectsCsvPath)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 350
            },
            {
              "content": "\t\tif err != nil {",
              "line_type": "context",
              "old_line_no": 280,
              "new_line_no": 351
            },
            {
              "content": "\t\t\tsendErr(err)",
              "line_type": "deleted",
              "old_line_no": 281,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tos.Exit(1)",
              "line_type": "deleted",
              "old_line_no": 282,
              "new_line_no": 0
            },
            {
              "content": "\t\t\treturn nil, fmt.Errorf(\"failed to read projects CSV file %q: %w\", cfg.ProjectsCsvPath, err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 352
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 283,
              "new_line_no": 353
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 284,
              "new_line_no": 354
            },
            {
              "content": "\t\t// Trim a UTF-8 BOM, if present",
              "line_type": "context",
              "old_line_no": 285,
              "new_line_no": 355
            },
            {
              "content": "\t\tdata = bytes.TrimPrefix(data, []byte(\"\\xef\\xbb\\xbf\"))",
              "line_type": "context",
              "old_line_no": 286,
              "new_line_no": 356
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 287,
              "new_line_no": 357
            },
            {
              "content": "\t\tif projects, err = csv.NewReader(bytes.NewBuffer(data)).ReadAll(); err != nil {",
              "line_type": "deleted",
              "old_line_no": 288,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tsendErr(err)",
              "line_type": "deleted",
              "old_line_no": 289,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tos.Exit(1)",
              "line_type": "deleted",
              "old_line_no": 290,
              "new_line_no": 0
            },
            {
              "content": "\t\tcsvRecords, err := csv.NewReader(bytes.NewBuffer(data)).ReadAll()",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 358
            },
            {
              "content": "\t\tif err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 359
            },
            {
              "content": "\t\t\treturn nil, fmt.Errorf(\"failed to parse projects CSV: %w\", err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 360
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 291,
              "new_line_no": 361
            },
            {
              "content": "\t} else {",
              "line_type": "deleted",
              "old_line_no": 292,
              "new_line_no": 0
            },
            {
              "content": "\t\tprojects = []Project{{gitlabProject, githubRepo}}",
              "line_type": "deleted",
              "old_line_no": 293,
              "new_line_no": 0
            },
            {
              "content": "\t}",
              "line_type": "deleted",
              "old_line_no": 294,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 295,
              "new_line_no": 362
            },
            {
              "content": "\tif report {",
              "line_type": "deleted",
              "old_line_no": 296,
              "new_line_no": 0
            },
            {
              "content": "\t\tprintReport(ctx, projects)",
              "line_type": "deleted",
              "old_line_no": 297,
              "new_line_no": 0
            },
            {
              "content": "\t} else {",
              "line_type": "deleted",
              "old_line_no": 298,
              "new_line_no": 0
            },
            {
              "content": "\t\tif err = performMigration(ctx, projects); err != nil {",
              "line_type": "deleted",
              "old_line_no": 299,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tsendErr(err)",
              "line_type": "deleted",
              "old_line_no": 300,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tos.Exit(1)",
              "line_type": "deleted",
              "old_line_no": 301,
              "new_line_no": 0
            },
            {
              "content": "\t\t} else if errCount \u003e 0 {",
              "line_type": "deleted",
              "old_line_no": 302,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tlogger.Warn(fmt.Sprintf(\"encountered %d errors during migration, review log output for details\", errCount))",
              "line_type": "deleted",
              "old_line_no": 303,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tos.Exit(1)",
              "line_type": "deleted",
              "old_line_no": 304,
              "new_line_no": 0
            },
            {
              "content": "\t\tfor i, record := range csvRecords {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 363
            },
            {
              "content": "\t\t\tif len(record) \u003c 2 {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 364
            },
            {
              "content": "\t\t\t\treturn nil, fmt.Errorf(\"invalid CSV row %d: expected at least 2 columns (GitLab Path, GitHub Repo)\", i+1)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 365
            },
            {
              "content": "\t\t\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 366
            },
            {
              "content": "\t\t\tprojects = append(projects, ProjectConfig{",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 367
            },
            {
              "content": "\t\t\t\tGitlabPath: record[0],",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 368
            },
            {
              "content": "\t\t\t\tGithubRepo: record[1],",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 369
            },
            {
              "content": "\t\t\t})",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 370
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 305,
              "new_line_no": 371
            },
            {
              "content": "\t} else {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 372
            },
            {
              "content": "\t\tprojects = []ProjectConfig{{GitlabPath: cfg.GitlabProject, GithubRepo: cfg.GithubRepo}}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 373
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 306,
              "new_line_no": 374
            },
            {
              "content": "\treturn projects, nil",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 375
            },
            {
              "content": "}",
              "line_type": "context",
              "old_line_no": 307,
              "new_line_no": 376
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 308,
              "new_line_no": 377
            },
            {
              "content": "func printReport(ctx context.Context, projects []Project) {",
              "line_type": "deleted",
              "old_line_no": 309,
              "new_line_no": 0
            },
            {
              "content": "// sendErr is a helper to log an error and increment a global counter.",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 378
            },
            {
              "content": "// It's generally better to propagate errors, but this function is kept for consistency with the original.",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 379
            },
            {
              "content": "func sendErr(err error) {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 380
            },
            {
              "content": "\terrCount.Add(1)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 381
            },
            {
              "content": "\tlogger.Error(err.Error())",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 382
            },
            {
              "content": "}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 383
            },
            {
              "content": "",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 384
            },
            {
              "content": "// printReport generates and prints a report of projects and their merge request counts.",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 385
            },
            {
              "content": "func printReport(ctx context.Context, projects []ProjectConfig) {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 386
            },
            {
              "content": "\tlogger.Debug(\"building report\")",
              "line_type": "context",
              "old_line_no": 310,
              "new_line_no": 387
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 311,
              "new_line_no": 388
            },
            {
              "content": "\tresults := make([]Report, 0)",
              "line_type": "deleted",
              "old_line_no": 312,
              "new_line_no": 0
            },
            {
              "content": "\tresults := make([]Report, 0, len(projects))",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 389
            },
            {
              "content": "\tvar mu sync.Mutex // Mutex to protect results slice during concurrent writes",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 390
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 313,
              "new_line_no": 391
            },
            {
              "content": "\tfor _, proj := range projects {",
              "line_type": "deleted",
              "old_line_no": 314,
              "new_line_no": 0
            },
            {
              "content": "\t\tif err := ctx.Err(); err != nil {",
              "line_type": "deleted",
              "old_line_no": 315,
              "new_line_no": 0
            },
            {
              "content": "\t\t\treturn",
              "line_type": "deleted",
              "old_line_no": 316,
              "new_line_no": 0
            },
            {
              "content": "\t\t}",
              "line_type": "deleted",
              "old_line_no": 317,
              "new_line_no": 0
            },
            {
              "content": "\tgroup, gCtx := errgroup.WithContext(ctx)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 392
            },
            {
              "content": "\tgroup.SetLimit(defaultConcurrency) // Limit concurrency for report generation",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 393
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 318,
              "new_line_no": 394
            },
            {
              "content": "\t\tresult, err := reportProject(ctx, proj)",
              "line_type": "deleted",
              "old_line_no": 319,
              "new_line_no": 0
            },
            {
              "content": "\t\tif err != nil {",
              "line_type": "deleted",
              "old_line_no": 320,
              "new_line_no": 0
            },
            {
              "content": "\t\t\terrCount++",
              "line_type": "deleted",
              "old_line_no": 321,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tsendErr(err)",
              "line_type": "deleted",
              "old_line_no": 322,
              "new_line_no": 0
            },
            {
              "content": "\t\t}",
              "line_type": "deleted",
              "old_line_no": 323,
              "new_line_no": 0
            },
            {
              "content": "\tfor _, proj := range projects {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 395
            },
            {
              "content": "\t\tproj := proj // Capture loop variable",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 396
            },
            {
              "content": "\t\tgroup.Go(func() error {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 397
            },
            {
              "content": "\t\t\tresult, err := reportProject(gCtx, proj)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 398
            },
            {
              "content": "\t\t\tif err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 399
            },
            {
              "content": "\t\t\t\tsendErr(fmt.Errorf(\"failed to report on project %s: %w\", proj.GitlabPath, err))",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 400
            },
            {
              "content": "\t\t\t\treturn nil // Do not propagate error up to errgroup if we've already logged it",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 401
            },
            {
              "content": "\t\t\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 402
            },
            {
              "content": "\t\t\tif result != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 403
            },
            {
              "content": "\t\t\t\tmu.Lock()",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 404
            },
            {
              "content": "\t\t\t\tresults = append(results, *result)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 405
            },
            {
              "content": "\t\t\t\tmu.Unlock()",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 406
            },
            {
              "content": "\t\t\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 407
            },
            {
              "content": "\t\t\treturn nil",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 408
            },
            {
              "content": "\t\t})",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 409
            },
            {
              "content": "\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 410
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 324,
              "new_line_no": 411
            },
            {
              "content": "\t\tif result != nil {",
              "line_type": "deleted",
              "old_line_no": 325,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tresults = append(results, *result)",
              "line_type": "deleted",
              "old_line_no": 326,
              "new_line_no": 0
            },
            {
              "content": "\t\t}",
              "line_type": "deleted",
              "old_line_no": 327,
              "new_line_no": 0
            },
            {
              "content": "\tif err := group.Wait(); err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 412
            },
            {
              "content": "\t\tlogger.Error(\"error during report generation\", \"err\", err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 413
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 328,
              "new_line_no": 414
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 329,
              "new_line_no": 415
            },
            {
              "content": "\tfmt.Println()",
              "line_type": "context",
              "old_line_no": 330,
              "new_line_no": 416
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 331,
              "new_line_no": 0
            },
            {
              "content": "\ttotalMergeRequests := 0",
              "line_type": "context",
              "old_line_no": 332,
              "new_line_no": 417
            },
            {
              "content": "\tfor _, result := range results {",
              "line_type": "context",
              "old_line_no": 333,
              "new_line_no": 418
            },
            {
              "content": "\t\ttotalMergeRequests += result.MergeRequestsCount",
              "line_type": "context",
              "old_line_no": 334,
              "new_line_no": 419
            },
            {
              "content": "\t\tfmt.Printf(\"%#v\\n\", result)",
              "line_type": "deleted",
              "old_line_no": 335,
              "new_line_no": 0
            },
            {
              "content": "\t\tfmt.Printf(\"%+v\\n\", result) // Use %+v for detailed struct output",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 420
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 336,
              "new_line_no": 421
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 337,
              "new_line_no": 0
            },
            {
              "content": "\tfmt.Println()",
              "line_type": "context",
              "old_line_no": 338,
              "new_line_no": 422
            },
            {
              "content": "\tfmt.Printf(\"Total merge requests: %d\\n\", totalMergeRequests)",
              "line_type": "context",
              "old_line_no": 339,
              "new_line_no": 423
            },
            {
              "content": "\tfmt.Println()",
              "line_type": "context",
              "old_line_no": 340,
              "new_line_no": 424
            },
            {
              "content": "}",
              "line_type": "context",
              "old_line_no": 341,
              "new_line_no": 425
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 342,
              "new_line_no": 426
            },
            {
              "content": "func reportProject(ctx context.Context, proj []string) (*Report, error) {",
              "line_type": "deleted",
              "old_line_no": 343,
              "new_line_no": 0
            },
            {
              "content": "\tgitlabPath := strings.Split(proj[0], \"/\")",
              "line_type": "deleted",
              "old_line_no": 344,
              "new_line_no": 0
            },
            {
              "content": "\t//githubPath := strings.Split(proj[1], \"/\")",
              "line_type": "deleted",
              "old_line_no": 345,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 346,
              "new_line_no": 0
            },
            {
              "content": "\tlogger.Debug(\"searching for GitLab project\", \"name\", gitlabPath[1], \"group\", gitlabPath[0])",
              "line_type": "deleted",
              "old_line_no": 347,
              "new_line_no": 0
            },
            {
              "content": "\tsearchTerm := gitlabPath[1]",
              "line_type": "deleted",
              "old_line_no": 348,
              "new_line_no": 0
            },
            {
              "content": "\tprojectResult, _, err := gl.Projects.ListProjects(\u0026gitlab.ListProjectsOptions{Search: \u0026searchTerm})",
              "line_type": "deleted",
              "old_line_no": 349,
              "new_line_no": 0
            },
            {
              "content": "\tif err != nil {",
              "line_type": "deleted",
              "old_line_no": 350,
              "new_line_no": 0
            },
            {
              "content": "\t\treturn nil, fmt.Errorf(\"listing projects: %v\", err)",
              "line_type": "deleted",
              "old_line_no": 351,
              "new_line_no": 0
            },
            {
              "content": "\t}",
              "line_type": "deleted",
              "old_line_no": 352,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 353,
              "new_line_no": 0
            },
            {
              "content": "\tvar project *gitlab.Project",
              "line_type": "deleted",
              "old_line_no": 354,
              "new_line_no": 0
            },
            {
              "content": "\tfor _, item := range projectResult {",
              "line_type": "deleted",
              "old_line_no": 355,
              "new_line_no": 0
            },
            {
              "content": "\t\tif item == nil {",
              "line_type": "deleted",
              "old_line_no": 356,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tcontinue",
              "line_type": "deleted",
              "old_line_no": 357,
              "new_line_no": 0
            },
            {
              "content": "\t\t}",
              "line_type": "deleted",
              "old_line_no": 358,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 359,
              "new_line_no": 0
            },
            {
              "content": "\t\tif item.PathWithNamespace == proj[0] {",
              "line_type": "deleted",
              "old_line_no": 360,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tlogger.Debug(\"found GitLab project\", \"name\", gitlabPath[1], \"group\", gitlabPath[0], \"project_id\", item.ID)",
              "line_type": "deleted",
              "old_line_no": 361,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tproject = item",
              "line_type": "deleted",
              "old_line_no": 362,
              "new_line_no": 0
            },
            {
              "content": "\t\t}",
              "line_type": "deleted",
              "old_line_no": 363,
              "new_line_no": 0
            },
            {
              "content": "\t}",
              "line_type": "deleted",
              "old_line_no": 364,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 365,
              "new_line_no": 0
            },
            {
              "content": "\tif project == nil {",
              "line_type": "deleted",
              "old_line_no": 366,
              "new_line_no": 0
            },
            {
              "content": "\t\treturn nil, fmt.Errorf(\"no matching GitLab project found: %s\", proj[0])",
              "line_type": "deleted",
              "old_line_no": 367,
              "new_line_no": 0
            },
            {
              "content": "// reportProject retrieves and counts merge requests for a single GitLab project.",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 427
            },
            {
              "content": "func reportProject(ctx context.Context, proj ProjectConfig) (*Report, error) {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 428
            },
            {
              "content": "\tgitlabPathParts := strings.Split(proj.GitlabPath, \"/\")",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 429
            },
            {
              "content": "\tif len(gitlabPathParts) \u003c 2 {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 430
            },
            {
              "content": "\t\treturn nil, fmt.Errorf(\"invalid GitLab project path format: %s. Expected 'group/project'\", proj.GitlabPath)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 431
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 368,
              "new_line_no": 432
            },
            {
              "content": "\tgroupName := gitlabPathParts[0]",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 433
            },
            {
              "content": "\tprojectName := gitlabPathParts[1]",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 434
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 369,
              "new_line_no": 435
            },
            {
              "content": "\tvar mergeRequests []*gitlab.MergeRequest",
              "line_type": "deleted",
              "old_line_no": 370,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 371,
              "new_line_no": 0
            },
            {
              "content": "\topts := \u0026gitlab.ListProjectMergeRequestsOptions{",
              "line_type": "deleted",
              "old_line_no": 372,
              "new_line_no": 0
            },
            {
              "content": "\t\tOrderBy: pointer(\"created_at\"),",
              "line_type": "deleted",
              "old_line_no": 373,
              "new_line_no": 0
            },
            {
              "content": "\t\tSort:    pointer(\"asc\"),",
              "line_type": "deleted",
              "old_line_no": 374,
              "new_line_no": 0
            },
            {
              "content": "\tproject, err := findGitlabProject(ctx, gl, proj.GitlabPath)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 436
            },
            {
              "content": "\tif err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 437
            },
            {
              "content": "\t\treturn nil, fmt.Errorf(\"failed to find GitLab project %s: %w\", proj.GitlabPath, err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 438
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 375,
              "new_line_no": 439
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 376,
              "new_line_no": 440
            },
            {
              "content": "\tlogger.Debug(\"retrieving GitLab merge requests\", \"name\", gitlabPath[1], \"group\", gitlabPath[0], \"project_id\", project.ID)",
              "line_type": "deleted",
              "old_line_no": 377,
              "new_line_no": 0
            },
            {
              "content": "\tfor {",
              "line_type": "deleted",
              "old_line_no": 378,
              "new_line_no": 0
            },
            {
              "content": "\t\tresult, resp, err := gl.MergeRequests.ListProjectMergeRequests(project.ID, opts)",
              "line_type": "deleted",
              "old_line_no": 379,
              "new_line_no": 0
            },
            {
              "content": "\t\tif err != nil {",
              "line_type": "deleted",
              "old_line_no": 380,
              "new_line_no": 0
            },
            {
              "content": "\t\t\treturn nil, fmt.Errorf(\"retrieving gitlab merge requests: %v\", err)",
              "line_type": "deleted",
              "old_line_no": 381,
              "new_line_no": 0
            },
            {
              "content": "\t\t}",
              "line_type": "deleted",
              "old_line_no": 382,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 383,
              "new_line_no": 0
            },
            {
              "content": "\t\tmergeRequests = append(mergeRequests, result...)",
              "line_type": "deleted",
              "old_line_no": 384,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 385,
              "new_line_no": 0
            },
            {
              "content": "\t\tif resp.NextPage == 0 {",
              "line_type": "deleted",
              "old_line_no": 386,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tbreak",
              "line_type": "deleted",
              "old_line_no": 387,
              "new_line_no": 0
            },
            {
              "content": "\t\t}",
              "line_type": "deleted",
              "old_line_no": 388,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 389,
              "new_line_no": 0
            },
            {
              "content": "\t\topts.Page = resp.NextPage",
              "line_type": "deleted",
              "old_line_no": 390,
              "new_line_no": 0
            },
            {
              "content": "\tmergeRequests, err := listGitlabMergeRequests(ctx, gl, project.ID)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 441
            },
            {
              "content": "\tif err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 442
            },
            {
              "content": "\t\treturn nil, fmt.Errorf(\"failed to retrieve GitLab merge requests for project %s: %w\", proj.GitlabPath, err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 443
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 391,
              "new_line_no": 444
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 392,
              "new_line_no": 445
            },
            {
              "content": "\treturn \u0026Report{",
              "line_type": "context",
              "old_line_no": 393,
              "new_line_no": 446
            },
            {
              "content": "\t\tGroupName:          gitlabPath[0],",
              "line_type": "deleted",
              "old_line_no": 394,
              "new_line_no": 0
            },
            {
              "content": "\t\tProjectName:        gitlabPath[1],",
              "line_type": "deleted",
              "old_line_no": 395,
              "new_line_no": 0
            },
            {
              "content": "\t\tGroupName:          groupName,",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 447
            },
            {
              "content": "\t\tProjectName:        projectName,",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 448
            },
            {
              "content": "\t\tMergeRequestsCount: len(mergeRequests),",
              "line_type": "context",
              "old_line_no": 396,
              "new_line_no": 449
            },
            {
              "content": "\t}, nil",
              "line_type": "context",
              "old_line_no": 397,
              "new_line_no": 450
            },
            {
              "content": "}",
              "line_type": "context",
              "old_line_no": 398,
              "new_line_no": 451
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 399,
              "new_line_no": 452
            },
            {
              "content": "func performMigration(ctx context.Context, projects []Project) error {",
              "line_type": "deleted",
              "old_line_no": 400,
              "new_line_no": 0
            },
            {
              "content": "\tconcurrency := maxConcurrency",
              "line_type": "deleted",
              "old_line_no": 401,
              "new_line_no": 0
            },
            {
              "content": "\tif len(projects) \u003c maxConcurrency {",
              "line_type": "deleted",
              "old_line_no": 402,
              "new_line_no": 0
            },
            {
              "content": "// performMigration orchestrates the migration of multiple projects concurrently.",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 453
            },
            {
              "content": "func performMigration(ctx context.Context, cfg *Config, projects []ProjectConfig) error {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 454
            },
            {
              "content": "\tconcurrency := cfg.MaxConcurrency",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 455
            },
            {
              "content": "\tif len(projects) \u003c cfg.MaxConcurrency {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 456
            },
            {
              "content": "\t\tconcurrency = len(projects)",
              "line_type": "context",
              "old_line_no": 403,
              "new_line_no": 457
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 404,
              "new_line_no": 458
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 405,
              "new_line_no": 459
            },
            {
              "content": "\tlogger.Info(fmt.Sprintf(\"processing %d project(s) with %d workers\", len(projects), concurrency))",
              "line_type": "context",
              "old_line_no": 406,
              "new_line_no": 460
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 407,
              "new_line_no": 461
            },
            {
              "content": "\tvar wg sync.WaitGroup",
              "line_type": "deleted",
              "old_line_no": 408,
              "new_line_no": 0
            },
            {
              "content": "\tqueue := make(chan Project, concurrency*2)",
              "line_type": "deleted",
              "old_line_no": 409,
              "new_line_no": 0
            },
            {
              "content": "\tgroup, gCtx := errgroup.WithContext(ctx)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 462
            },
            {
              "content": "\tgroup.SetLimit(concurrency)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 463
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 410,
              "new_line_no": 464
            },
            {
              "content": "\tfor i := 0; i \u003c concurrency; i++ {",
              "line_type": "deleted",
              "old_line_no": 411,
              "new_line_no": 0
            },
            {
              "content": "\t\twg.Add(1)",
              "line_type": "deleted",
              "old_line_no": 412,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 413,
              "new_line_no": 0
            },
            {
              "content": "\t\tgo func() {",
              "line_type": "deleted",
              "old_line_no": 414,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tdefer wg.Done()",
              "line_type": "deleted",
              "old_line_no": 415,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 416,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tfor proj := range queue {",
              "line_type": "deleted",
              "old_line_no": 417,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tif err := ctx.Err(); err != nil {",
              "line_type": "deleted",
              "old_line_no": 418,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tbreak",
              "line_type": "deleted",
              "old_line_no": 419,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 420,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 421,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tif err := migrateProject(ctx, proj); err != nil {",
              "line_type": "deleted",
              "old_line_no": 422,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\terrCount++",
              "line_type": "deleted",
              "old_line_no": 423,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tsendErr(err)",
              "line_type": "deleted",
              "old_line_no": 424,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 425,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 426,
              "new_line_no": 0
            },
            {
              "content": "\t\t}()",
              "line_type": "deleted",
              "old_line_no": 427,
              "new_line_no": 0
            },
            {
              "content": "\t}",
              "line_type": "deleted",
              "old_line_no": 428,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 429,
              "new_line_no": 0
            },
            {
              "content": "\tqueueProjects := func() {",
              "line_type": "deleted",
              "old_line_no": 430,
              "new_line_no": 0
            },
            {
              "content": "\tmigrateProjectsFunc := func() {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 465
            },
            {
              "content": "\t\tfor _, proj := range projects {",
              "line_type": "context",
              "old_line_no": 431,
              "new_line_no": 466
            },
            {
              "content": "\t\t\tif err := ctx.Err(); err != nil {",
              "line_type": "deleted",
              "old_line_no": 432,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tbreak",
              "line_type": "deleted",
              "old_line_no": 433,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 434,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 435,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tqueue \u003c- proj",
              "line_type": "deleted",
              "old_line_no": 436,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tproj := proj // Capture loop variable",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 467
            },
            {
              "content": "\t\t\tgroup.Go(func() error {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 468
            },
            {
              "content": "\t\t\t\tif err := migrateProject(gCtx, cfg, proj); err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 469
            },
            {
              "content": "\t\t\t\t\tsendErr(fmt.Errorf(\"failed to migrate project %s: %w\", proj.GitlabPath, err))",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 470
            },
            {
              "content": "\t\t\t\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 471
            },
            {
              "content": "\t\t\t\treturn nil // Always return nil here to let errgroup continue on other goroutines. Errors are handled by sendErr.",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 472
            },
            {
              "content": "\t\t\t})",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 473
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 437,
              "new_line_no": 474
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 438,
              "new_line_no": 475
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 439,
              "new_line_no": 476
            },
            {
              "content": "\tif loop {",
              "line_type": "deleted",
              "old_line_no": 440,
              "new_line_no": 0
            },
            {
              "content": "\t\tlogger.Info(fmt.Sprintf(\"looping migration until canceled\"))",
              "line_type": "deleted",
              "old_line_no": 441,
              "new_line_no": 0
            },
            {
              "content": "\tif cfg.Loop {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 477
            },
            {
              "content": "\t\tlogger.Info(\"looping migration until canceled\")",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 478
            },
            {
              "content": "\t\tfor {",
              "line_type": "context",
              "old_line_no": 442,
              "new_line_no": 479
            },
            {
              "content": "\t\t\tif err := ctx.Err(); err != nil {",
              "line_type": "deleted",
              "old_line_no": 443,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tbreak",
              "line_type": "deleted",
              "old_line_no": 444,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tselect {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 480
            },
            {
              "content": "\t\t\tcase \u003c-ctx.Done():",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 481
            },
            {
              "content": "\t\t\t\tlogger.Info(\"migration loop canceled\")",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 482
            },
            {
              "content": "\t\t\t\treturn ctx.Err()",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 483
            },
            {
              "content": "\t\t\tdefault:",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 484
            },
            {
              "content": "\t\t\t\tmigrateProjectsFunc()",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 485
            },
            {
              "content": "\t\t\t\t// Wait for all current migrations in the loop to finish before potentially restarting",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 486
            },
            {
              "content": "\t\t\t\tif err := group.Wait(); err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 487
            },
            {
              "content": "\t\t\t\t\tlogger.Error(\"error during a migration loop iteration\", \"err\", err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 488
            },
            {
              "content": "\t\t\t\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 489
            },
            {
              "content": "\t\t\t\t// Re-initialize errgroup for the next iteration of the loop",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 490
            },
            {
              "content": "\t\t\t\tgroup, gCtx = errgroup.WithContext(ctx)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 491
            },
            {
              "content": "\t\t\t\tgroup.SetLimit(concurrency)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 492
            },
            {
              "content": "\t\t\t\t// Small delay to prevent busy-looping if all migrations complete very quickly",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 493
            },
            {
              "content": "\t\t\t\ttime.Sleep(5 * time.Second)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 494
            },
            {
              "content": "\t\t\t}",
              "line_type": "context",
              "old_line_no": 445,
              "new_line_no": 495
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 446,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tqueueProjects()",
              "line_type": "deleted",
              "old_line_no": 447,
              "new_line_no": 0
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 448,
              "new_line_no": 496
            },
            {
              "content": "\t} else {",
              "line_type": "context",
              "old_line_no": 449,
              "new_line_no": 497
            },
            {
              "content": "\t\tqueueProjects()",
              "line_type": "deleted",
              "old_line_no": 450,
              "new_line_no": 0
            },
            {
              "content": "\t\tclose(queue)",
              "line_type": "deleted",
              "old_line_no": 451,
              "new_line_no": 0
            },
            {
              "content": "\t\tmigrateProjectsFunc()",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 498
            },
            {
              "content": "\t\tif err := group.Wait(); err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 499
            },
            {
              "content": "\t\t\treturn fmt.Errorf(\"one or more project migrations failed: %w\", err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 500
            },
            {
              "content": "\t\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 501
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 452,
              "new_line_no": 502
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 453,
              "new_line_no": 503
            },
            {
              "content": "\twg.Wait()",
              "line_type": "deleted",
              "old_line_no": 454,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 455,
              "new_line_no": 0
            },
            {
              "content": "\treturn nil",
              "line_type": "context",
              "old_line_no": 456,
              "new_line_no": 504
            },
            {
              "content": "}",
              "line_type": "context",
              "old_line_no": 457,
              "new_line_no": 505
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 458,
              "new_line_no": 506
            },
            {
              "content": "func migrateProject(ctx context.Context, proj []string) error {",
              "line_type": "deleted",
              "old_line_no": 459,
              "new_line_no": 0
            },
            {
              "content": "\tgitlabPath := strings.Split(proj[0], \"/\")",
              "line_type": "deleted",
              "old_line_no": 460,
              "new_line_no": 0
            },
            {
              "content": "\tgithubPath := strings.Split(proj[1], \"/\")",
              "line_type": "deleted",
              "old_line_no": 461,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 462,
              "new_line_no": 0
            },
            {
              "content": "\tlogger.Info(\"searching for GitLab project\", \"name\", gitlabPath[1], \"group\", gitlabPath[0])",
              "line_type": "deleted",
              "old_line_no": 463,
              "new_line_no": 0
            },
            {
              "content": "\tsearchTerm := gitlabPath[1]",
              "line_type": "deleted",
              "old_line_no": 464,
              "new_line_no": 0
            },
            {
              "content": "\tprojectResult, _, err := gl.Projects.ListProjects(\u0026gitlab.ListProjectsOptions{Search: \u0026searchTerm})",
              "line_type": "deleted",
              "old_line_no": 465,
              "new_line_no": 0
            },
            {
              "content": "\tif err != nil {",
              "line_type": "deleted",
              "old_line_no": 466,
              "new_line_no": 0
            },
            {
              "content": "\t\treturn fmt.Errorf(\"listing projects: %v\", err)",
              "line_type": "deleted",
              "old_line_no": 467,
              "new_line_no": 0
            },
            {
              "content": "// migrateProject handles the end-to-end migration of a single project.",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 507
            },
            {
              "content": "func migrateProject(ctx context.Context, cfg *Config, proj ProjectConfig) error {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 508
            },
            {
              "content": "\tgitlabPathParts := strings.Split(proj.GitlabPath, \"/\")",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 509
            },
            {
              "content": "\tif len(gitlabPathParts) \u003c 2 {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 510
            },
            {
              "content": "\t\treturn fmt.Errorf(\"invalid GitLab project path format: %s. Expected 'group/project'\", proj.GitlabPath)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 511
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 468,
              "new_line_no": 512
            },
            {
              "content": "\tgitlabGroupName := gitlabPathParts[0]",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 513
            },
            {
              "content": "\tgitlabProjectName := gitlabPathParts[1]",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 514
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 469,
              "new_line_no": 515
            },
            {
              "content": "\tvar project *gitlab.Project",
              "line_type": "deleted",
              "old_line_no": 470,
              "new_line_no": 0
            },
            {
              "content": "\tfor _, item := range projectResult {",
              "line_type": "deleted",
              "old_line_no": 471,
              "new_line_no": 0
            },
            {
              "content": "\t\tif item == nil {",
              "line_type": "deleted",
              "old_line_no": 472,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tcontinue",
              "line_type": "deleted",
              "old_line_no": 473,
              "new_line_no": 0
            },
            {
              "content": "\t\t}",
              "line_type": "deleted",
              "old_line_no": 474,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 475,
              "new_line_no": 0
            },
            {
              "content": "\t\tif item.PathWithNamespace == proj[0] {",
              "line_type": "deleted",
              "old_line_no": 476,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tlogger.Debug(\"found GitLab project\", \"name\", gitlabPath[1], \"group\", gitlabPath[0], \"project_id\", item.ID)",
              "line_type": "deleted",
              "old_line_no": 477,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tproject = item",
              "line_type": "deleted",
              "old_line_no": 478,
              "new_line_no": 0
            },
            {
              "content": "\t\t}",
              "line_type": "deleted",
              "old_line_no": 479,
              "new_line_no": 0
            },
            {
              "content": "\tgithubPathParts := strings.Split(proj.GithubRepo, \"/\")",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 516
            },
            {
              "content": "\tif len(githubPathParts) \u003c 2 {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 517
            },
            {
              "content": "\t\treturn fmt.Errorf(\"invalid GitHub repository path format: %s. Expected 'owner/repo'\", proj.GithubRepo)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 518
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 480,
              "new_line_no": 519
            },
            {
              "content": "\tgithubOwner := githubPathParts[0]",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 520
            },
            {
              "content": "\tgithubRepoName := githubPathParts[1]",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 521
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 481,
              "new_line_no": 522
            },
            {
              "content": "\tif project == nil {",
              "line_type": "deleted",
              "old_line_no": 482,
              "new_line_no": 0
            },
            {
              "content": "\t\treturn fmt.Errorf(\"no matching GitLab project found: %s\", proj[0])",
              "line_type": "deleted",
              "old_line_no": 483,
              "new_line_no": 0
            },
            {
              "content": "\tlogger.Info(\"searching for GitLab project\", \"name\", gitlabProjectName, \"group\", gitlabGroupName)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 523
            },
            {
              "content": "\tproject, err := findGitlabProject(ctx, gl, proj.GitlabPath)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 524
            },
            {
              "content": "\tif err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 525
            },
            {
              "content": "\t\treturn fmt.Errorf(\"failed to find GitLab project %s: %w\", proj.GitlabPath, err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 526
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 484,
              "new_line_no": 527
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 485,
              "new_line_no": 528
            },
            {
              "content": "\tcloneUrl, err := url.Parse(project.HTTPURLToRepo)",
              "line_type": "deleted",
              "old_line_no": 486,
              "new_line_no": 0
            },
            {
              "content": "\tcloneURL, err := url.Parse(project.HTTPURLToRepo)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 529
            },
            {
              "content": "\tif err != nil {",
              "line_type": "context",
              "old_line_no": 487,
              "new_line_no": 530
            },
            {
              "content": "\t\treturn fmt.Errorf(\"parsing clone URL: %v\", err)",
              "line_type": "deleted",
              "old_line_no": 488,
              "new_line_no": 0
            },
            {
              "content": "\t\treturn fmt.Errorf(\"parsing clone URL %q: %w\", project.HTTPURLToRepo, err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 531
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 489,
              "new_line_no": 532
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 490,
              "new_line_no": 533
            },
            {
              "content": "\tlogger.Info(\"mirroring repository from GitLab to GitHub\", \"name\", gitlabPath[1], \"group\", gitlabPath[0], \"github_org\", githubPath[0], \"github_repo\", githubPath[1])",
              "line_type": "deleted",
              "old_line_no": 491,
              "new_line_no": 0
            },
            {
              "content": "\tlogger.Info(\"mirroring repository from GitLab to GitHub\",",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 534
            },
            {
              "content": "\t\t\"gitlab_group\", gitlabGroupName, \"gitlab_project\", gitlabProjectName,",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 535
            },
            {
              "content": "\t\t\"github_owner\", githubOwner, \"github_repo\", githubRepoName)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 536
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 492,
              "new_line_no": 537
            },
            {
              "content": "\tuser, err := getGithubUser(ctx, githubPath[0])",
              "line_type": "deleted",
              "old_line_no": 493,
              "new_line_no": 0
            },
            {
              "content": "\tuser, err := getGithubUser(ctx, githubOwner)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 538
            },
            {
              "content": "\tif err != nil {",
              "line_type": "context",
              "old_line_no": 494,
              "new_line_no": 539
            },
            {
              "content": "\t\treturn fmt.Errorf(\"retrieving github user: %v\", err)",
              "line_type": "deleted",
              "old_line_no": 495,
              "new_line_no": 0
            },
            {
              "content": "\t\treturn fmt.Errorf(\"retrieving GitHub user %q: %w\", githubOwner, err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 540
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 496,
              "new_line_no": 541
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 497,
              "new_line_no": 542
            },
            {
              "content": "\tvar org string",
              "line_type": "deleted",
              "old_line_no": 498,
              "new_line_no": 0
            },
            {
              "content": "\tif strings.EqualFold(*user.Type, \"organization\") {",
              "line_type": "deleted",
              "old_line_no": 499,
              "new_line_no": 0
            },
            {
              "content": "\t\torg = githubPath[0]",
              "line_type": "deleted",
              "old_line_no": 500,
              "new_line_no": 0
            },
            {
              "content": "\t} else if !strings.EqualFold(*user.Type, \"user\") || !strings.EqualFold(*user.Login, githubPath[0]) {",
              "line_type": "deleted",
              "old_line_no": 501,
              "new_line_no": 0
            },
            {
              "content": "\t\treturn fmt.Errorf(\"configured owner is neither an organization nor the current user: %s\", githubPath[0])",
              "line_type": "deleted",
              "old_line_no": 502,
              "new_line_no": 0
            },
            {
              "content": "\tvar githubOrg string",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 543
            },
            {
              "content": "\tif strings.EqualFold(*user.Type, \"Organization\") {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 544
            },
            {
              "content": "\t\tgithubOrg = githubOwner",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 545
            },
            {
              "content": "\t} else if !strings.EqualFold(*user.Type, \"User\") || !strings.EqualFold(*user.Login, githubOwner) {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 546
            },
            {
              "content": "\t\treturn fmt.Errorf(\"configured GitHub owner %q is neither an organization nor the authenticated user\", githubOwner)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 547
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 503,
              "new_line_no": 548
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 504,
              "new_line_no": 549
            },
            {
              "content": "\tlogger.Debug(\"checking for existing repository on GitHub\", \"owner\", githubPath[0], \"repo\", githubPath[1])",
              "line_type": "deleted",
              "old_line_no": 505,
              "new_line_no": 0
            },
            {
              "content": "\t_, _, err = gh.Repositories.Get(ctx, githubPath[0], githubPath[1])",
              "line_type": "deleted",
              "old_line_no": 506,
              "new_line_no": 0
            },
            {
              "content": "\t// Check for existing GitHub repository",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 550
            },
            {
              "content": "\tlogger.Debug(\"checking for existing repository on GitHub\", \"owner\", githubOwner, \"repo\", githubRepoName)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 551
            },
            {
              "content": "\t_, _, err = gh.Repositories.Get(ctx, githubOwner, githubRepoName)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 552
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 507,
              "new_line_no": 553
            },
            {
              "content": "\tvar githubError *github.ErrorResponse",
              "line_type": "context",
              "old_line_no": 508,
              "new_line_no": 554
            },
            {
              "content": "\tif err != nil \u0026\u0026 (!errors.As(err, \u0026githubError) || githubError == nil || githubError.Response == nil || githubError.Response.StatusCode != http.StatusNotFound) {",
              "line_type": "deleted",
              "old_line_no": 509,
              "new_line_no": 0
            },
            {
              "content": "\t\treturn fmt.Errorf(\"retrieving github repo: %v\", err)",
              "line_type": "deleted",
              "old_line_no": 510,
              "new_line_no": 0
            },
            {
              "content": "\t}",
              "line_type": "deleted",
              "old_line_no": 511,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 512,
              "new_line_no": 0
            },
            {
              "content": "\tvar createRepo, repoDeleted bool",
              "line_type": "deleted",
              "old_line_no": 513,
              "new_line_no": 0
            },
            {
              "content": "\trepoExists := true",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 555
            },
            {
              "content": "\tif err != nil {",
              "line_type": "context",
              "old_line_no": 514,
              "new_line_no": 556
            },
            {
              "content": "\t\tcreateRepo = true",
              "line_type": "deleted",
              "old_line_no": 515,
              "new_line_no": 0
            },
            {
              "content": "\t} else if deleteExistingRepos {",
              "line_type": "deleted",
              "old_line_no": 516,
              "new_line_no": 0
            },
            {
              "content": "\t\tlogger.Warn(\"existing repository was found on GitHub, proceeding to delete\", \"owner\", githubPath[0], \"repo\", githubPath[1])",
              "line_type": "deleted",
              "old_line_no": 517,
              "new_line_no": 0
            },
            {
              "content": "\t\tif _, err = gh.Repositories.Delete(ctx, githubPath[0], githubPath[1]); err != nil {",
              "line_type": "deleted",
              "old_line_no": 518,
              "new_line_no": 0
            },
            {
              "content": "\t\t\treturn fmt.Errorf(\"deleting existing github repo: %v\", err)",
              "line_type": "deleted",
              "old_line_no": 519,
              "new_line_no": 0
            },
            {
              "content": "\t\tif errors.As(err, \u0026githubError) \u0026\u0026 githubError != nil \u0026\u0026 githubError.Response != nil \u0026\u0026 githubError.Response.StatusCode == http.StatusNotFound {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 557
            },
            {
              "content": "\t\t\trepoExists = false",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 558
            },
            {
              "content": "\t\t} else {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 559
            },
            {
              "content": "\t\t\treturn fmt.Errorf(\"retrieving GitHub repo %s/%s: %w\", githubOwner, githubRepoName, err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 560
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 520,
              "new_line_no": 561
            },
            {
              "content": "\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 562
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 521,
              "new_line_no": 563
            },
            {
              "content": "\t\tcreateRepo = true",
              "line_type": "deleted",
              "old_line_no": 522,
              "new_line_no": 0
            },
            {
              "content": "\tshouldCreateRepo := false",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 564
            },
            {
              "content": "\trepoDeleted := false",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 565
            },
            {
              "content": "\tif !repoExists {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 566
            },
            {
              "content": "\t\tshouldCreateRepo = true",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 567
            },
            {
              "content": "\t} else if cfg.DeleteExistingRepos {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 568
            },
            {
              "content": "\t\tlogger.Warn(\"existing repository found on GitHub, proceeding to delete\", \"owner\", githubOwner, \"repo\", githubRepoName)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 569
            },
            {
              "content": "\t\tif _, err = gh.Repositories.Delete(ctx, githubOwner, githubRepoName); err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 570
            },
            {
              "content": "\t\t\treturn fmt.Errorf(\"deleting existing GitHub repo %s/%s: %w\", githubOwner, githubRepoName, err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 571
            },
            {
              "content": "\t\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 572
            },
            {
              "content": "\t\tshouldCreateRepo = true",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 573
            },
            {
              "content": "\t\trepoDeleted = true",
              "line_type": "context",
              "old_line_no": 523,
              "new_line_no": 574
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 524,
              "new_line_no": 575
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 525,
              "new_line_no": 576
            },
            {
              "content": "\tdefaultBranch := \"main\"",
              "line_type": "context",
              "old_line_no": 526,
              "new_line_no": 577
            },
            {
              "content": "\tif !renameMasterToMain \u0026\u0026 project.DefaultBranch != \"\" {",
              "line_type": "deleted",
              "old_line_no": 527,
              "new_line_no": 0
            },
            {
              "content": "\tif !cfg.RenameMasterToMain \u0026\u0026 project.DefaultBranch != \"\" {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 578
            },
            {
              "content": "\t\tdefaultBranch = project.DefaultBranch",
              "line_type": "context",
              "old_line_no": 528,
              "new_line_no": 579
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 529,
              "new_line_no": 580
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 530,
              "new_line_no": 581
            },
            {
              "content": "\thomepage := fmt.Sprintf(\"https://%s/%s/%s\", gitlabDomain, gitlabPath[0], gitlabPath[1])",
              "line_type": "deleted",
              "old_line_no": 531,
              "new_line_no": 0
            },
            {
              "content": "\thomepage := fmt.Sprintf(\"https://%s/%s/%s\", cfg.GitlabDomain, gitlabGroupName, gitlabProjectName)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 582
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 532,
              "new_line_no": 583
            },
            {
              "content": "\tif createRepo {",
              "line_type": "deleted",
              "old_line_no": 533,
              "new_line_no": 0
            },
            {
              "content": "\tif shouldCreateRepo {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 584
            },
            {
              "content": "\t\tif repoDeleted {",
              "line_type": "context",
              "old_line_no": 534,
              "new_line_no": 585
            },
            {
              "content": "\t\t\tlogger.Warn(\"recreating GitHub repository\", \"owner\", githubPath[0], \"repo\", githubPath[1])",
              "line_type": "deleted",
              "old_line_no": 535,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tlogger.Warn(\"recreating GitHub repository\", \"owner\", githubOwner, \"repo\", githubRepoName)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 586
            },
            {
              "content": "\t\t} else {",
              "line_type": "context",
              "old_line_no": 536,
              "new_line_no": 587
            },
            {
              "content": "\t\t\tlogger.Debug(\"repository not found on GitHub, proceeding to create\", \"owner\", githubPath[0], \"repo\", githubPath[1])",
              "line_type": "deleted",
              "old_line_no": 537,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tlogger.Debug(\"repository not found on GitHub, proceeding to create\", \"owner\", githubOwner, \"repo\", githubRepoName)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 588
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 538,
              "new_line_no": 589
            },
            {
              "content": "\t\tnewRepo := github.Repository{",
              "line_type": "context",
              "old_line_no": 539,
              "new_line_no": 590
            },
            {
              "content": "\t\t\tName:          pointer(githubPath[1]),",
              "line_type": "deleted",
              "old_line_no": 540,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tName:          pointer(githubRepoName),",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 591
            },
            {
              "content": "\t\t\tDescription:   \u0026project.Description,",
              "line_type": "context",
              "old_line_no": 541,
              "new_line_no": 592
            },
            {
              "content": "\t\t\tHomepage:      \u0026homepage,",
              "line_type": "context",
              "old_line_no": 542,
              "new_line_no": 593
            },
            {
              "content": "\t\t\tDefaultBranch: \u0026defaultBranch,",
              "line_type": "context",
              "old_line_no": 543,
              "new_line_no": 594
            },
            {
              "content": "\t\t\tPrivate:       pointer(true),",
              "line_type": "deleted",
              "old_line_no": 544,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tPrivate:       pointer(true), // Assuming private by default",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 595
            },
            {
              "content": "\t\t\tHasIssues:     pointer(true),",
              "line_type": "context",
              "old_line_no": 545,
              "new_line_no": 596
            },
            {
              "content": "\t\t\tHasProjects:   pointer(true),",
              "line_type": "context",
              "old_line_no": 546,
              "new_line_no": 597
            },
            {
              "content": "\t\t\tHasWiki:       pointer(true),",
              "line_type": "context",
              "old_line_no": 547,
              "new_line_no": 598
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 548,
              "new_line_no": 599
            },
            {
              "content": "\t\tif _, _, err = gh.Repositories.Create(ctx, org, \u0026newRepo); err != nil {",
              "line_type": "deleted",
              "old_line_no": 549,
              "new_line_no": 0
            },
            {
              "content": "\t\t\treturn fmt.Errorf(\"creating github repo: %v\", err)",
              "line_type": "deleted",
              "old_line_no": 550,
              "new_line_no": 0
            },
            {
              "content": "\t\tif _, _, err = gh.Repositories.Create(ctx, githubOrg, \u0026newRepo); err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 600
            },
            {
              "content": "\t\t\treturn fmt.Errorf(\"creating GitHub repo %s/%s: %w\", githubOwner, githubRepoName, err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 601
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 551,
              "new_line_no": 602
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 552,
              "new_line_no": 603
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 553,
              "new_line_no": 604
            },
            {
              "content": "\tlogger.Debug(\"updating repository settings\", \"owner\", githubPath[0], \"repo\", githubPath[1])",
              "line_type": "deleted",
              "old_line_no": 554,
              "new_line_no": 0
            },
            {
              "content": "\tlogger.Debug(\"updating repository settings\", \"owner\", githubOwner, \"repo\", githubRepoName)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 605
            },
            {
              "content": "\tupdateRepo := github.Repository{",
              "line_type": "context",
              "old_line_no": 555,
              "new_line_no": 606
            },
            {
              "content": "\t\tName:              pointer(githubPath[1]),",
              "line_type": "deleted",
              "old_line_no": 556,
              "new_line_no": 0
            },
            {
              "content": "\t\tName:              pointer(githubRepoName),",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 607
            },
            {
              "content": "\t\tDescription:       \u0026project.Description,",
              "line_type": "context",
              "old_line_no": 557,
              "new_line_no": 608
            },
            {
              "content": "\t\tHomepage:          \u0026homepage,",
              "line_type": "context",
              "old_line_no": 558,
              "new_line_no": 609
            },
            {
              "content": "\t\tAllowAutoMerge:    pointer(true),",
              "line_type": "context",
              "old_line_no": 559,
              "new_line_no": 610
            }
          ]
        },
        {
          "old_start_line": 562,
          "old_line_count": 585,
          "new_start_line": 613,
          "new_line_count": 510,
          "header_text": "func migrateProject(ctx context.Context, proj []string) error {",
          "lines": [
            {
              "content": "\t\tAllowSquashMerge:  pointer(true),",
              "line_type": "context",
              "old_line_no": 562,
              "new_line_no": 613
            },
            {
              "content": "\t\tAllowUpdateBranch: pointer(true),",
              "line_type": "context",
              "old_line_no": 563,
              "new_line_no": 614
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 564,
              "new_line_no": 615
            },
            {
              "content": "\tif _, _, err = gh.Repositories.Edit(ctx, githubPath[0], githubPath[1], \u0026updateRepo); err != nil {",
              "line_type": "deleted",
              "old_line_no": 565,
              "new_line_no": 0
            },
            {
              "content": "\t\treturn fmt.Errorf(\"updating github repo: %v\", err)",
              "line_type": "deleted",
              "old_line_no": 566,
              "new_line_no": 0
            },
            {
              "content": "\tif _, _, err = gh.Repositories.Edit(ctx, githubOwner, githubRepoName, \u0026updateRepo); err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 616
            },
            {
              "content": "\t\treturn fmt.Errorf(\"updating GitHub repo %s/%s: %w\", githubOwner, githubRepoName, err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 617
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 567,
              "new_line_no": 618
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 568,
              "new_line_no": 619
            },
            {
              "content": "\tcloneUrl.User = url.UserPassword(\"oauth2\", gitlabToken)",
              "line_type": "deleted",
              "old_line_no": 569,
              "new_line_no": 0
            },
            {
              "content": "\tcloneUrlWithCredentials := cloneUrl.String()",
              "line_type": "deleted",
              "old_line_no": 570,
              "new_line_no": 0
            },
            {
              "content": "\tcloneURL.User = url.UserPassword(\"oauth2\", cfg.GitlabToken)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 620
            },
            {
              "content": "\tcloneURLWithCredentials := cloneURL.String()",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 621
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 571,
              "new_line_no": 622
            },
            {
              "content": "\t// In-memory filesystem for worktree operations",
              "line_type": "context",
              "old_line_no": 572,
              "new_line_no": 623
            },
            {
              "content": "\tfs := memfs.New()",
              "line_type": "context",
              "old_line_no": 573,
              "new_line_no": 624
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 574,
              "new_line_no": 625
            },
            {
              "content": "\tlogger.Debug(\"cloning repository\", \"name\", gitlabPath[1], \"group\", gitlabPath[0], \"url\", project.HTTPURLToRepo)",
              "line_type": "deleted",
              "old_line_no": 575,
              "new_line_no": 0
            },
            {
              "content": "\tlogger.Debug(\"cloning repository\", \"gitlab_project\", proj.GitlabPath, \"url\", project.HTTPURLToRepo)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 626
            },
            {
              "content": "\trepo, err := git.CloneContext(ctx, memory.NewStorage(), fs, \u0026git.CloneOptions{",
              "line_type": "context",
              "old_line_no": 576,
              "new_line_no": 627
            },
            {
              "content": "\t\tURL:        cloneUrlWithCredentials,",
              "line_type": "deleted",
              "old_line_no": 577,
              "new_line_no": 0
            },
            {
              "content": "\t\tAuth:       nil,",
              "line_type": "deleted",
              "old_line_no": 578,
              "new_line_no": 0
            },
            {
              "content": "\t\tURL:        cloneURLWithCredentials,",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 628
            },
            {
              "content": "\t\tRemoteName: \"gitlab\",",
              "line_type": "context",
              "old_line_no": 579,
              "new_line_no": 629
            },
            {
              "content": "\t\tMirror:     true,",
              "line_type": "deleted",
              "old_line_no": 580,
              "new_line_no": 0
            },
            {
              "content": "\t\tMirror:     true, // Clone as a mirror to preserve all refs",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 630
            },
            {
              "content": "\t})",
              "line_type": "context",
              "old_line_no": 581,
              "new_line_no": 631
            },
            {
              "content": "\tif err != nil {",
              "line_type": "context",
              "old_line_no": 582,
              "new_line_no": 632
            },
            {
              "content": "\t\treturn fmt.Errorf(\"cloning gitlab repo: %v\", err)",
              "line_type": "deleted",
              "old_line_no": 583,
              "new_line_no": 0
            },
            {
              "content": "\t\treturn fmt.Errorf(\"cloning GitLab repo %s: %w\", proj.GitlabPath, err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 633
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 584,
              "new_line_no": 634
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 585,
              "new_line_no": 635
            },
            {
              "content": "\tif renameMasterToMain {",
              "line_type": "deleted",
              "old_line_no": 586,
              "new_line_no": 0
            },
            {
              "content": "\t\tif masterBranch, err := repo.Reference(plumbing.NewBranchReferenceName(\"master\"), false); err == nil {",
              "line_type": "deleted",
              "old_line_no": 587,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tlogger.Info(\"renaming master branch to main prior to push\", \"name\", gitlabPath[1], \"group\", gitlabPath[0], \"sha\", masterBranch.Hash())",
              "line_type": "deleted",
              "old_line_no": 588,
              "new_line_no": 0
            },
            {
              "content": "\tif cfg.RenameMasterToMain {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 636
            },
            {
              "content": "\t\tif masterBranchRef, err := repo.Reference(plumbing.NewBranchReferenceName(\"master\"), false); err == nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 637
            },
            {
              "content": "\t\t\tlogger.Info(\"renaming 'master' branch to 'main'\", \"project\", proj.GitlabPath, \"sha\", masterBranchRef.Hash())",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 638
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 589,
              "new_line_no": 639
            },
            {
              "content": "\t\t\tlogger.Debug(\"creating main branch\", \"name\", gitlabPath[1], \"group\", gitlabPath[0], \"sha\", masterBranch.Hash())",
              "line_type": "deleted",
              "old_line_no": 590,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tmainBranch := plumbing.NewHashReference(plumbing.NewBranchReferenceName(\"main\"), masterBranch.Hash())",
              "line_type": "deleted",
              "old_line_no": 591,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tif err = repo.Storer.SetReference(mainBranch); err != nil {",
              "line_type": "deleted",
              "old_line_no": 592,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\treturn fmt.Errorf(\"creating main branch: %v\", err)",
              "line_type": "deleted",
              "old_line_no": 593,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tmainBranchRef := plumbing.NewHashReference(plumbing.NewBranchReferenceName(\"main\"), masterBranchRef.Hash())",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 640
            },
            {
              "content": "\t\t\tif err = repo.Storer.SetReference(mainBranchRef); err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 641
            },
            {
              "content": "\t\t\t\treturn fmt.Errorf(\"creating 'main' branch: %w\", err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 642
            },
            {
              "content": "\t\t\t}",
              "line_type": "context",
              "old_line_no": 594,
              "new_line_no": 643
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 595,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tlogger.Debug(\"deleting master branch\", \"name\", gitlabPath[1], \"group\", gitlabPath[0], \"sha\", masterBranch.Hash())",
              "line_type": "deleted",
              "old_line_no": 596,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tif err = repo.Storer.RemoveReference(masterBranch.Name()); err != nil {",
              "line_type": "deleted",
              "old_line_no": 597,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\treturn fmt.Errorf(\"deleting master branch: %v\", err)",
              "line_type": "deleted",
              "old_line_no": 598,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tif err = repo.Storer.RemoveReference(masterBranchRef.Name()); err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 644
            },
            {
              "content": "\t\t\t\treturn fmt.Errorf(\"deleting 'master' branch: %w\", err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 645
            },
            {
              "content": "\t\t\t}",
              "line_type": "context",
              "old_line_no": 599,
              "new_line_no": 646
            },
            {
              "content": "\t\t} else if !errors.Is(err, plumbing.ErrReferenceNotFound) {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 647
            },
            {
              "content": "\t\t\treturn fmt.Errorf(\"checking for 'master' branch: %w\", err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 648
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 600,
              "new_line_no": 649
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 601,
              "new_line_no": 650
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 602,
              "new_line_no": 651
            },
            {
              "content": "\tgithubUrl := fmt.Sprintf(\"https://%s/%s/%s\", githubDomain, githubPath[0], githubPath[1])",
              "line_type": "deleted",
              "old_line_no": 603,
              "new_line_no": 0
            },
            {
              "content": "\tgithubUrlWithCredentials := fmt.Sprintf(\"https://%s:%s@%s/%s/%s\", githubUser, githubToken, githubDomain, githubPath[0], githubPath[1])",
              "line_type": "deleted",
              "old_line_no": 604,
              "new_line_no": 0
            },
            {
              "content": "\tgithubTargetURL := fmt.Sprintf(\"https://%s/%s/%s\", cfg.GithubDomain, githubOwner, githubRepoName)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 652
            },
            {
              "content": "\t// Embed username and token directly in the URL for authentication",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 653
            },
            {
              "content": "\tgithubTargetURLWithCredentials := fmt.Sprintf(\"https://%s:%s@%s/%s/%s\", cfg.GithubUser, cfg.GithubToken, cfg.GithubDomain, githubOwner, githubRepoName)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 654
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 605,
              "new_line_no": 655
            },
            {
              "content": "\tlogger.Debug(\"adding remote for GitHub repository\", \"name\", gitlabPath[1], \"group\", gitlabPath[0], \"url\", githubUrl)",
              "line_type": "deleted",
              "old_line_no": 606,
              "new_line_no": 0
            },
            {
              "content": "\tif _, err = repo.CreateRemote(\u0026config.RemoteConfig{",
              "line_type": "deleted",
              "old_line_no": 607,
              "new_line_no": 0
            },
            {
              "content": "\tlogger.Debug(\"adding remote for GitHub repository\", \"github_repo\", proj.GithubRepo, \"url\", githubTargetURL)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 656
            },
            {
              "content": "\t_, err = repo.CreateRemote(\u0026config.RemoteConfig{",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 657
            },
            {
              "content": "\t\tName:   \"github\",",
              "line_type": "context",
              "old_line_no": 608,
              "new_line_no": 658
            },
            {
              "content": "\t\tURLs:   []string{githubUrlWithCredentials},",
              "line_type": "deleted",
              "old_line_no": 609,
              "new_line_no": 0
            },
            {
              "content": "\t\tMirror: true,",
              "line_type": "deleted",
              "old_line_no": 610,
              "new_line_no": 0
            },
            {
              "content": "\t}); err != nil {",
              "line_type": "deleted",
              "old_line_no": 611,
              "new_line_no": 0
            },
            {
              "content": "\t\treturn fmt.Errorf(\"adding github remote: %v\", err)",
              "line_type": "deleted",
              "old_line_no": 612,
              "new_line_no": 0
            },
            {
              "content": "\t\tURLs:   []string{githubTargetURLWithCredentials},",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 659
            },
            {
              "content": "\t\tMirror: true, // Push as a mirror",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 660
            },
            {
              "content": "\t})",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 661
            },
            {
              "content": "\tif err != nil \u0026\u0026 !strings.Contains(err.Error(), \"remote already exists\") { // Handle case where remote might already exist from previous failed attempt",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 662
            },
            {
              "content": "\t\treturn fmt.Errorf(\"adding GitHub remote %q: %w\", githubTargetURL, err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 663
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 613,
              "new_line_no": 664
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 614,
              "new_line_no": 665
            },
            {
              "content": "\tlogger.Debug(\"force-pushing to GitHub repository\", \"name\", gitlabPath[1], \"group\", gitlabPath[0], \"url\", githubUrl)",
              "line_type": "deleted",
              "old_line_no": 615,
              "new_line_no": 0
            },
            {
              "content": "\tlogger.Debug(\"force-pushing to GitHub repository\", \"github_repo\", proj.GithubRepo, \"url\", githubTargetURL)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 666
            },
            {
              "content": "\tif err = repo.PushContext(ctx, \u0026git.PushOptions{",
              "line_type": "context",
              "old_line_no": 616,
              "new_line_no": 667
            },
            {
              "content": "\t\tRemoteName: \"github\",",
              "line_type": "context",
              "old_line_no": 617,
              "new_line_no": 668
            },
            {
              "content": "\t\tForce:      true,",
              "line_type": "context",
              "old_line_no": 618,
              "new_line_no": 669
            },
            {
              "content": "\t\t//Prune:      true, // causes error, attempts to delete main branch",
              "line_type": "deleted",
              "old_line_no": 619,
              "new_line_no": 0
            },
            {
              "content": "\t\t// Prune: true, // Pruning can be dangerous if the target repo has additional branches",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 670
            },
            {
              "content": "\t}); err != nil {",
              "line_type": "context",
              "old_line_no": 620,
              "new_line_no": 671
            },
            {
              "content": "\t\tupToDateError := errors.New(\"already up-to-date\")",
              "line_type": "deleted",
              "old_line_no": 621,
              "new_line_no": 0
            },
            {
              "content": "\t\tif errors.As(err, \u0026upToDateError) {",
              "line_type": "deleted",
              "old_line_no": 622,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tlogger.Debug(\"repository already up-to-date on GitHub\", \"name\", gitlabPath[1], \"group\", gitlabPath[0], \"url\", githubUrl)",
              "line_type": "deleted",
              "old_line_no": 623,
              "new_line_no": 0
            },
            {
              "content": "\t\tif strings.Contains(err.Error(), \"already up-to-date\") {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 672
            },
            {
              "content": "\t\t\tlogger.Debug(\"repository already up-to-date on GitHub\", \"github_repo\", proj.GithubRepo, \"url\", githubTargetURL)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 673
            },
            {
              "content": "\t\t} else {",
              "line_type": "context",
              "old_line_no": 624,
              "new_line_no": 674
            },
            {
              "content": "\t\t\treturn fmt.Errorf(\"pushing to github repo: %v\", err)",
              "line_type": "deleted",
              "old_line_no": 625,
              "new_line_no": 0
            },
            {
              "content": "\t\t\treturn fmt.Errorf(\"pushing to GitHub repo %s/%s: %w\", githubOwner, githubRepoName, err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 675
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 626,
              "new_line_no": 676
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 627,
              "new_line_no": 677
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 628,
              "new_line_no": 678
            },
            {
              "content": "\tlogger.Debug(\"setting default repository branch\", \"owner\", githubPath[0], \"repo\", githubPath[1], \"branch_name\", defaultBranch)",
              "line_type": "deleted",
              "old_line_no": 629,
              "new_line_no": 0
            },
            {
              "content": "\tupdateRepo = github.Repository{",
              "line_type": "deleted",
              "old_line_no": 630,
              "new_line_no": 0
            },
            {
              "content": "\tlogger.Debug(\"setting default repository branch\", \"owner\", githubOwner, \"repo\", githubRepoName, \"branch_name\", defaultBranch)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 679
            },
            {
              "content": "\tfinalUpdateRepo := github.Repository{",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 680
            },
            {
              "content": "\t\tDefaultBranch: \u0026defaultBranch,",
              "line_type": "context",
              "old_line_no": 631,
              "new_line_no": 681
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 632,
              "new_line_no": 682
            },
            {
              "content": "\tif _, _, err = gh.Repositories.Edit(ctx, githubPath[0], githubPath[1], \u0026updateRepo); err != nil {",
              "line_type": "deleted",
              "old_line_no": 633,
              "new_line_no": 0
            },
            {
              "content": "\t\treturn fmt.Errorf(\"setting default branch: %v\", err)",
              "line_type": "deleted",
              "old_line_no": 634,
              "new_line_no": 0
            },
            {
              "content": "\tif _, _, err = gh.Repositories.Edit(ctx, githubOwner, githubRepoName, \u0026finalUpdateRepo); err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 683
            },
            {
              "content": "\t\treturn fmt.Errorf(\"setting default branch for %s/%s to %q: %w\", githubOwner, githubRepoName, defaultBranch, err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 684
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 635,
              "new_line_no": 685
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 636,
              "new_line_no": 686
            },
            {
              "content": "\tif enablePullRequests {",
              "line_type": "deleted",
              "old_line_no": 637,
              "new_line_no": 0
            },
            {
              "content": "\t\tmigratePullRequests(ctx, githubPath, gitlabPath, project, repo)",
              "line_type": "deleted",
              "old_line_no": 638,
              "new_line_no": 0
            },
            {
              "content": "\tif cfg.EnablePullRequests {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 687
            },
            {
              "content": "\t\tif err := migratePullRequests(ctx, cfg, githubOwner, githubRepoName, gitlabGroupName, gitlabProjectName, project, repo); err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 688
            },
            {
              "content": "\t\t\treturn fmt.Errorf(\"failed to migrate pull requests for %s: %w\", proj.GitlabPath, err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 689
            },
            {
              "content": "\t\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 690
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 639,
              "new_line_no": 691
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 640,
              "new_line_no": 692
            },
            {
              "content": "\treturn nil",
              "line_type": "context",
              "old_line_no": 641,
              "new_line_no": 693
            },
            {
              "content": "}",
              "line_type": "context",
              "old_line_no": 642,
              "new_line_no": 694
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 643,
              "new_line_no": 695
            },
            {
              "content": "func migratePullRequests(ctx context.Context, githubPath, gitlabPath []string, project *gitlab.Project, repo *git.Repository) {",
              "line_type": "deleted",
              "old_line_no": 644,
              "new_line_no": 0
            },
            {
              "content": "\tvar mergeRequests []*gitlab.MergeRequest",
              "line_type": "deleted",
              "old_line_no": 645,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 646,
              "new_line_no": 0
            },
            {
              "content": "\topts := \u0026gitlab.ListProjectMergeRequestsOptions{",
              "line_type": "deleted",
              "old_line_no": 647,
              "new_line_no": 0
            },
            {
              "content": "\t\tOrderBy: pointer(\"created_at\"),",
              "line_type": "deleted",
              "old_line_no": 648,
              "new_line_no": 0
            },
            {
              "content": "\t\tSort:    pointer(\"asc\"),",
              "line_type": "deleted",
              "old_line_no": 649,
              "new_line_no": 0
            },
            {
              "content": "\t}",
              "line_type": "deleted",
              "old_line_no": 650,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 651,
              "new_line_no": 0
            },
            {
              "content": "\tlogger.Debug(\"retrieving GitLab merge requests\", \"name\", gitlabPath[1], \"group\", gitlabPath[0], \"project_id\", project.ID)",
              "line_type": "deleted",
              "old_line_no": 652,
              "new_line_no": 0
            },
            {
              "content": "\tfor {",
              "line_type": "deleted",
              "old_line_no": 653,
              "new_line_no": 0
            },
            {
              "content": "\t\tresult, resp, err := gl.MergeRequests.ListProjectMergeRequests(project.ID, opts)",
              "line_type": "deleted",
              "old_line_no": 654,
              "new_line_no": 0
            },
            {
              "content": "\t\tif err != nil {",
              "line_type": "deleted",
              "old_line_no": 655,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tsendErr(fmt.Errorf(\"retrieving gitlab merge requests: %v\", err))",
              "line_type": "deleted",
              "old_line_no": 656,
              "new_line_no": 0
            },
            {
              "content": "\t\t\treturn",
              "line_type": "deleted",
              "old_line_no": 657,
              "new_line_no": 0
            },
            {
              "content": "\t\t}",
              "line_type": "deleted",
              "old_line_no": 658,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 659,
              "new_line_no": 0
            },
            {
              "content": "\t\tmergeRequests = append(mergeRequests, result...)",
              "line_type": "deleted",
              "old_line_no": 660,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 661,
              "new_line_no": 0
            },
            {
              "content": "\t\tif resp.NextPage == 0 {",
              "line_type": "deleted",
              "old_line_no": 662,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tbreak",
              "line_type": "deleted",
              "old_line_no": 663,
              "new_line_no": 0
            },
            {
              "content": "\t\t}",
              "line_type": "deleted",
              "old_line_no": 664,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 665,
              "new_line_no": 0
            },
            {
              "content": "\t\topts.Page = resp.NextPage",
              "line_type": "deleted",
              "old_line_no": 666,
              "new_line_no": 0
            },
            {
              "content": "// migratePullRequests migrates merge requests from GitLab to GitHub.",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 696
            },
            {
              "content": "func migratePullRequests(ctx context.Context, cfg *Config, githubOwner, githubRepoName, gitlabGroupName, gitlabProjectName string, project *gitlab.Project, repo *git.Repository) error {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 697
            },
            {
              "content": "\tmergeRequests, err := listGitlabMergeRequests(ctx, gl, project.ID)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 698
            },
            {
              "content": "\tif err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 699
            },
            {
              "content": "\t\treturn fmt.Errorf(\"retrieving GitLab merge requests for project %s: %w\", project.PathWithNamespace, err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 700
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 667,
              "new_line_no": 701
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 668,
              "new_line_no": 702
            },
            {
              "content": "\tvar successCount, failureCount int",
              "line_type": "context",
              "old_line_no": 669,
              "new_line_no": 703
            },
            {
              "content": "\ttotalCount := len(mergeRequests)",
              "line_type": "context",
              "old_line_no": 670,
              "new_line_no": 704
            },
            {
              "content": "\tlogger.Info(\"migrating merge requests from GitLab to GitHub\", \"name\", gitlabPath[1], \"group\", gitlabPath[0], \"count\", totalCount)",
              "line_type": "deleted",
              "old_line_no": 671,
              "new_line_no": 0
            },
            {
              "content": "\tlogger.Info(\"migrating merge requests from GitLab to GitHub\",",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 705
            },
            {
              "content": "\t\t\"gitlab_project\", project.PathWithNamespace, \"count\", totalCount)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 706
            },
            {
              "content": "",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 707
            },
            {
              "content": "\tprURLPattern := regexp.MustCompile(pullRequestLinkPattern) // Compile once",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 708
            },
            {
              "content": "",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 709
            },
            {
              "content": "\tfor _, mergeRequest := range mergeRequests {",
              "line_type": "context",
              "old_line_no": 672,
              "new_line_no": 710
            },
            {
              "content": "\t\tif mergeRequest == nil {",
              "line_type": "context",
              "old_line_no": 673,
              "new_line_no": 711
            },
            {
              "content": "\t\t\tcontinue",
              "line_type": "context",
              "old_line_no": 674,
              "new_line_no": 712
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 675,
              "new_line_no": 713
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 676,
              "new_line_no": 714
            },
            {
              "content": "\t\t// Check for context cancellation",
              "line_type": "deleted",
              "old_line_no": 677,
              "new_line_no": 0
            },
            {
              "content": "\t\tif err := ctx.Err(); err != nil {",
              "line_type": "context",
              "old_line_no": 678,
              "new_line_no": 715
            },
            {
              "content": "\t\t\tsendErr(fmt.Errorf(\"preparing to list pull requests: %v\", err))",
              "line_type": "deleted",
              "old_line_no": 679,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tlogger.Error(\"context canceled during pull request migration\", \"err\", err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 716
            },
            {
              "content": "\t\t\tbreak",
              "line_type": "context",
              "old_line_no": 680,
              "new_line_no": 717
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 681,
              "new_line_no": 718
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 682,
              "new_line_no": 719
            },
            {
              "content": "\t\tvar cleanUpBranch bool",
              "line_type": "deleted",
              "old_line_no": 683,
              "new_line_no": 0
            },
            {
              "content": "\t\tvar pullRequest *github.PullRequest",
              "line_type": "deleted",
              "old_line_no": 684,
              "new_line_no": 0
            },
            {
              "content": "\t\tlogger.Debug(\"processing GitLab merge request\", \"mr_id\", mergeRequest.IID, \"source_branch\", mergeRequest.SourceBranch, \"target_branch\", mergeRequest.TargetBranch)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 720
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 685,
              "new_line_no": 721
            },
            {
              "content": "\t\tlogger.Debug(\"searching for any existing pull request\", \"owner\", githubPath[0], \"repo\", githubPath[1], \"merge_request_id\", mergeRequest.IID)",
              "line_type": "deleted",
              "old_line_no": 686,
              "new_line_no": 0
            },
            {
              "content": "\t\t//query := fmt.Sprintf(\"repo:%s/%s is:pr head:%s\", githubPath[0], githubPath[1], mergeRequest.SourceBranch)",
              "line_type": "deleted",
              "old_line_no": 687,
              "new_line_no": 0
            },
            {
              "content": "\t\tquery := fmt.Sprintf(\"repo:%s/%s is:pr\", githubPath[0], githubPath[1])",
              "line_type": "deleted",
              "old_line_no": 688,
              "new_line_no": 0
            },
            {
              "content": "\t\tvar pullRequest *github.PullRequest",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 722
            },
            {
              "content": "\t\t// Search for existing GitHub pull requests",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 723
            },
            {
              "content": "\t\tquery := fmt.Sprintf(\"repo:%s/%s is:pr\", githubOwner, githubRepoName)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 724
            },
            {
              "content": "\t\tsearchResult, err := getGithubSearchResults(ctx, query)",
              "line_type": "context",
              "old_line_no": 689,
              "new_line_no": 725
            },
            {
              "content": "\t\tif err != nil {",
              "line_type": "context",
              "old_line_no": 690,
              "new_line_no": 726
            },
            {
              "content": "\t\t\tsendErr(fmt.Errorf(\"listing pull requests: %v\", err))",
              "line_type": "deleted",
              "old_line_no": 691,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tsendErr(fmt.Errorf(\"listing pull requests on GitHub for %s/%s: %w\", githubOwner, githubRepoName, err))",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 727
            },
            {
              "content": "\t\t\tfailureCount++",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 728
            },
            {
              "content": "\t\t\tcontinue",
              "line_type": "context",
              "old_line_no": 692,
              "new_line_no": 729
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 693,
              "new_line_no": 730
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 694,
              "new_line_no": 731
            },
            {
              "content": "\t\t// Look for an existing GitHub pull request",
              "line_type": "deleted",
              "old_line_no": 695,
              "new_line_no": 0
            },
            {
              "content": "\t\tskip := false",
              "line_type": "deleted",
              "old_line_no": 696,
              "new_line_no": 0
            },
            {
              "content": "\t\t// Look for an existing GitHub pull request linked by MR ID in body",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 732
            },
            {
              "content": "\t\tfor _, issue := range searchResult.Issues {",
              "line_type": "context",
              "old_line_no": 697,
              "new_line_no": 733
            },
            {
              "content": "\t\t\tif issue == nil {",
              "line_type": "deleted",
              "old_line_no": 698,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tif issue == nil || !issue.IsPullRequest() {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 734
            },
            {
              "content": "\t\t\t\tcontinue",
              "line_type": "context",
              "old_line_no": 699,
              "new_line_no": 735
            },
            {
              "content": "\t\t\t}",
              "line_type": "context",
              "old_line_no": 700,
              "new_line_no": 736
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 701,
              "new_line_no": 737
            },
            {
              "content": "\t\t\t// Check for context cancellation",
              "line_type": "deleted",
              "old_line_no": 702,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tif err := ctx.Err(); err != nil {",
              "line_type": "context",
              "old_line_no": 703,
              "new_line_no": 738
            },
            {
              "content": "\t\t\t\tsendErr(fmt.Errorf(\"preparing to retrieve pull request: %v\", err))",
              "line_type": "deleted",
              "old_line_no": 704,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tsendErr(fmt.Errorf(\"context canceled while checking existing pull requests: %w\", err))",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 739
            },
            {
              "content": "\t\t\t\tbreak",
              "line_type": "context",
              "old_line_no": 705,
              "new_line_no": 740
            },
            {
              "content": "\t\t\t}",
              "line_type": "context",
              "old_line_no": 706,
              "new_line_no": 741
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 707,
              "new_line_no": 742
            },
            {
              "content": "\t\t\tif issue.IsPullRequest() {",
              "line_type": "deleted",
              "old_line_no": 708,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t// Extract the PR number from the URL",
              "line_type": "deleted",
              "old_line_no": 709,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tprUrl, err := url.Parse(*issue.PullRequestLinks.URL)",
              "line_type": "deleted",
              "old_line_no": 710,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tif err != nil {",
              "line_type": "deleted",
              "old_line_no": 711,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tsendErr(fmt.Errorf(\"parsing pull request url: %v\", err))",
              "line_type": "deleted",
              "old_line_no": 712,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tskip = true",
              "line_type": "deleted",
              "old_line_no": 713,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tbreak",
              "line_type": "deleted",
              "old_line_no": 714,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 715,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 716,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tif m := regexp.MustCompile(\".+/([0-9]+)$\").FindStringSubmatch(prUrl.Path); len(m) == 2 {",
              "line_type": "deleted",
              "old_line_no": 717,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tif issue.PullRequestLinks != nil \u0026\u0026 issue.PullRequestLinks.URL != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 743
            },
            {
              "content": "\t\t\t\tif m := prURLPattern.FindStringSubmatch(*issue.PullRequestLinks.URL); len(m) == 2 {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 744
            },
            {
              "content": "\t\t\t\t\tprNumber, _ := strconv.Atoi(m[1])",
              "line_type": "context",
              "old_line_no": 718,
              "new_line_no": 745
            },
            {
              "content": "\t\t\t\t\tpr, err := getGithubPullRequest(ctx, githubPath[0], githubPath[1], prNumber)",
              "line_type": "deleted",
              "old_line_no": 719,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tpr, err := getGithubPullRequest(ctx, githubOwner, githubRepoName, prNumber)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 746
            },
            {
              "content": "\t\t\t\t\tif err != nil {",
              "line_type": "context",
              "old_line_no": 720,
              "new_line_no": 747
            },
            {
              "content": "\t\t\t\t\t\tsendErr(fmt.Errorf(\"retrieving pull request: %v\", err))",
              "line_type": "deleted",
              "old_line_no": 721,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tskip = true",
              "line_type": "deleted",
              "old_line_no": 722,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tbreak",
              "line_type": "deleted",
              "old_line_no": 723,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tsendErr(fmt.Errorf(\"retrieving pull request #%d for %s/%s: %w\", prNumber, githubOwner, githubRepoName, err))",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 748
            },
            {
              "content": "\t\t\t\t\t\tcontinue",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 749
            },
            {
              "content": "\t\t\t\t\t}",
              "line_type": "context",
              "old_line_no": 724,
              "new_line_no": 750
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 725,
              "new_line_no": 751
            },
            {
              "content": "\t\t\t\t\tif strings.Contains(pr.GetBody(), fmt.Sprintf(\"**GitLab MR Number** | %d\", mergeRequest.IID)) ||",
              "line_type": "context",
              "old_line_no": 726,
              "new_line_no": 752
            },
            {
              "content": "\t\t\t\t\t\tstrings.Contains(pr.GetBody(), fmt.Sprintf(\"**GitLab MR Number** | [%d]\", mergeRequest.IID)) {",
              "line_type": "context",
              "old_line_no": 727,
              "new_line_no": 753
            },
            {
              "content": "\t\t\t\t\t\tlogger.Debug(\"found existing pull request\", \"owner\", githubPath[0], \"repo\", githubPath[1], \"pr_number\", pr.GetNumber())",
              "line_type": "deleted",
              "old_line_no": 728,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tlogger.Debug(\"found existing pull request for GitLab MR\", \"mr_id\", mergeRequest.IID, \"github_pr\", pr.GetNumber())",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 754
            },
            {
              "content": "\t\t\t\t\t\tpullRequest = pr",
              "line_type": "context",
              "old_line_no": 729,
              "new_line_no": 755
            },
            {
              "content": "\t\t\t\t\t\tbreak",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 756
            },
            {
              "content": "\t\t\t\t\t}",
              "line_type": "context",
              "old_line_no": 730,
              "new_line_no": 757
            },
            {
              "content": "\t\t\t\t}",
              "line_type": "context",
              "old_line_no": 731,
              "new_line_no": 758
            },
            {
              "content": "\t\t\t}",
              "line_type": "context",
              "old_line_no": 732,
              "new_line_no": 759
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 733,
              "new_line_no": 760
            },
            {
              "content": "\t\tif skip {",
              "line_type": "deleted",
              "old_line_no": 734,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tcontinue",
              "line_type": "deleted",
              "old_line_no": 735,
              "new_line_no": 0
            },
            {
              "content": "\t\t}",
              "line_type": "deleted",
              "old_line_no": 736,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 737,
              "new_line_no": 0
            },
            {
              "content": "\t\t// Proceed to create temporary branches when migrating a merged/closed merge request that doesn't yet have a counterpart PR in GitHub (can't create one without a branch)",
              "line_type": "deleted",
              "old_line_no": 738,
              "new_line_no": 0
            },
            {
              "content": "\t\tif pullRequest == nil \u0026\u0026 !strings.EqualFold(mergeRequest.State, \"opened\") {",
              "line_type": "deleted",
              "old_line_no": 739,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tlogger.Trace(\"searching for existing branch for closed/merged merge request\", \"name\", gitlabPath[1], \"group\", gitlabPath[0], \"project_id\", project.ID, \"merge_request_id\", mergeRequest.IID, \"source_branch\", mergeRequest.SourceBranch)",
              "line_type": "deleted",
              "old_line_no": 740,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 741,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t// Only create temporary branches if the source branch has been deleted",
              "line_type": "deleted",
              "old_line_no": 742,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tif _, err = repo.Reference(plumbing.ReferenceName(mergeRequest.SourceBranch), false); err != nil {",
              "line_type": "deleted",
              "old_line_no": 743,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t// Create a worktree",
              "line_type": "deleted",
              "old_line_no": 744,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tworktree, err := repo.Worktree()",
              "line_type": "deleted",
              "old_line_no": 745,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tif err != nil {",
              "line_type": "deleted",
              "old_line_no": 746,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tsendErr(fmt.Errorf(\"creating worktree: %v\", err))",
              "line_type": "deleted",
              "old_line_no": 747,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tfailureCount++",
              "line_type": "deleted",
              "old_line_no": 748,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tcontinue",
              "line_type": "deleted",
              "old_line_no": 749,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 750,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 751,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t// Generate temporary branch names",
              "line_type": "deleted",
              "old_line_no": 752,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tmergeRequest.SourceBranch = fmt.Sprintf(\"migration-source-%d/%s\", mergeRequest.IID, mergeRequest.SourceBranch)",
              "line_type": "deleted",
              "old_line_no": 753,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tmergeRequest.TargetBranch = fmt.Sprintf(\"migration-target-%d/%s\", mergeRequest.IID, mergeRequest.TargetBranch)",
              "line_type": "deleted",
              "old_line_no": 754,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 755,
              "new_line_no": 761
            },
            {
              "content": "\t\t\t\tlogger.Trace(\"retrieving commits for merge request\", \"name\", gitlabPath[1], \"group\", gitlabPath[0], \"project_id\", project.ID, \"merge_request_id\", mergeRequest.IID)",
              "line_type": "deleted",
              "old_line_no": 756,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tmergeRequestCommits, _, err := gl.MergeRequests.GetMergeRequestCommits(project.ID, mergeRequest.IID, \u0026gitlab.GetMergeRequestCommitsOptions{OrderBy: \"created_at\", Sort: \"asc\"})",
              "line_type": "deleted",
              "old_line_no": 757,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tif err != nil {",
              "line_type": "deleted",
              "old_line_no": 758,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tsendErr(fmt.Errorf(\"retrieving merge request commits: %v\", err))",
              "line_type": "deleted",
              "old_line_no": 759,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tfailureCount++",
              "line_type": "deleted",
              "old_line_no": 760,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tcontinue",
              "line_type": "deleted",
              "old_line_no": 761,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 762,
              "new_line_no": 0
            },
            {
              "content": "\t\tif pullRequest != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 762
            },
            {
              "content": "\t\t\tsuccessCount++",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 763
            },
            {
              "content": "\t\t\tcontinue // Skip if PR already exists",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 764
            },
            {
              "content": "\t\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 765
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 763,
              "new_line_no": 766
            },
            {
              "content": "\t\t\t\t// Some merge requests have no commits, disregard these",
              "line_type": "deleted",
              "old_line_no": 764,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tif len(mergeRequestCommits) == 0 {",
              "line_type": "deleted",
              "old_line_no": 765,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tcontinue",
              "line_type": "deleted",
              "old_line_no": 766,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 767,
              "new_line_no": 0
            },
            {
              "content": "\t\t// Handle creating temporary branches for merged/closed MRs if their source branches no longer exist",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 767
            },
            {
              "content": "\t\tsourceBranch := mergeRequest.SourceBranch",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 768
            },
            {
              "content": "\t\ttargetBranch := mergeRequest.TargetBranch",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 769
            },
            {
              "content": "\t\tcleanUpBranch := false",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 770
            },
            {
              "content": "",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 771
            },
            {
              "content": "\t\t// Check if the source branch actually exists in the cloned repository",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 772
            },
            {
              "content": "\t\t_, err = repo.Reference(plumbing.NewBranchReferenceName(sourceBranch), false)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 773
            },
            {
              "content": "\t\tif err != nil \u0026\u0026 errors.Is(err, plumbing.ErrReferenceNotFound) {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 774
            },
            {
              "content": "\t\t\tlogger.Trace(\"source branch not found in cloned repo, attempting to create temporary branches for MR\",",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 775
            },
            {
              "content": "\t\t\t\t\"mr_id\", mergeRequest.IID, \"original_source\", mergeRequest.SourceBranch, \"original_target\", mergeRequest.TargetBranch)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 776
            },
            {
              "content": "",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 777
            },
            {
              "content": "\t\t\t// Generate temporary branch names to avoid conflicts and signify their purpose",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 778
            },
            {
              "content": "\t\t\ttempSourceBranch := fmt.Sprintf(\"migration-source-%d-%s\", mergeRequest.IID, strings.ReplaceAll(mergeRequest.SourceBranch, \"/\", \"-\"))",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 779
            },
            {
              "content": "\t\t\ttempTargetBranch := fmt.Sprintf(\"migration-target-%d-%s\", mergeRequest.IID, strings.ReplaceAll(mergeRequest.TargetBranch, \"/\", \"-\"))",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 780
            },
            {
              "content": "\t\t\tsourceBranch = tempSourceBranch",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 781
            },
            {
              "content": "\t\t\ttargetBranch = tempTargetBranch",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 782
            },
            {
              "content": "\t\t\tcleanUpBranch = true // Mark for cleanup later",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 783
            },
            {
              "content": "",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 784
            },
            {
              "content": "\t\t\t// Create a worktree",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 785
            },
            {
              "content": "\t\t\tworktree, err := repo.Worktree()",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 786
            },
            {
              "content": "\t\t\tif err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 787
            },
            {
              "content": "\t\t\t\tsendErr(fmt.Errorf(\"creating worktree for temporary branches: %w\", err))",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 788
            },
            {
              "content": "\t\t\t\tfailureCount++",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 789
            },
            {
              "content": "\t\t\t\tcontinue",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 790
            },
            {
              "content": "\t\t\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 791
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 768,
              "new_line_no": 792
            },
            {
              "content": "\t\t\t\t// API is buggy, ordering is not respected, so we'll reorder by commit datestamp",
              "line_type": "deleted",
              "old_line_no": 769,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tsort.Slice(mergeRequestCommits, func(i, j int) bool {",
              "line_type": "deleted",
              "old_line_no": 770,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\treturn mergeRequestCommits[i].CommittedDate.Before(*mergeRequestCommits[j].CommittedDate)",
              "line_type": "deleted",
              "old_line_no": 771,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t})",
              "line_type": "deleted",
              "old_line_no": 772,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t// Get MR commits to find the range",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 793
            },
            {
              "content": "\t\t\tmrCommits, err := listGitlabMergeRequestCommits(ctx, gl, project.ID, mergeRequest.IID)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 794
            },
            {
              "content": "\t\t\tif err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 795
            },
            {
              "content": "\t\t\t\tsendErr(fmt.Errorf(\"retrieving commits for GitLab MR %d: %w\", mergeRequest.IID, err))",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 796
            },
            {
              "content": "\t\t\t\tfailureCount++",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 797
            },
            {
              "content": "\t\t\t\tcontinue",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 798
            },
            {
              "content": "\t\t\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 799
            },
            {
              "content": "\t\t\tif len(mrCommits) == 0 {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 800
            },
            {
              "content": "\t\t\t\tlogger.Debug(\"no commits found for merge request, skipping\", \"mr_id\", mergeRequest.IID)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 801
            },
            {
              "content": "\t\t\t\tcontinue",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 802
            },
            {
              "content": "\t\t\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 803
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 773,
              "new_line_no": 804
            },
            {
              "content": "\t\t\t\tif mergeRequestCommits[0] == nil {",
              "line_type": "deleted",
              "old_line_no": 774,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tsendErr(fmt.Errorf(\"start commit for merge request %d is nil\", mergeRequest.IID))",
              "line_type": "deleted",
              "old_line_no": 775,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tfailureCount++",
              "line_type": "deleted",
              "old_line_no": 776,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tcontinue",
              "line_type": "deleted",
              "old_line_no": 777,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 778,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tif mergeRequestCommits[len(mergeRequestCommits)-1] == nil {",
              "line_type": "deleted",
              "old_line_no": 779,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tsendErr(fmt.Errorf(\"end commit for merge request %d is nil\", mergeRequest.IID))",
              "line_type": "deleted",
              "old_line_no": 780,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tfailureCount++",
              "line_type": "deleted",
              "old_line_no": 781,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tcontinue",
              "line_type": "deleted",
              "old_line_no": 782,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 783,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t// Sort commits by committed date to ensure correct order",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 805
            },
            {
              "content": "\t\t\tsort.Slice(mrCommits, func(i, j int) bool {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 806
            },
            {
              "content": "\t\t\t\treturn mrCommits[i].CommittedDate.Before(*mrCommits[j].CommittedDate)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 807
            },
            {
              "content": "\t\t\t})",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 808
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 784,
              "new_line_no": 809
            },
            {
              "content": "\t\t\t\tlogger.Trace(\"inspecting start commit\", \"name\", gitlabPath[1], \"group\", gitlabPath[0], \"project_id\", project.ID, \"merge_request_id\", mergeRequest.IID, \"sha\", mergeRequestCommits[0].ShortID)",
              "line_type": "deleted",
              "old_line_no": 785,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tstartCommit, err := object.GetCommit(repo.Storer, plumbing.NewHash(mergeRequestCommits[0].ID))",
              "line_type": "deleted",
              "old_line_no": 786,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tif err != nil {",
              "line_type": "deleted",
              "old_line_no": 787,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tsendErr(fmt.Errorf(\"loading start commit: %v\", err))",
              "line_type": "deleted",
              "old_line_no": 788,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tfailureCount++",
              "line_type": "deleted",
              "old_line_no": 789,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tcontinue",
              "line_type": "deleted",
              "old_line_no": 790,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 791,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t// Attempt to find a suitable base for the target branch (first parent of the first commit in the MR)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 810
            },
            {
              "content": "\t\t\tfirstCommitID := plumbing.NewHash(mrCommits[0].ID)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 811
            },
            {
              "content": "\t\t\tfirstCommit, err := object.GetCommit(repo.Storer, firstCommitID)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 812
            },
            {
              "content": "\t\t\tif err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 813
            },
            {
              "content": "\t\t\t\tsendErr(fmt.Errorf(\"loading first commit %s for MR %d: %w\", firstCommitID.String(), mergeRequest.IID, err))",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 814
            },
            {
              "content": "\t\t\t\tfailureCount++",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 815
            },
            {
              "content": "\t\t\t\tcontinue",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 816
            },
            {
              "content": "\t\t\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 817
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 792,
              "new_line_no": 818
            },
            {
              "content": "\t\t\t\tif startCommit.NumParents() == 0 {",
              "line_type": "deleted",
              "old_line_no": 793,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t// Orphaned commit, start with an empty branch",
              "line_type": "deleted",
              "old_line_no": 794,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t// TODO: this isn't working as hoped, try to figure this out. in the meantime, we'll skip MRs from orphaned branches",
              "line_type": "deleted",
              "old_line_no": 795,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t//if err = repo.Storer.SetReference(plumbing.NewSymbolicReference(\"HEAD\", plumbing.ReferenceName(fmt.Sprintf(\"refs/heads/%s\", mergeRequest.TargetBranch)))); err != nil {",
              "line_type": "deleted",
              "old_line_no": 796,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t//\treturn fmt.Errorf(\"creating empty branch: %s\", err)",
              "line_type": "deleted",
              "old_line_no": 797,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t//}",
              "line_type": "deleted",
              "old_line_no": 798,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tsendErr(fmt.Errorf(\"start commit %s for merge request %d has no parents\", mergeRequestCommits[0].ShortID, mergeRequest.IID))",
              "line_type": "deleted",
              "old_line_no": 799,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tcontinue",
              "line_type": "deleted",
              "old_line_no": 800,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t} else {",
              "line_type": "deleted",
              "old_line_no": 801,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t// Sometimes we will be starting from a merge commit, so look for a suitable parent commit to branch out from",
              "line_type": "deleted",
              "old_line_no": 802,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tvar startCommitParent *object.Commit",
              "line_type": "deleted",
              "old_line_no": 803,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tfor i := 0; i \u003c startCommit.NumParents(); i++ {",
              "line_type": "deleted",
              "old_line_no": 804,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tlogger.Trace(\"inspecting start commit parent\", \"name\", gitlabPath[1], \"group\", gitlabPath[0], \"project_id\", project.ID, \"merge_request_id\", mergeRequest.IID, \"sha\", mergeRequestCommits[0].ShortID)",
              "line_type": "deleted",
              "old_line_no": 805,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tstartCommitParent, err = startCommit.Parent(0)",
              "line_type": "deleted",
              "old_line_no": 806,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tif err != nil {",
              "line_type": "deleted",
              "old_line_no": 807,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\t\tsendErr(fmt.Errorf(\"loading parent commit: %s\", err))",
              "line_type": "deleted",
              "old_line_no": 808,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 809,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tvar baseCommitHash plumbing.Hash",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 819
            },
            {
              "content": "\t\t\tif firstCommit.NumParents() \u003e 0 {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 820
            },
            {
              "content": "\t\t\t\t// Use the first parent as the base for the target branch.",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 821
            },
            {
              "content": "\t\t\t\t// This simulates the branch point of the feature branch.",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 822
            },
            {
              "content": "\t\t\t\tbaseCommitHash = firstCommit.ParentHashes[0]",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 823
            },
            {
              "content": "\t\t\t} else {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 824
            },
            {
              "content": "\t\t\t\t// If no parents, this is likely an initial commit. For simplicity,",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 825
            },
            {
              "content": "\t\t\t\t// if a branch isn't found and it's an orphaned commit, we might skip or",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 826
            },
            {
              "content": "\t\t\t\t// need more complex handling to create an \"empty\" base branch.",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 827
            },
            {
              "content": "\t\t\t\tsendErr(fmt.Errorf(\"first commit %s for MR %d has no parents, cannot determine base branch\", firstCommitID.String(), mergeRequest.IID))",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 828
            },
            {
              "content": "\t\t\t\tfailureCount++",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 829
            },
            {
              "content": "\t\t\t\tcontinue",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 830
            },
            {
              "content": "\t\t\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 831
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 810,
              "new_line_no": 832
            },
            {
              "content": "\t\t\t\t\t\tcontinue",
              "line_type": "deleted",
              "old_line_no": 811,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 812,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t// Checkout and create the temporary target branch",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 833
            },
            {
              "content": "\t\t\tlogger.Trace(\"creating temporary target branch\", \"mr_id\", mergeRequest.IID, \"branch\", targetBranch, \"base_commit\", baseCommitHash.String())",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 834
            },
            {
              "content": "\t\t\tif err = worktree.Checkout(\u0026git.CheckoutOptions{",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 835
            },
            {
              "content": "\t\t\t\tCreate: true,",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 836
            },
            {
              "content": "\t\t\t\tForce:  true,",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 837
            },
            {
              "content": "\t\t\t\tBranch: plumbing.NewBranchReferenceName(targetBranch),",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 838
            },
            {
              "content": "\t\t\t\tHash:   baseCommitHash,",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 839
            },
            {
              "content": "\t\t\t}); err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 840
            },
            {
              "content": "\t\t\t\tsendErr(fmt.Errorf(\"checking out temporary target branch %s for MR %d: %w\", targetBranch, mergeRequest.IID, err))",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 841
            },
            {
              "content": "\t\t\t\tfailureCount++",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 842
            },
            {
              "content": "\t\t\t\tcontinue",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 843
            },
            {
              "content": "\t\t\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 844
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 813,
              "new_line_no": 845
            },
            {
              "content": "\t\t\t\t\tif startCommitParent == nil {",
              "line_type": "deleted",
              "old_line_no": 814,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tsendErr(fmt.Errorf(\"identifying suitable parent of start commit %s for merge request %d\", mergeRequestCommits[0].ShortID, mergeRequest.IID))",
              "line_type": "deleted",
              "old_line_no": 815,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tfailureCount++",
              "line_type": "deleted",
              "old_line_no": 816,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 817,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t// Checkout and create the temporary source branch at the last commit of the MR",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 846
            },
            {
              "content": "\t\t\tlastCommitID := plumbing.NewHash(mrCommits[len(mrCommits)-1].ID)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 847
            },
            {
              "content": "\t\t\tlogger.Trace(\"creating temporary source branch\", \"mr_id\", mergeRequest.IID, \"branch\", sourceBranch, \"head_commit\", lastCommitID.String())",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 848
            },
            {
              "content": "\t\t\tif err = worktree.Checkout(\u0026git.CheckoutOptions{",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 849
            },
            {
              "content": "\t\t\t\tCreate: true,",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 850
            },
            {
              "content": "\t\t\t\tForce:  true,",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 851
            },
            {
              "content": "\t\t\t\tBranch: plumbing.NewBranchReferenceName(sourceBranch),",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 852
            },
            {
              "content": "\t\t\t\tHash:   lastCommitID,",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 853
            },
            {
              "content": "\t\t\t}); err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 854
            },
            {
              "content": "\t\t\t\tsendErr(fmt.Errorf(\"checking out temporary source branch %s for MR %d: %w\", sourceBranch, mergeRequest.IID, err))",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 855
            },
            {
              "content": "\t\t\t\tfailureCount++",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 856
            },
            {
              "content": "\t\t\t\tcontinue",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 857
            },
            {
              "content": "\t\t\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 858
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 818,
              "new_line_no": 859
            },
            {
              "content": "\t\t\t\t\tlogger.Trace(\"creating target branch for merged/closed merge request\", \"name\", gitlabPath[1], \"group\", gitlabPath[0], \"project_id\", project.ID, \"merge_request_id\", mergeRequest.IID, \"branch\", mergeRequest.TargetBranch, \"sha\", startCommitParent.Hash)",
              "line_type": "deleted",
              "old_line_no": 819,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tif err = worktree.Checkout(\u0026git.CheckoutOptions{",
              "line_type": "deleted",
              "old_line_no": 820,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tCreate: true,",
              "line_type": "deleted",
              "old_line_no": 821,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tForce:  true,",
              "line_type": "deleted",
              "old_line_no": 822,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tBranch: plumbing.NewBranchReferenceName(mergeRequest.TargetBranch),",
              "line_type": "deleted",
              "old_line_no": 823,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tHash:   startCommitParent.Hash,",
              "line_type": "deleted",
              "old_line_no": 824,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t}); err != nil {",
              "line_type": "deleted",
              "old_line_no": 825,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tsendErr(fmt.Errorf(\"checking out temporary target branch: %v\", err))",
              "line_type": "deleted",
              "old_line_no": 826,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tfailureCount++",
              "line_type": "deleted",
              "old_line_no": 827,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tcontinue",
              "line_type": "deleted",
              "old_line_no": 828,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 829,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 830,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t// Push temporary branches to GitHub so they can be referenced by the PR",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 860
            },
            {
              "content": "\t\t\tgithubTargetURLWithCredentials := fmt.Sprintf(\"https://%s:%s@%s/%s/%s\", cfg.GithubUser, cfg.GithubToken, cfg.GithubDomain, githubOwner, githubRepoName)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 861
            },
            {
              "content": "\t\t\tlogger.Debug(\"pushing temporary branches to GitHub\", \"mr_id\", mergeRequest.IID, \"source\", sourceBranch, \"target\", targetBranch)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 862
            },
            {
              "content": "",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 863
            },
            {
              "content": "\t\t\t// Add temporary remote for these specific branches",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 864
            },
            {
              "content": "\t\t\ttempRemoteName := fmt.Sprintf(\"github-temp-mr-%d\", mergeRequest.IID)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 865
            },
            {
              "content": "\t\t\tif _, err = repo.CreateRemote(\u0026config.RemoteConfig{",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 866
            },
            {
              "content": "\t\t\t\tName: tempRemoteName,",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 867
            },
            {
              "content": "\t\t\t\tURLs: []string{githubTargetURLWithCredentials},",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 868
            },
            {
              "content": "\t\t\t}); err != nil \u0026\u0026 !strings.Contains(err.Error(), \"remote already exists\") {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 869
            },
            {
              "content": "\t\t\t\tsendErr(fmt.Errorf(\"creating temporary remote %s: %w\", tempRemoteName, err))",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 870
            },
            {
              "content": "\t\t\t\tfailureCount++",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 871
            },
            {
              "content": "\t\t\t\tcontinue",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 872
            },
            {
              "content": "\t\t\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 873
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 831,
              "new_line_no": 874
            },
            {
              "content": "\t\t\t\tendHash := plumbing.NewHash(mergeRequestCommits[len(mergeRequestCommits)-1].ID)",
              "line_type": "deleted",
              "old_line_no": 832,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tlogger.Trace(\"creating source branch for merged/closed merge request\", \"name\", gitlabPath[1], \"group\", gitlabPath[0], \"project_id\", project.ID, \"merge_request_id\", mergeRequest.IID, \"branch\", mergeRequest.SourceBranch, \"sha\", endHash)",
              "line_type": "deleted",
              "old_line_no": 833,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tif err = worktree.Checkout(\u0026git.CheckoutOptions{",
              "line_type": "deleted",
              "old_line_no": 834,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tCreate: true,",
              "line_type": "deleted",
              "old_line_no": 835,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tForce:  true,",
              "line_type": "deleted",
              "old_line_no": 836,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tBranch: plumbing.NewBranchReferenceName(mergeRequest.SourceBranch),",
              "line_type": "deleted",
              "old_line_no": 837,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tHash:   endHash,",
              "line_type": "deleted",
              "old_line_no": 838,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t}); err != nil {",
              "line_type": "deleted",
              "old_line_no": 839,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tsendErr(fmt.Errorf(\"checking out temporary source branch: %v\", err))",
              "line_type": "deleted",
              "old_line_no": 840,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tfailureCount++",
              "line_type": "deleted",
              "old_line_no": 841,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tcontinue",
              "line_type": "deleted",
              "old_line_no": 842,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tif err = repo.PushContext(ctx, \u0026git.PushOptions{",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 875
            },
            {
              "content": "\t\t\t\tRemoteName: tempRemoteName,",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 876
            },
            {
              "content": "\t\t\t\tRefSpecs: []config.RefSpec{",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 877
            },
            {
              "content": "\t\t\t\t\tconfig.RefSpec(fmt.Sprintf(\"refs/heads/%s:refs/heads/%s\", sourceBranch, sourceBranch)),",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 878
            },
            {
              "content": "\t\t\t\t\tconfig.RefSpec(fmt.Sprintf(\"refs/heads/%s:refs/heads/%s\", targetBranch, targetBranch)),",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 879
            },
            {
              "content": "\t\t\t\t},",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 880
            },
            {
              "content": "\t\t\t\tForce: true,",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 881
            },
            {
              "content": "\t\t\t}); err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 882
            },
            {
              "content": "\t\t\t\tsendErr(fmt.Errorf(\"pushing temporary branches for MR %d: %w\", mergeRequest.IID, err))",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 883
            },
            {
              "content": "\t\t\t\tfailureCount++",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 884
            },
            {
              "content": "\t\t\t\tcontinue",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 885
            },
            {
              "content": "\t\t\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 886
            },
            {
              "content": "\t\t\tdefer func(tempSourceBranch, tempTargetBranch string) {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 887
            },
            {
              "content": "\t\t\t\t// Attempt to clean up temporary branches on GitHub after PR creation",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 888
            },
            {
              "content": "\t\t\t\tlogger.Debug(\"attempting to delete temporary branches on GitHub\", \"source\", tempSourceBranch, \"target\", tempTargetBranch)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 889
            },
            {
              "content": "\t\t\t\t// Need to delete via GitHub API as `go-git` push doesn't support deleting remotes",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 890
            },
            {
              "content": "\t\t\t\tif _, err := gh.Git.DeleteRef(ctx, githubOwner, githubRepoName, \"heads/\"+tempSourceBranch); err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 891
            },
            {
              "content": "\t\t\t\t\tlogger.Warn(\"failed to delete temporary source branch on GitHub\", \"branch\", tempSourceBranch, \"err\", err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 892
            },
            {
              "content": "\t\t\t\t}",
              "line_type": "context",
              "old_line_no": 843,
              "new_line_no": 893
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 844,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tlogger.Debug(\"pushing branches for merged/closed merge request\", \"owner\", githubPath[0], \"repo\", githubPath[1], \"source_branch\", mergeRequest.SourceBranch, \"target_branch\", mergeRequest.TargetBranch)",
              "line_type": "deleted",
              "old_line_no": 845,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tif err = repo.PushContext(ctx, \u0026git.PushOptions{",
              "line_type": "deleted",
              "old_line_no": 846,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tRemoteName: \"github\",",
              "line_type": "deleted",
              "old_line_no": 847,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tRefSpecs: []config.RefSpec{",
              "line_type": "deleted",
              "old_line_no": 848,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tconfig.RefSpec(fmt.Sprintf(\"refs/heads/%[1]s:refs/heads/%[1]s\", mergeRequest.SourceBranch)),",
              "line_type": "deleted",
              "old_line_no": 849,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tconfig.RefSpec(fmt.Sprintf(\"refs/heads/%[1]s:refs/heads/%[1]s\", mergeRequest.TargetBranch)),",
              "line_type": "deleted",
              "old_line_no": 850,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t},",
              "line_type": "deleted",
              "old_line_no": 851,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tForce: true,",
              "line_type": "deleted",
              "old_line_no": 852,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t}); err != nil {",
              "line_type": "deleted",
              "old_line_no": 853,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tupToDateError := errors.New(\"already up-to-date\")",
              "line_type": "deleted",
              "old_line_no": 854,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tif errors.As(err, \u0026upToDateError) {",
              "line_type": "deleted",
              "old_line_no": 855,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tlogger.Trace(\"branch already exists and is up-to-date on GitHub\", \"owner\", githubPath[0], \"repo\", githubPath[1], \"source_branch\", mergeRequest.SourceBranch, \"target_branch\", mergeRequest.TargetBranch)",
              "line_type": "deleted",
              "old_line_no": 856,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t} else {",
              "line_type": "deleted",
              "old_line_no": 857,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tsendErr(fmt.Errorf(\"pushing temporary branches to github: %v\", err))",
              "line_type": "deleted",
              "old_line_no": 858,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tfailureCount++",
              "line_type": "deleted",
              "old_line_no": 859,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tcontinue",
              "line_type": "deleted",
              "old_line_no": 860,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 861,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tif _, err := gh.Git.DeleteRef(ctx, githubOwner, githubRepoName, \"heads/\"+tempTargetBranch); err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 894
            },
            {
              "content": "\t\t\t\t\tlogger.Warn(\"failed to delete temporary target branch on GitHub\", \"branch\", tempTargetBranch, \"err\", err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 895
            },
            {
              "content": "\t\t\t\t}",
              "line_type": "context",
              "old_line_no": 862,
              "new_line_no": 896
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 863,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t// We will clean up these temporary branches after configuring and closing the pull request",
              "line_type": "deleted",
              "old_line_no": 864,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tcleanUpBranch = true",
              "line_type": "deleted",
              "old_line_no": 865,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t}(sourceBranch, targetBranch)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 897
            },
            {
              "content": "\t\t} else if cfg.RenameMasterToMain {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 898
            },
            {
              "content": "\t\t\t// Adjust source/target branches if master was renamed to main",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 899
            },
            {
              "content": "\t\t\tif sourceBranch == \"master\" {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 900
            },
            {
              "content": "\t\t\t\tsourceBranch = \"main\"",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 901
            },
            {
              "content": "\t\t\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 902
            },
            {
              "content": "\t\t\tif targetBranch == \"master\" {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 903
            },
            {
              "content": "\t\t\t\ttargetBranch = \"main\"",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 904
            },
            {
              "content": "\t\t\t}",
              "line_type": "context",
              "old_line_no": 866,
              "new_line_no": 905
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 867,
              "new_line_no": 906
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 868,
              "new_line_no": 907
            },
            {
              "content": "\t\tif renameMasterToMain \u0026\u0026 mergeRequest.TargetBranch == \"master\" {",
              "line_type": "deleted",
              "old_line_no": 869,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tlogger.Trace(\"changing target branch from master to main\", \"name\", gitlabPath[1], \"group\", gitlabPath[0], \"project_id\", project.ID, \"merge_request_id\", mergeRequest.IID)",
              "line_type": "deleted",
              "old_line_no": 870,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tmergeRequest.TargetBranch = \"main\"",
              "line_type": "deleted",
              "old_line_no": 871,
              "new_line_no": 0
            },
            {
              "content": "\t\t// Prepare PR title and body",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 908
            },
            {
              "content": "\t\tprTitle := mergeRequest.Title",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 909
            },
            {
              "content": "\t\tif prTitle == \"\" {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 910
            },
            {
              "content": "\t\t\tprTitle = fmt.Sprintf(\"Migrated MR %d: %s\", mergeRequest.IID, mergeRequest.SourceBranch)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 911
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 872,
              "new_line_no": 912
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 873,
              "new_line_no": 913
            },
            {
              "content": "\t\tgithubAuthorName := mergeRequest.Author.Name",
              "line_type": "deleted",
              "old_line_no": 874,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 875,
              "new_line_no": 0
            },
            {
              "content": "\t\tauthor, err := getGitlabUser(mergeRequest.Author.Username)",
              "line_type": "deleted",
              "old_line_no": 876,
              "new_line_no": 0
            },
            {
              "content": "\t\tif err != nil {",
              "line_type": "deleted",
              "old_line_no": 877,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tsendErr(fmt.Errorf(\"retrieving gitlab user: %v\", err))",
              "line_type": "deleted",
              "old_line_no": 878,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tfailureCount++",
              "line_type": "deleted",
              "old_line_no": 879,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tcontinue",
              "line_type": "deleted",
              "old_line_no": 880,
              "new_line_no": 0
            },
            {
              "content": "\t\t}",
              "line_type": "deleted",
              "old_line_no": 881,
              "new_line_no": 0
            },
            {
              "content": "\t\tif author.WebsiteURL != \"\" {",
              "line_type": "deleted",
              "old_line_no": 882,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tgithubAuthorName = \"@\" + strings.TrimPrefix(strings.ToLower(author.WebsiteURL), \"https://github.com/\")",
              "line_type": "deleted",
              "old_line_no": 883,
              "new_line_no": 0
            },
            {
              "content": "\t\tprBody := fmt.Sprintf(\"Migrated from GitLab: %s\\n\\n\", mergeRequest.WebURL)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 914
            },
            {
              "content": "\t\tprBody += fmt.Sprintf(\"**GitLab MR Number** | %d\\n\", mergeRequest.IID)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 915
            },
            {
              "content": "\t\tif mergeRequest.Description != \"\" {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 916
            },
            {
              "content": "\t\t\tprBody += \"\\n\" + mergeRequest.Description",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 917
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 884,
              "new_line_no": 918
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 885,
              "new_line_no": 919
            },
            {
              "content": "\t\toriginalState := \"\"",
              "line_type": "deleted",
              "old_line_no": 886,
              "new_line_no": 0
            },
            {
              "content": "\t\tif !strings.EqualFold(mergeRequest.State, \"opened\") {",
              "line_type": "deleted",
              "old_line_no": 887,
              "new_line_no": 0
            },
            {
              "content": "\t\t\toriginalState = fmt.Sprintf(\"\u003e This merge request was originally **%s** on GitLab\", mergeRequest.State)",
              "line_type": "deleted",
              "old_line_no": 888,
              "new_line_no": 0
            },
            {
              "content": "\t\t// Create new GitHub Pull Request",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 920
            },
            {
              "content": "\t\tnewPR := github.NewPullRequest{",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 921
            },
            {
              "content": "\t\t\tTitle: pointer(prTitle),",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 922
            },
            {
              "content": "\t\t\tHead:  pointer(sourceBranch),",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 923
            },
            {
              "content": "\t\t\tBase:  pointer(targetBranch),",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 924
            },
            {
              "content": "\t\t\tBody:  pointer(prBody),",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 925
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 889,
              "new_line_no": 926
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 890,
              "new_line_no": 927
            },
            {
              "content": "\t\tlogger.Debug(\"determining merge request approvers\", \"name\", gitlabPath[1], \"group\", gitlabPath[0], \"project_id\", project.ID, \"merge_request_id\", mergeRequest.IID)",
              "line_type": "deleted",
              "old_line_no": 891,
              "new_line_no": 0
            },
            {
              "content": "\t\tapprovers := make([]string, 0)",
              "line_type": "deleted",
              "old_line_no": 892,
              "new_line_no": 0
            },
            {
              "content": "\t\tawards, _, err := gl.AwardEmoji.ListMergeRequestAwardEmoji(project.ID, mergeRequest.IID, \u0026gitlab.ListAwardEmojiOptions{PerPage: 100})",
              "line_type": "deleted",
              "old_line_no": 893,
              "new_line_no": 0
            },
            {
              "content": "\t\tif err != nil {",
              "line_type": "deleted",
              "old_line_no": 894,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tsendErr(fmt.Errorf(\"listing merge request awards: %v\", err))",
              "line_type": "deleted",
              "old_line_no": 895,
              "new_line_no": 0
            },
            {
              "content": "\t\t} else {",
              "line_type": "deleted",
              "old_line_no": 896,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tfor _, award := range awards {",
              "line_type": "deleted",
              "old_line_no": 897,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tif award.Name == \"thumbsup\" {",
              "line_type": "deleted",
              "old_line_no": 898,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tapprover := award.User.Name",
              "line_type": "deleted",
              "old_line_no": 899,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 900,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tapproverUser, err := getGitlabUser(award.User.Username)",
              "line_type": "deleted",
              "old_line_no": 901,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tif err != nil {",
              "line_type": "deleted",
              "old_line_no": 902,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tsendErr(fmt.Errorf(\"retrieving gitlab user: %v\", err))",
              "line_type": "deleted",
              "old_line_no": 903,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tcontinue",
              "line_type": "deleted",
              "old_line_no": 904,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 905,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tif approverUser.WebsiteURL != \"\" {",
              "line_type": "deleted",
              "old_line_no": 906,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tapprover = \"@\" + strings.TrimPrefix(strings.ToLower(approverUser.WebsiteURL), \"https://github.com/\")",
              "line_type": "deleted",
              "old_line_no": 907,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 908,
              "new_line_no": 0
            },
            {
              "content": "\t\tlogger.Info(\"creating new GitHub pull request\",",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 928
            },
            {
              "content": "\t\t\t\"owner\", githubOwner, \"repo\", githubRepoName,",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 929
            },
            {
              "content": "\t\t\t\"source\", sourceBranch, \"target\", targetBranch,",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 930
            },
            {
              "content": "\t\t\t\"mr_id\", mergeRequest.IID)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 931
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 909,
              "new_line_no": 932
            },
            {
              "content": "\t\t\t\t\tapprovers = append(approvers, approver)",
              "line_type": "deleted",
              "old_line_no": 910,
              "new_line_no": 0
            },
            {
              "content": "\t\tcreatedPR, _, err := gh.PullRequests.Create(ctx, githubOwner, githubRepoName, \u0026newPR)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 933
            },
            {
              "content": "\t\tif err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 934
            },
            {
              "content": "\t\t\tsendErr(fmt.Errorf(\"creating pull request for GitLab MR %d: %w\", mergeRequest.IID, err))",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 935
            },
            {
              "content": "\t\t\tfailureCount++",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 936
            },
            {
              "content": "\t\t\tif cleanUpBranch {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 937
            },
            {
              "content": "\t\t\t\t// Ensure temporary branches are cleaned up even on PR creation failure",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 938
            },
            {
              "content": "\t\t\t\tlogger.Warn(\"PR creation failed, attempting to clean up temporary branches\", \"mr_id\", mergeRequest.IID)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 939
            },
            {
              "content": "\t\t\t\tif _, deleteErr := gh.Git.DeleteRef(ctx, githubOwner, githubRepoName, \"heads/\"+sourceBranch); deleteErr != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 940
            },
            {
              "content": "\t\t\t\t\tlogger.Warn(\"failed to delete temporary source branch\", \"branch\", sourceBranch, \"err\", deleteErr)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 941
            },
            {
              "content": "\t\t\t\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 942
            },
            {
              "content": "\t\t\t\tif _, deleteErr := gh.Git.DeleteRef(ctx, githubOwner, githubRepoName, \"heads/\"+targetBranch); deleteErr != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 943
            },
            {
              "content": "\t\t\t\t\tlogger.Warn(\"failed to delete temporary target branch\", \"branch\", targetBranch, \"err\", deleteErr)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 944
            },
            {
              "content": "\t\t\t\t}",
              "line_type": "context",
              "old_line_no": 911,
              "new_line_no": 945
            },
            {
              "content": "\t\t\t}",
              "line_type": "context",
              "old_line_no": 912,
              "new_line_no": 946
            },
            {
              "content": "\t\t\tcontinue",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 947
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 913,
              "new_line_no": 948
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 914,
              "new_line_no": 949
            },
            {
              "content": "\t\tdescription := mergeRequest.Description",
              "line_type": "deleted",
              "old_line_no": 915,
              "new_line_no": 0
            },
            {
              "content": "\t\tif strings.TrimSpace(description) == \"\" {",
              "line_type": "deleted",
              "old_line_no": 916,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tdescription = \"_No description_\"",
              "line_type": "deleted",
              "old_line_no": 917,
              "new_line_no": 0
            },
            {
              "content": "\t\t}",
              "line_type": "deleted",
              "old_line_no": 918,
              "new_line_no": 0
            },
            {
              "content": "\t\tlogger.Info(\"successfully created GitHub pull request\", \"mr_id\", mergeRequest.IID, \"github_pr\", createdPR.GetNumber())",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 950
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 919,
              "new_line_no": 951
            },
            {
              "content": "\t\tslices.Sort(approvers)",
              "line_type": "deleted",
              "old_line_no": 920,
              "new_line_no": 0
            },
            {
              "content": "\t\tapproval := strings.Join(approvers, \", \")",
              "line_type": "deleted",
              "old_line_no": 921,
              "new_line_no": 0
            },
            {
              "content": "\t\tif approval == \"\" {",
              "line_type": "deleted",
              "old_line_no": 922,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tapproval = \"_No approvers_\"",
              "line_type": "deleted",
              "old_line_no": 923,
              "new_line_no": 0
            },
            {
              "content": "\t\t// Close PR if original MR was merged or closed",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 952
            },
            {
              "content": "\t\tif strings.EqualFold(mergeRequest.State, \"merged\") || strings.EqualFold(mergeRequest.State, \"closed\") {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 953
            },
            {
              "content": "\t\t\tlogger.Debug(\"closing GitHub pull request as original GitLab MR was %q\", \"github_pr\", createdPR.GetNumber(), \"state\", mergeRequest.State)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 954
            },
            {
              "content": "\t\t\tupdateState := \"closed\"",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 955
            },
            {
              "content": "\t\t\tupdatePR := github.PullRequest{",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 956
            },
            {
              "content": "\t\t\t\tState: \u0026updateState,",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 957
            },
            {
              "content": "\t\t\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 958
            },
            {
              "content": "\t\t\t_, _, err := gh.PullRequests.Edit(ctx, githubOwner, githubRepoName, createdPR.GetNumber(), \u0026updatePR)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 959
            },
            {
              "content": "\t\t\tif err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 960
            },
            {
              "content": "\t\t\t\tsendErr(fmt.Errorf(\"closing pull request %d: %w\", createdPR.GetNumber(), err))",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 961
            },
            {
              "content": "\t\t\t\t// Don't mark as failure here, as the PR was created",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 962
            },
            {
              "content": "\t\t\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 963
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 924,
              "new_line_no": 964
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 925,
              "new_line_no": 965
            },
            {
              "content": "\t\tcloseDate := \"\"",
              "line_type": "deleted",
              "old_line_no": 926,
              "new_line_no": 0
            },
            {
              "content": "\t\tif mergeRequest.State == \"closed\" \u0026\u0026 mergeRequest.ClosedAt != nil {",
              "line_type": "deleted",
              "old_line_no": 927,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tcloseDate = fmt.Sprintf(\"\\n\u003e | **Date Originally Closed** | %s |\", mergeRequest.ClosedAt.Format(dateFormat))",
              "line_type": "deleted",
              "old_line_no": 928,
              "new_line_no": 0
            },
            {
              "content": "\t\t} else if mergeRequest.State == \"merged\" \u0026\u0026 mergeRequest.MergedAt != nil {",
              "line_type": "deleted",
              "old_line_no": 929,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tcloseDate = fmt.Sprintf(\"\\n\u003e | **Date Originally Merged** | %s |\", mergeRequest.MergedAt.Format(dateFormat))",
              "line_type": "deleted",
              "old_line_no": 930,
              "new_line_no": 0
            },
            {
              "content": "\t\t}",
              "line_type": "deleted",
              "old_line_no": 931,
              "new_line_no": 0
            },
            {
              "content": "\t\tsuccessCount++",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 966
            },
            {
              "content": "\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 967
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 932,
              "new_line_no": 968
            },
            {
              "content": "\t\tmergeRequestTitle := mergeRequest.Title",
              "line_type": "deleted",
              "old_line_no": 933,
              "new_line_no": 0
            },
            {
              "content": "\t\tif len(mergeRequestTitle) \u003e 40 {",
              "line_type": "deleted",
              "old_line_no": 934,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tmergeRequestTitle = mergeRequestTitle[:40] + \"...\"",
              "line_type": "deleted",
              "old_line_no": 935,
              "new_line_no": 0
            },
            {
              "content": "\t\t}",
              "line_type": "deleted",
              "old_line_no": 936,
              "new_line_no": 0
            },
            {
              "content": "\tlogger.Info(\"pull request migration complete\",",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 969
            },
            {
              "content": "\t\t\"gitlab_project\", project.PathWithNamespace,",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 970
            },
            {
              "content": "\t\t\"total\", totalCount, \"successful\", successCount, \"failed\", failureCount)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 971
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 937,
              "new_line_no": 972
            },
            {
              "content": "\t\tbody := fmt.Sprintf(`\u003e [!NOTE]",
              "line_type": "deleted",
              "old_line_no": 938,
              "new_line_no": 0
            },
            {
              "content": "\u003e This pull request was migrated from GitLab",
              "line_type": "deleted",
              "old_line_no": 939,
              "new_line_no": 0
            },
            {
              "content": "\u003e",
              "line_type": "deleted",
              "old_line_no": 940,
              "new_line_no": 0
            },
            {
              "content": "\u003e |      |      |",
              "line_type": "deleted",
              "old_line_no": 941,
              "new_line_no": 0
            },
            {
              "content": "\u003e | ---- | ---- |",
              "line_type": "deleted",
              "old_line_no": 942,
              "new_line_no": 0
            },
            {
              "content": "\u003e | **Original Author** | %[1]s |",
              "line_type": "deleted",
              "old_line_no": 943,
              "new_line_no": 0
            },
            {
              "content": "\u003e | **GitLab Project** | [%[4]s/%[5]s](https://%[10]s/%[4]s/%[5]s) |",
              "line_type": "deleted",
              "old_line_no": 944,
              "new_line_no": 0
            },
            {
              "content": "\u003e | **GitLab Merge Request** | [%[11]s](https://%[10]s/%[4]s/%[5]s/merge_requests/%[2]d) |",
              "line_type": "deleted",
              "old_line_no": 945,
              "new_line_no": 0
            },
            {
              "content": "\u003e | **GitLab MR Number** | [%[2]d](https://%[10]s/%[4]s/%[5]s/merge_requests/%[2]d) |",
              "line_type": "deleted",
              "old_line_no": 946,
              "new_line_no": 0
            },
            {
              "content": "\u003e | **Date Originally Opened** | %[6]s |%[7]s",
              "line_type": "deleted",
              "old_line_no": 947,
              "new_line_no": 0
            },
            {
              "content": "\u003e | **Approved on GitLab by** | %[8]s |",
              "line_type": "deleted",
              "old_line_no": 948,
              "new_line_no": 0
            },
            {
              "content": "\u003e |      |      |",
              "line_type": "deleted",
              "old_line_no": 949,
              "new_line_no": 0
            },
            {
              "content": "\u003e",
              "line_type": "deleted",
              "old_line_no": 950,
              "new_line_no": 0
            },
            {
              "content": "%[9]s",
              "line_type": "deleted",
              "old_line_no": 951,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 952,
              "new_line_no": 0
            },
            {
              "content": "## Original Description",
              "line_type": "deleted",
              "old_line_no": 953,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 954,
              "new_line_no": 0
            },
            {
              "content": "%[3]s`, githubAuthorName, mergeRequest.IID, description, gitlabPath[0], gitlabPath[1], mergeRequest.CreatedAt.Format(dateFormat), closeDate, approval, originalState, gitlabDomain, mergeRequestTitle)",
              "line_type": "deleted",
              "old_line_no": 955,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 956,
              "new_line_no": 0
            },
            {
              "content": "\t\tif pullRequest == nil {",
              "line_type": "deleted",
              "old_line_no": 957,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tlogger.Info(\"creating pull request\", \"owner\", githubPath[0], \"repo\", githubPath[1], \"source_branch\", mergeRequest.SourceBranch, \"target_branch\", mergeRequest.TargetBranch)",
              "line_type": "deleted",
              "old_line_no": 958,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tnewPullRequest := github.NewPullRequest{",
              "line_type": "deleted",
              "old_line_no": 959,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tTitle:               \u0026mergeRequest.Title,",
              "line_type": "deleted",
              "old_line_no": 960,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tHead:                \u0026mergeRequest.SourceBranch,",
              "line_type": "deleted",
              "old_line_no": 961,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tBase:                \u0026mergeRequest.TargetBranch,",
              "line_type": "deleted",
              "old_line_no": 962,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tBody:                \u0026body,",
              "line_type": "deleted",
              "old_line_no": 963,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tMaintainerCanModify: pointer(true),",
              "line_type": "deleted",
              "old_line_no": 964,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tDraft:               \u0026mergeRequest.Draft,",
              "line_type": "deleted",
              "old_line_no": 965,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 966,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tif pullRequest, _, err = gh.PullRequests.Create(ctx, githubPath[0], githubPath[1], \u0026newPullRequest); err != nil {",
              "line_type": "deleted",
              "old_line_no": 967,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tsendErr(fmt.Errorf(\"creating pull request: %v\", err))",
              "line_type": "deleted",
              "old_line_no": 968,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tfailureCount++",
              "line_type": "deleted",
              "old_line_no": 969,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tcontinue",
              "line_type": "deleted",
              "old_line_no": 970,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 971,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 972,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tif mergeRequest.State == \"closed\" || mergeRequest.State == \"merged\" {",
              "line_type": "deleted",
              "old_line_no": 973,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tlogger.Debug(\"closing pull request\", \"owner\", githubPath[0], \"repo\", githubPath[1], \"pr_number\", pullRequest.GetNumber())",
              "line_type": "deleted",
              "old_line_no": 974,
              "new_line_no": 0
            },
            {
              "content": "\treturn nil",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 973
            },
            {
              "content": "}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 974
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 975,
              "new_line_no": 975
            },
            {
              "content": "\t\t\t\tpullRequest.State = pointer(\"closed\")",
              "line_type": "deleted",
              "old_line_no": 976,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tif pullRequest, _, err = gh.PullRequests.Edit(ctx, githubPath[0], githubPath[1], pullRequest.GetNumber(), pullRequest); err != nil {",
              "line_type": "deleted",
              "old_line_no": 977,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tsendErr(fmt.Errorf(\"updating pull request: %v\", err))",
              "line_type": "deleted",
              "old_line_no": 978,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tfailureCount++",
              "line_type": "deleted",
              "old_line_no": 979,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tcontinue",
              "line_type": "deleted",
              "old_line_no": 980,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 981,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 982,
              "new_line_no": 0
            },
            {
              "content": "// findGitlabProject is a helper to find a GitLab project by its full path.",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 976
            },
            {
              "content": "func findGitlabProject(ctx context.Context, glClient *gitlab.Client, projectPath string) (*gitlab.Project, error) {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 977
            },
            {
              "content": "\tgitlabPathParts := strings.Split(projectPath, \"/\")",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 978
            },
            {
              "content": "\tif len(gitlabPathParts) \u003c 2 {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 979
            },
            {
              "content": "\t\treturn nil, fmt.Errorf(\"invalid GitLab project path format: %q. Expected 'group/project'\", projectPath)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 980
            },
            {
              "content": "\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 981
            },
            {
              "content": "\tprojectName := gitlabPathParts[1]",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 982
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 983,
              "new_line_no": 983
            },
            {
              "content": "\t\t} else {",
              "line_type": "deleted",
              "old_line_no": 984,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tvar newState *string",
              "line_type": "deleted",
              "old_line_no": 985,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tswitch mergeRequest.State {",
              "line_type": "deleted",
              "old_line_no": 986,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tcase \"opened\":",
              "line_type": "deleted",
              "old_line_no": 987,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tnewState = pointer(\"open\")",
              "line_type": "deleted",
              "old_line_no": 988,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tcase \"closed\", \"merged\":",
              "line_type": "deleted",
              "old_line_no": 989,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tnewState = pointer(\"closed\")",
              "line_type": "deleted",
              "old_line_no": 990,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 991,
              "new_line_no": 0
            },
            {
              "content": "\tlogger.Debug(\"searching for GitLab project\", \"path\", projectPath)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 984
            },
            {
              "content": "\t// GitLab API ListProjects doesn't have a direct \"path\" filter, search by name and then filter",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 985
            },
            {
              "content": "\topts := \u0026gitlab.ListProjectsOptions{Search: \u0026projectName}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 986
            },
            {
              "content": "\tprojectResults, _, err := glClient.Projects.ListProjects(opts, gitlab.WithContext(ctx))",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 987
            },
            {
              "content": "\tif err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 988
            },
            {
              "content": "\t\treturn nil, fmt.Errorf(\"listing GitLab projects with search term %q: %w\", projectName, err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 989
            },
            {
              "content": "\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 990
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 992,
              "new_line_no": 991
            },
            {
              "content": "\t\t\tif (newState != nil \u0026\u0026 (pullRequest.State == nil || *pullRequest.State != *newState)) ||",
              "line_type": "deleted",
              "old_line_no": 993,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t(pullRequest.Title == nil || *pullRequest.Title != mergeRequest.Title) ||",
              "line_type": "deleted",
              "old_line_no": 994,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t(pullRequest.Body == nil || *pullRequest.Body != body) ||",
              "line_type": "deleted",
              "old_line_no": 995,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t(pullRequest.Draft == nil || *pullRequest.Draft != mergeRequest.Draft) {",
              "line_type": "deleted",
              "old_line_no": 996,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tlogger.Info(\"updating pull request\", \"owner\", githubPath[0], \"repo\", githubPath[1], \"pr_number\", pullRequest.GetNumber())",
              "line_type": "deleted",
              "old_line_no": 997,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 998,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tpullRequest.Title = \u0026mergeRequest.Title",
              "line_type": "deleted",
              "old_line_no": 999,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tpullRequest.Body = \u0026body",
              "line_type": "deleted",
              "old_line_no": 1000,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tpullRequest.Draft = \u0026mergeRequest.Draft",
              "line_type": "deleted",
              "old_line_no": 1001,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tpullRequest.State = newState",
              "line_type": "deleted",
              "old_line_no": 1002,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tpullRequest.MaintainerCanModify = nil",
              "line_type": "deleted",
              "old_line_no": 1003,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tif pullRequest, _, err = gh.PullRequests.Edit(ctx, githubPath[0], githubPath[1], pullRequest.GetNumber(), pullRequest); err != nil {",
              "line_type": "deleted",
              "old_line_no": 1004,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tsendErr(fmt.Errorf(\"updating pull request: %v\", err))",
              "line_type": "deleted",
              "old_line_no": 1005,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tfailureCount++",
              "line_type": "deleted",
              "old_line_no": 1006,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tcontinue",
              "line_type": "deleted",
              "old_line_no": 1007,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 1008,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t} else {",
              "line_type": "deleted",
              "old_line_no": 1009,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tlogger.Trace(\"existing pull request is up-to-date\", \"owner\", githubPath[0], \"repo\", githubPath[1], \"pr_number\", pullRequest.GetNumber())",
              "line_type": "deleted",
              "old_line_no": 1010,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 1011,
              "new_line_no": 0
            },
            {
              "content": "\tfor _, item := range projectResults {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 992
            },
            {
              "content": "\t\tif item == nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 993
            },
            {
              "content": "\t\t\tcontinue",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 994
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 1012,
              "new_line_no": 995
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 1013,
              "new_line_no": 0
            },
            {
              "content": "\t\tif cleanUpBranch {",
              "line_type": "deleted",
              "old_line_no": 1014,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tlogger.Debug(\"deleting temporary branches for closed pull request\", \"owner\", githubPath[0], \"repo\", githubPath[1], \"pr_number\", pullRequest.GetNumber(), \"source_branch\", mergeRequest.SourceBranch, \"target_branch\", mergeRequest.TargetBranch)",
              "line_type": "deleted",
              "old_line_no": 1015,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tif err = repo.PushContext(ctx, \u0026git.PushOptions{",
              "line_type": "deleted",
              "old_line_no": 1016,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tRemoteName: \"github\",",
              "line_type": "deleted",
              "old_line_no": 1017,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tRefSpecs: []config.RefSpec{",
              "line_type": "deleted",
              "old_line_no": 1018,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tconfig.RefSpec(fmt.Sprintf(\":refs/heads/%s\", mergeRequest.SourceBranch)),",
              "line_type": "deleted",
              "old_line_no": 1019,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tconfig.RefSpec(fmt.Sprintf(\":refs/heads/%s\", mergeRequest.TargetBranch)),",
              "line_type": "deleted",
              "old_line_no": 1020,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t},",
              "line_type": "deleted",
              "old_line_no": 1021,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tForce: true,",
              "line_type": "deleted",
              "old_line_no": 1022,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t}); err != nil {",
              "line_type": "deleted",
              "old_line_no": 1023,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tupToDateError := errors.New(\"already up-to-date\")",
              "line_type": "deleted",
              "old_line_no": 1024,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tif errors.As(err, \u0026upToDateError) {",
              "line_type": "deleted",
              "old_line_no": 1025,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tlogger.Trace(\"branches already deleted on GitHub\", \"owner\", githubPath[0], \"repo\", githubPath[1], \"pr_number\", pullRequest.GetNumber(), \"source_branch\", mergeRequest.SourceBranch, \"target_branch\", mergeRequest.TargetBranch)",
              "line_type": "deleted",
              "old_line_no": 1026,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t} else {",
              "line_type": "deleted",
              "old_line_no": 1027,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tsendErr(fmt.Errorf(\"pushing branch deletions to github: %v\", err))",
              "line_type": "deleted",
              "old_line_no": 1028,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tfailureCount++",
              "line_type": "deleted",
              "old_line_no": 1029,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tcontinue",
              "line_type": "deleted",
              "old_line_no": 1030,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 1031,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 1032,
              "new_line_no": 0
            },
            {
              "content": "\t\tif item.PathWithNamespace == projectPath {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 996
            },
            {
              "content": "\t\t\tlogger.Debug(\"found GitLab project\", \"path\", projectPath, \"id\", item.ID)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 997
            },
            {
              "content": "\t\t\treturn item, nil",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 998
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 1033,
              "new_line_no": 999
            },
            {
              "content": "\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1000
            },
            {
              "content": "\treturn nil, fmt.Errorf(\"no matching GitLab project found for path: %q\", projectPath)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1001
            },
            {
              "content": "}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1002
            },
            {
              "content": "",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1003
            },
            {
              "content": "// listGitlabMergeRequests is a helper to list all merge requests for a given GitLab project.",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1004
            },
            {
              "content": "func listGitlabMergeRequests(ctx context.Context, glClient *gitlab.Client, projectID int) ([]*gitlab.MergeRequest, error) {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1005
            },
            {
              "content": "\tvar allMergeRequests []*gitlab.MergeRequest",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1006
            },
            {
              "content": "\topts := \u0026gitlab.ListProjectMergeRequestsOptions{",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1007
            },
            {
              "content": "\t\tOrderBy: pointer(\"created_at\"),",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1008
            },
            {
              "content": "\t\tSort:    pointer(\"asc\"),",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1009
            },
            {
              "content": "\t\tListOptions: gitlab.ListOptions{",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1010
            },
            {
              "content": "\t\t\tPerPage: 100, // GitLab default per page",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1011
            },
            {
              "content": "\t\t},",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1012
            },
            {
              "content": "\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1013
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 1034,
              "new_line_no": 1014
            },
            {
              "content": "\t\tvar comments []*gitlab.Note",
              "line_type": "deleted",
              "old_line_no": 1035,
              "new_line_no": 0
            },
            {
              "content": "\t\tskipComments := false",
              "line_type": "deleted",
              "old_line_no": 1036,
              "new_line_no": 0
            },
            {
              "content": "\t\topts := \u0026gitlab.ListMergeRequestNotesOptions{",
              "line_type": "deleted",
              "old_line_no": 1037,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tOrderBy: pointer(\"created_at\"),",
              "line_type": "deleted",
              "old_line_no": 1038,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tSort:    pointer(\"asc\"),",
              "line_type": "deleted",
              "old_line_no": 1039,
              "new_line_no": 0
            },
            {
              "content": "\tlogger.Debug(\"retrieving all GitLab merge requests\", \"project_id\", projectID)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1015
            },
            {
              "content": "\tfor {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1016
            },
            {
              "content": "\t\tresult, resp, err := glClient.MergeRequests.ListProjectMergeRequests(projectID, opts, gitlab.WithContext(ctx))",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1017
            },
            {
              "content": "\t\tif err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1018
            },
            {
              "content": "\t\t\treturn nil, fmt.Errorf(\"retrieving GitLab merge requests for project %d: %w\", projectID, err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1019
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 1040,
              "new_line_no": 1020
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 1041,
              "new_line_no": 1021
            },
            {
              "content": "\t\tlogger.Debug(\"retrieving GitLab merge request comments\", \"name\", gitlabPath[1], \"group\", gitlabPath[0], \"project_id\", project.ID, \"merge_request_id\", mergeRequest.IID)",
              "line_type": "deleted",
              "old_line_no": 1042,
              "new_line_no": 0
            },
            {
              "content": "\t\tfor {",
              "line_type": "deleted",
              "old_line_no": 1043,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tresult, resp, err := gl.Notes.ListMergeRequestNotes(project.ID, mergeRequest.IID, opts)",
              "line_type": "deleted",
              "old_line_no": 1044,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tif err != nil {",
              "line_type": "deleted",
              "old_line_no": 1045,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tsendErr(fmt.Errorf(\"listing merge request notes: %v\", err))",
              "line_type": "deleted",
              "old_line_no": 1046,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tskipComments = true",
              "line_type": "deleted",
              "old_line_no": 1047,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tbreak",
              "line_type": "deleted",
              "old_line_no": 1048,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 1049,
              "new_line_no": 0
            },
            {
              "content": "\t\tallMergeRequests = append(allMergeRequests, result...)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1022
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 1050,
              "new_line_no": 1023
            },
            {
              "content": "\t\t\tcomments = append(comments, result...)",
              "line_type": "deleted",
              "old_line_no": 1051,
              "new_line_no": 0
            },
            {
              "content": "\t\tif resp.NextPage == 0 {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1024
            },
            {
              "content": "\t\t\tbreak",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1025
            },
            {
              "content": "\t\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1026
            },
            {
              "content": "\t\topts.Page = resp.NextPage",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1027
            },
            {
              "content": "\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1028
            },
            {
              "content": "\treturn allMergeRequests, nil",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1029
            },
            {
              "content": "}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1030
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 1052,
              "new_line_no": 1031
            },
            {
              "content": "\t\t\tif resp.NextPage == 0 {",
              "line_type": "deleted",
              "old_line_no": 1053,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tbreak",
              "line_type": "deleted",
              "old_line_no": 1054,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 1055,
              "new_line_no": 0
            },
            {
              "content": "// listGitlabMergeRequestCommits is a helper to list all commits for a specific GitLab merge request.",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1032
            },
            {
              "content": "func listGitlabMergeRequestCommits(ctx context.Context, glClient *gitlab.Client, projectID, mergeRequestIID int) ([]*gitlab.Commit, error) {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1033
            },
            {
              "content": "\tvar allCommits []*gitlab.Commit",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1034
            },
            {
              "content": "\topts := \u0026gitlab.GetMergeRequestCommitsOptions{",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1035
            },
            {
              "content": "\t\tOrderBy: \"created_at\",",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1036
            },
            {
              "content": "\t\tSort:    \"asc\",",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1037
            },
            {
              "content": "\t\tListOptions: gitlab.ListOptions{",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1038
            },
            {
              "content": "\t\t\tPerPage: 100,",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1039
            },
            {
              "content": "\t\t},",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1040
            },
            {
              "content": "\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1041
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 1056,
              "new_line_no": 1042
            },
            {
              "content": "\t\t\topts.Page = resp.NextPage",
              "line_type": "deleted",
              "old_line_no": 1057,
              "new_line_no": 0
            },
            {
              "content": "\tlogger.Trace(\"retrieving commits for GitLab merge request\", \"project_id\", projectID, \"mr_iid\", mergeRequestIID)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1043
            },
            {
              "content": "\tfor {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1044
            },
            {
              "content": "\t\tcommits, resp, err := glClient.MergeRequests.GetMergeRequestCommits(projectID, mergeRequestIID, opts, gitlab.WithContext(ctx))",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1045
            },
            {
              "content": "\t\tif err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1046
            },
            {
              "content": "\t\t\treturn nil, fmt.Errorf(\"retrieving commits for GitLab merge request %d (project %d): %w\", mergeRequestIID, projectID, err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1047
            },
            {
              "content": "\t\t}",
              "line_type": "context",
              "old_line_no": 1058,
              "new_line_no": 1048
            },
            {
              "content": "\t\tallCommits = append(allCommits, commits...)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1049
            },
            {
              "content": "\t\tif resp.NextPage == 0 {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1050
            },
            {
              "content": "\t\t\tbreak",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1051
            },
            {
              "content": "\t\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1052
            },
            {
              "content": "\t\topts.Page = resp.NextPage",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1053
            },
            {
              "content": "\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1054
            },
            {
              "content": "\treturn allCommits, nil",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1055
            },
            {
              "content": "}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1056
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 1059,
              "new_line_no": 1057
            },
            {
              "content": "\t\tif skipComments {",
              "line_type": "deleted",
              "old_line_no": 1060,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tfailureCount++",
              "line_type": "deleted",
              "old_line_no": 1061,
              "new_line_no": 0
            },
            {
              "content": "\t\t} else {",
              "line_type": "deleted",
              "old_line_no": 1062,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tlogger.Debug(\"retrieving GitHub pull request comments\", \"owner\", githubPath[0], \"repo\", githubPath[1], \"pr_number\", pullRequest.GetNumber())",
              "line_type": "deleted",
              "old_line_no": 1063,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tprComments, _, err := gh.Issues.ListComments(ctx, githubPath[0], githubPath[1], pullRequest.GetNumber(), \u0026github.IssueListCommentsOptions{Sort: pointer(\"created\"), Direction: pointer(\"asc\")})",
              "line_type": "deleted",
              "old_line_no": 1064,
              "new_line_no": 0
            },
            {
              "content": "\t\t\tif err != nil {",
              "line_type": "deleted",
              "old_line_no": 1065,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tsendErr(fmt.Errorf(\"listing pull request comments: %v\", err))",
              "line_type": "deleted",
              "old_line_no": 1066,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t} else {",
              "line_type": "deleted",
              "old_line_no": 1067,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tlogger.Info(\"migrating merge request comments from GitLab to GitHub\", \"owner\", githubPath[0], \"repo\", githubPath[1], \"pr_number\", pullRequest.GetNumber(), \"count\", len(comments))",
              "line_type": "deleted",
              "old_line_no": 1068,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 1069,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\tfor _, comment := range comments {",
              "line_type": "deleted",
              "old_line_no": 1070,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tif comment == nil || comment.System {",
              "line_type": "deleted",
              "old_line_no": 1071,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tcontinue",
              "line_type": "deleted",
              "old_line_no": 1072,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 1073,
              "new_line_no": 0
            },
            {
              "content": "// getGithubUser fetches GitHub user details for a given login.",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1058
            },
            {
              "content": "func getGithubUser(ctx context.Context, login string) (*github.User, error) {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1059
            },
            {
              "content": "\tuser, _, err := gh.Users.Get(ctx, login)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1060
            },
            {
              "content": "\tif err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1061
            },
            {
              "content": "\t\treturn nil, fmt.Errorf(\"failed to get GitHub user %q: %w\", login, err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1062
            },
            {
              "content": "\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1063
            },
            {
              "content": "\treturn user, nil",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1064
            },
            {
              "content": "}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1065
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 1074,
              "new_line_no": 1066
            },
            {
              "content": "\t\t\t\t\tgithubCommentAuthorName := comment.Author.Name",
              "line_type": "deleted",
              "old_line_no": 1075,
              "new_line_no": 0
            },
            {
              "content": "// getGithubSearchResults performs a GitHub search query.",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1067
            },
            {
              "content": "func getGithubSearchResults(ctx context.Context, query string) (*github.SearchResult, error) {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1068
            },
            {
              "content": "\tsearchResult, _, err := gh.Search.Issues(ctx, query, nil)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1069
            },
            {
              "content": "\tif err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1070
            },
            {
              "content": "\t\treturn nil, fmt.Errorf(\"failed to perform GitHub search query %q: %w\", query, err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1071
            },
            {
              "content": "\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1072
            },
            {
              "content": "\treturn searchResult, nil",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1073
            },
            {
              "content": "}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1074
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 1076,
              "new_line_no": 1075
            },
            {
              "content": "\t\t\t\t\tcommentAuthor, err := getGitlabUser(comment.Author.Username)",
              "line_type": "deleted",
              "old_line_no": 1077,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tif err != nil {",
              "line_type": "deleted",
              "old_line_no": 1078,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tsendErr(fmt.Errorf(\"retrieving gitlab user: %v\", err))",
              "line_type": "deleted",
              "old_line_no": 1079,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tfailureCount++",
              "line_type": "deleted",
              "old_line_no": 1080,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tbreak",
              "line_type": "deleted",
              "old_line_no": 1081,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 1082,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tif commentAuthor.WebsiteURL != \"\" {",
              "line_type": "deleted",
              "old_line_no": 1083,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tgithubCommentAuthorName = \"@\" + strings.TrimPrefix(strings.ToLower(commentAuthor.WebsiteURL), \"https://github.com/\")",
              "line_type": "deleted",
              "old_line_no": 1084,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 1085,
              "new_line_no": 0
            },
            {
              "content": "// getGithubPullRequest retrieves a specific GitHub pull request.",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1076
            },
            {
              "content": "func getGithubPullRequest(ctx context.Context, owner, repo string, prNumber int) (*github.PullRequest, error) {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1077
            },
            {
              "content": "\tpr, _, err := gh.PullRequests.Get(ctx, owner, repo, prNumber)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1078
            },
            {
              "content": "\tif err != nil {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1079
            },
            {
              "content": "\t\treturn nil, fmt.Errorf(\"failed to get GitHub pull request %s/%s #%d: %w\", owner, repo, prNumber, err)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1080
            },
            {
              "content": "\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1081
            },
            {
              "content": "\treturn pr, nil",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1082
            },
            {
              "content": "}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1083
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 1086,
              "new_line_no": 1084
            },
            {
              "content": "\t\t\t\t\tcommentBody := fmt.Sprintf(`\u003e [!NOTE]",
              "line_type": "deleted",
              "old_line_no": 1087,
              "new_line_no": 0
            },
            {
              "content": "\u003e This comment was migrated from GitLab",
              "line_type": "deleted",
              "old_line_no": 1088,
              "new_line_no": 0
            },
            {
              "content": "\u003e",
              "line_type": "deleted",
              "old_line_no": 1089,
              "new_line_no": 0
            },
            {
              "content": "\u003e |      |      |",
              "line_type": "deleted",
              "old_line_no": 1090,
              "new_line_no": 0
            },
            {
              "content": "\u003e | ---- | ---- |",
              "line_type": "deleted",
              "old_line_no": 1091,
              "new_line_no": 0
            },
            {
              "content": "\u003e | **Original Author** | %[1]s |",
              "line_type": "deleted",
              "old_line_no": 1092,
              "new_line_no": 0
            },
            {
              "content": "\u003e | **Note ID** | %[2]d |",
              "line_type": "deleted",
              "old_line_no": 1093,
              "new_line_no": 0
            },
            {
              "content": "\u003e | **Date Originally Created** | %[3]s |",
              "line_type": "deleted",
              "old_line_no": 1094,
              "new_line_no": 0
            },
            {
              "content": "\u003e |      |      |",
              "line_type": "deleted",
              "old_line_no": 1095,
              "new_line_no": 0
            },
            {
              "content": "\u003e",
              "line_type": "deleted",
              "old_line_no": 1096,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 1097,
              "new_line_no": 0
            },
            {
              "content": "## Original Comment",
              "line_type": "deleted",
              "old_line_no": 1098,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 1099,
              "new_line_no": 0
            },
            {
              "content": "%[4]s`, githubCommentAuthorName, comment.ID, comment.CreatedAt.Format(\"Mon, 2 Jan 2006\"), comment.Body)",
              "line_type": "deleted",
              "old_line_no": 1100,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 1101,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tfoundExistingComment := false",
              "line_type": "deleted",
              "old_line_no": 1102,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\tfor _, prComment := range prComments {",
              "line_type": "deleted",
              "old_line_no": 1103,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tif prComment == nil {",
              "line_type": "deleted",
              "old_line_no": 1104,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\t\tcontinue",
              "line_type": "deleted",
              "old_line_no": 1105,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 1106,
              "new_line_no": 0
            },
            {
              "content": "// roundDuration rounds a duration to the nearest multiple of a step.",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1085
            },
            {
              "content": "func roundDuration(d, r time.Duration) time.Duration {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1086
            },
            {
              "content": "\tif r \u003c= 0 {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1087
            },
            {
              "content": "\t\treturn d",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1088
            },
            {
              "content": "\t}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1089
            },
            {
              "content": "\treturn d.Round(r)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1090
            },
            {
              "content": "}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1091
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 1107,
              "new_line_no": 1092
            },
            {
              "content": "\t\t\t\t\t\tif strings.Contains(prComment.GetBody(), fmt.Sprintf(\"**Note ID** | %d\", comment.ID)) {",
              "line_type": "deleted",
              "old_line_no": 1108,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\t\tfoundExistingComment = true",
              "line_type": "deleted",
              "old_line_no": 1109,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 1110,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\t\tif prComment.Body == nil || *prComment.Body != commentBody {",
              "line_type": "deleted",
              "old_line_no": 1111,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\t\t\tlogger.Debug(\"updating pull request comment\", \"owner\", githubPath[0], \"repo\", githubPath[1], \"pr_number\", pullRequest.GetNumber(), \"comment_id\", prComment.GetID())",
              "line_type": "deleted",
              "old_line_no": 1112,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\t\t\tprComment.Body = \u0026commentBody",
              "line_type": "deleted",
              "old_line_no": 1113,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\t\t\tif _, _, err = gh.Issues.EditComment(ctx, githubPath[0], githubPath[1], prComment.GetID(), prComment); err != nil {",
              "line_type": "deleted",
              "old_line_no": 1114,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\t\t\t\tsendErr(fmt.Errorf(\"updating pull request comments: %v\", err))",
              "line_type": "deleted",
              "old_line_no": 1115,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\t\t\t\tfailureCount++",
              "line_type": "deleted",
              "old_line_no": 1116,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\t\t\t\tbreak",
              "line_type": "deleted",
              "old_line_no": 1117,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 1118,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 1119,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\t} else {",
              "line_type": "deleted",
              "old_line_no": 1120,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\t\tlogger.Trace(\"existing pull request comment is up-to-date\", \"owner\", githubPath[0], \"repo\", githubPath[1], \"pr_number\", pullRequest.GetNumber(), \"comment_id\", prComment.GetID())",
              "line_type": "deleted",
              "old_line_no": 1121,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 1122,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 1123,
              "new_line_no": 0
            },
            {
              "content": "// pointer is a helper function to return a pointer to any given value.",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1093
            },
            {
              "content": "func pointer[T any](v T) *T {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1094
            },
            {
              "content": "\treturn \u0026v",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1095
            },
            {
              "content": "}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1096
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 1124,
              "new_line_no": 1097
            },
            {
              "content": "\t\t\t\t\tif !foundExistingComment {",
              "line_type": "deleted",
              "old_line_no": 1125,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tlogger.Debug(\"creating pull request comment\", \"owner\", githubPath[0], \"repo\", githubPath[1], \"pr_number\", pullRequest.GetNumber())",
              "line_type": "deleted",
              "old_line_no": 1126,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tnewComment := github.IssueComment{",
              "line_type": "deleted",
              "old_line_no": 1127,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\t\tBody: \u0026commentBody,",
              "line_type": "deleted",
              "old_line_no": 1128,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 1129,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\tif _, _, err = gh.Issues.CreateComment(ctx, githubPath[0], githubPath[1], pullRequest.GetNumber(), \u0026newComment); err != nil {",
              "line_type": "deleted",
              "old_line_no": 1130,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\t\tsendErr(fmt.Errorf(\"creating pull request comment: %v\", err))",
              "line_type": "deleted",
              "old_line_no": 1131,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\t\tfailureCount++",
              "line_type": "deleted",
              "old_line_no": 1132,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\t\tbreak",
              "line_type": "deleted",
              "old_line_no": 1133,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 1134,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 1135,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 1136,
              "new_line_no": 0
            },
            {
              "content": "\t\t\t}",
              "line_type": "deleted",
              "old_line_no": 1137,
              "new_line_no": 0
            },
            {
              "content": "// objectCache (assuming this is from the original file or a separate utility)",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1098
            },
            {
              "content": "// This part is kept as-is since its internal implementation wasn't provided for review.",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1099
            },
            {
              "content": "type objectCache struct {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1100
            },
            {
              "content": "\tsync.Mutex",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1101
            },
            {
              "content": "\tobjects map[plumbing.Hash]interface{}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1102
            },
            {
              "content": "}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1103
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 1138,
              "new_line_no": 1104
            },
            {
              "content": "\t\t\tsuccessCount++",
              "line_type": "deleted",
              "old_line_no": 1139,
              "new_line_no": 0
            },
            {
              "content": "\t\t}",
              "line_type": "deleted",
              "old_line_no": 1140,
              "new_line_no": 0
            },
            {
              "content": "func newObjectCache() *objectCache {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1105
            },
            {
              "content": "\treturn \u0026objectCache{",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1106
            },
            {
              "content": "\t\tobjects: make(map[plumbing.Hash]interface{}),",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1107
            },
            {
              "content": "\t}",
              "line_type": "context",
              "old_line_no": 1141,
              "new_line_no": 1108
            },
            {
              "content": "}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1109
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 1142,
              "new_line_no": 1110
            },
            {
              "content": "\tskippedCount := totalCount - successCount - failureCount",
              "line_type": "deleted",
              "old_line_no": 1143,
              "new_line_no": 0
            },
            {
              "content": "",
              "line_type": "deleted",
              "old_line_no": 1144,
              "new_line_no": 0
            },
            {
              "content": "\tlogger.Info(\"migrated merge requests from GitLab to GitHub\", \"name\", gitlabPath[1], \"group\", gitlabPath[0], \"successful\", successCount, \"failed\", failureCount, \"skipped\", skippedCount)",
              "line_type": "deleted",
              "old_line_no": 1145,
              "new_line_no": 0
            },
            {
              "content": "func (c *objectCache) Get(hash plumbing.Hash) (interface{}, bool) {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1111
            },
            {
              "content": "\tc.Lock()",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1112
            },
            {
              "content": "\tdefer c.Unlock()",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1113
            },
            {
              "content": "\tobj, ok := c.objects[hash]",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1114
            },
            {
              "content": "\treturn obj, ok",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1115
            },
            {
              "content": "}",
              "line_type": "context",
              "old_line_no": 1146,
              "new_line_no": 1116
            },
            {
              "content": "",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1117
            },
            {
              "content": "func (c *objectCache) Put(hash plumbing.Hash, obj interface{}) {",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1118
            },
            {
              "content": "\tc.Lock()",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1119
            },
            {
              "content": "\tdefer c.Unlock()",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1120
            },
            {
              "content": "\tc.objects[hash] = obj",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1121
            },
            {
              "content": "}",
              "line_type": "added",
              "old_line_no": 0,
              "new_line_no": 1122
            },
            {
              "content": "",
              "line_type": "context",
              "old_line_no": 1147,
              "new_line_no": 1123
            }
          ]
        }
      ]
    }
  ],
  "participants": [
    {
      "provider": "github",
      "id": 175728472,
      "username": "copilot-pull-request-reviewer[bot]",
      "name": "copilot-pull-request-reviewer[bot]",
      "avatar_url": "https://avatars.githubusercontent.com/in/946600?v=4",
      "web_url": "https://github.com/apps/copilot-pull-request-reviewer"
    },
    {
      "provider": "github",
      "id": 222574465,
      "username": "livereviewbot",
      "name": "livereviewbot",
      "avatar_url": "https://avatars.githubusercontent.com/u/222574465?v=4",
      "web_url": "https://github.com/livereviewbot"
    },
    {
      "provider": "github",
      "id": 796107,
      "username": "shrsv",
      "name": "shrsv",
      "avatar_url": "https://avatars.githubusercontent.com/u/796107?v=4",
      "web_url": "https://github.com/shrsv"
    }
  ],
  "raw_data_paths": {
    "commits": "cmd/mrmodel/testdata/github/commits.json",
    "diff": "cmd/mrmodel/testdata/github/diff.txt",
    "issue_comments": "cmd/mrmodel/testdata/github/issue_comments.json",
    "review_comments": "cmd/mrmodel/testdata/github/review_comments.json",
    "reviews": "cmd/mrmodel/testdata/github/reviews.json"
  }
}
