{"repository":{"type":"repository","full_name":"contorted/fb_backends","links":{"self":{"href":"https://api.bitbucket.org/2.0/repositories/contorted/fb_backends"},"html":{"href":"https://bitbucket.org/contorted/fb_backends"},"avatar":{"href":"https://bytebucket.org/ravatar/%7B352533c2-42e6-4035-9beb-57035eeedd12%7D?ts=default"}},"name":"fb_backends","scm":"git","website":null,"owner":{"display_name":"contorted","links":{"self":{"href":"https://api.bitbucket.org/2.0/workspaces/%7B40dafde9-4408-4e0b-af0a-335aec19f860%7D"},"avatar":{"href":"https://bitbucket.org/account/contorted/avatar/"},"html":{"href":"https://bitbucket.org/%7B40dafde9-4408-4e0b-af0a-335aec19f860%7D/"}},"type":"team","uuid":"{40dafde9-4408-4e0b-af0a-335aec19f860}","username":"contorted"},"workspace":{"type":"workspace","uuid":"{40dafde9-4408-4e0b-af0a-335aec19f860}","name":"contorted","slug":"contorted","links":{"avatar":{"href":"https://bitbucket.org/workspaces/contorted/avatar/?ts=1733490504"},"html":{"href":"https://bitbucket.org/contorted/"},"self":{"href":"https://api.bitbucket.org/2.0/workspaces/contorted"}}},"is_private":true,"project":{"type":"project","key":"FBBAC","uuid":"{9a560316-1e63-40e4-a5bd-b422b04f2377}","name":"fb_backends","links":{"self":{"href":"https://api.bitbucket.org/2.0/workspaces/contorted/projects/FBBAC"},"html":{"href":"https://bitbucket.org/contorted/workspace/projects/FBBAC"},"avatar":{"href":"https://bitbucket.org/contorted/workspace/projects/FBBAC/avatar/32?ts=1733490834"}}},"uuid":"{352533c2-42e6-4035-9beb-57035eeedd12}","parent":null},"actor":{"display_name":"LiveReview Bot","links":{"self":{"href":"https://api.bitbucket.org/2.0/users/%7B268007d3-10bd-4edb-93d1-7056116ad08c%7D"},"avatar":{"href":"https://secure.gravatar.com/avatar/4859002beefd073d37a496a0e0d9baeb?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FLB-4.png"},"html":{"href":"https://bitbucket.org/%7B268007d3-10bd-4edb-93d1-7056116ad08c%7D/"}},"type":"user","uuid":"{268007d3-10bd-4edb-93d1-7056116ad08c}","account_id":"712020:cd5db0f9-0d82-428a-b778-80a5b9416408","nickname":"LiveReview Bot"},"pullrequest":{"comment_count":1,"task_count":0,"type":"pullrequest","id":1,"title":"p1 test","description":"","rendered":{"title":{"type":"rendered","raw":"p1 test","markup":"markdown","html":"<p>p1 test</p>"},"description":{"type":"rendered","raw":"","markup":"markdown","html":""}},"state":"OPEN","draft":false,"merge_commit":null,"close_source_branch":false,"closed_by":null,"author":{"display_name":"Contorted Expression","links":{"self":{"href":"https://api.bitbucket.org/2.0/users/%7B225d8b60-7756-4d30-ba43-f71d844bf97e%7D"},"avatar":{"href":"https://secure.gravatar.com/avatar/f8affc810158715cb40adfdab06be21f?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FCE-0.png"},"html":{"href":"https://bitbucket.org/%7B225d8b60-7756-4d30-ba43-f71d844bf97e%7D/"}},"type":"user","uuid":"{225d8b60-7756-4d30-ba43-f71d844bf97e}","account_id":"712020:a02bc964-a339-4d21-baa3-71da9c43382e","nickname":"Contorted Expression"},"reason":"","created_on":"2025-08-11T04:41:40.753846+00:00","updated_on":"2025-10-14T14:14:42.771582+00:00","destination":{"branch":{"name":"main"},"commit":{"hash":"1eb91faacd2f","links":{"self":{"href":"https://api.bitbucket.org/2.0/repositories/contorted/fb_backends/commit/1eb91faacd2f"},"html":{"href":"https://bitbucket.org/contorted/fb_backends/commits/1eb91faacd2f"}},"type":"commit"},"repository":{"type":"repository","full_name":"contorted/fb_backends","links":{"self":{"href":"https://api.bitbucket.org/2.0/repositories/contorted/fb_backends"},"html":{"href":"https://bitbucket.org/contorted/fb_backends"},"avatar":{"href":"https://bytebucket.org/ravatar/%7B352533c2-42e6-4035-9beb-57035eeedd12%7D?ts=default"}},"name":"fb_backends","uuid":"{352533c2-42e6-4035-9beb-57035eeedd12}"}},"source":{"branch":{"name":"p1","links":{},"sync_strategies":["merge_commit","rebase"]},"commit":{"hash":"b04fda79825d","links":{"self":{"href":"https://api.bitbucket.org/2.0/repositories/contorted/fb_backends/commit/b04fda79825d"},"html":{"href":"https://bitbucket.org/contorted/fb_backends/commits/b04fda79825d"}},"type":"commit"},"repository":{"type":"repository","full_name":"contorted/fb_backends","links":{"self":{"href":"https://api.bitbucket.org/2.0/repositories/contorted/fb_backends"},"html":{"href":"https://bitbucket.org/contorted/fb_backends"},"avatar":{"href":"https://bytebucket.org/ravatar/%7B352533c2-42e6-4035-9beb-57035eeedd12%7D?ts=default"}},"name":"fb_backends","uuid":"{352533c2-42e6-4035-9beb-57035eeedd12}"}},"reviewers":[],"participants":[{"type":"participant","user":{"display_name":"LiveReview Bot","links":{"self":{"href":"https://api.bitbucket.org/2.0/users/%7B268007d3-10bd-4edb-93d1-7056116ad08c%7D"},"avatar":{"href":"https://secure.gravatar.com/avatar/4859002beefd073d37a496a0e0d9baeb?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FLB-4.png"},"html":{"href":"https://bitbucket.org/%7B268007d3-10bd-4edb-93d1-7056116ad08c%7D/"}},"type":"user","uuid":"{268007d3-10bd-4edb-93d1-7056116ad08c}","account_id":"712020:cd5db0f9-0d82-428a-b778-80a5b9416408","nickname":"LiveReview Bot"},"role":"PARTICIPANT","approved":false,"state":null,"participated_on":"2025-10-14T14:14:42.771582+00:00"}],"links":{"self":{"href":"https://api.bitbucket.org/2.0/repositories/contorted/fb_backends/pullrequests/1"},"html":{"href":"https://bitbucket.org/contorted/fb_backends/pull-requests/1"},"commits":{"href":"https://api.bitbucket.org/2.0/repositories/contorted/fb_backends/pullrequests/1/commits"},"approve":{"href":"https://api.bitbucket.org/2.0/repositories/contorted/fb_backends/pullrequests/1/approve"},"request-changes":{"href":"https://api.bitbucket.org/2.0/repositories/contorted/fb_backends/pullrequests/1/request-changes"},"diff":{"href":"https://api.bitbucket.org/2.0/repositories/contorted/fb_backends/diff/contorted/fb_backends:b04fda79825d%0D1eb91faacd2f?from_pullrequest_id=1&topic=true"},"diffstat":{"href":"https://api.bitbucket.org/2.0/repositories/contorted/fb_backends/diffstat/contorted/fb_backends:b04fda79825d%0D1eb91faacd2f?from_pullrequest_id=1&topic=true"},"comments":{"href":"https://api.bitbucket.org/2.0/repositories/contorted/fb_backends/pullrequests/1/comments"},"activity":{"href":"https://api.bitbucket.org/2.0/repositories/contorted/fb_backends/pullrequests/1/activity"},"merge":{"href":"https://api.bitbucket.org/2.0/repositories/contorted/fb_backends/pullrequests/1/merge"},"decline":{"href":"https://api.bitbucket.org/2.0/repositories/contorted/fb_backends/pullrequests/1/decline"},"statuses":{"href":"https://api.bitbucket.org/2.0/repositories/contorted/fb_backends/pullrequests/1/statuses"}},"summary":{"type":"rendered","raw":"","markup":"markdown","html":""}},"comment":{"id":699722293,"created_on":"2025-10-14T14:14:42.764801+00:00","updated_on":"2025-10-14T14:14:42.771582+00:00","content":{"type":"rendered","raw":"# Refactor Active PM2 Monitoring Script to Class-Based Structure\n\n## Overview\nThis change refactors the original procedural script into a `PM2Monitor` class. This improves code organization, readability, and testability by encapsulating the PM2 monitoring logic, logging configuration, and the main monitoring loop within a single class.\n\n## Key Changes\n- **Class Structure**: Introduced a `PM2Monitor` class to encapsulate the PM2 monitoring logic, including checking and restarting processes.\n- **Logging**: Logging configuration is now handled within the `PM2Monitor` class.\n- **Main Loop**: The main monitoring loop is now part of the `PM2Monitor` class, improving structure and readability.\n\n## Impact\n- **Functionality**: Improved code organization and maintainability. The core functionality of monitoring and restarting PM2 processes remains the same.\n- **Risk**:\n    - Potential for errors introduced during the refactoring process.\n    - The current implementation may terminate the monitoring loop upon encountering an exception.\n    - Hardcoded values are present and should be externalized via environment variables.\n    - The script does not explicitly handle file encodings, which could lead to issues.\n    - Subprocess calls lack timeouts, potentially leading to indefinite hanging.\n","markup":"markdown","html":"<h1 id=\"markdown-header-refactor-active-pm2-monitoring-script-to-class-based-structure\">Refactor Active PM2 Monitoring Script to Class-Based Structure</h1>\n<h2 id=\"markdown-header-overview\">Overview</h2>\n<p>This change refactors the original procedural script into a <code>PM2Monitor</code> class. This improves code organization, readability, and testability by encapsulating the PM2 monitoring logic, logging configuration, and the main monitoring loop within a single class.</p>\n<h2 id=\"markdown-header-key-changes\">Key Changes</h2>\n<ul>\n<li><strong>Class Structure</strong>: Introduced a <code>PM2Monitor</code> class to encapsulate the PM2 monitoring logic, including checking and restarting processes.</li>\n<li><strong>Logging</strong>: Logging configuration is now handled within the <code>PM2Monitor</code> class.</li>\n<li><strong>Main Loop</strong>: The main monitoring loop is now part of the <code>PM2Monitor</code> class, improving structure and readability.</li>\n</ul>\n<h2 id=\"markdown-header-impact\">Impact</h2>\n<ul>\n<li><strong>Functionality</strong>: Improved code organization and maintainability. The core functionality of monitoring and restarting PM2 processes remains the same.</li>\n<li><strong>Risk</strong>:<ul>\n<li>Potential for errors introduced during the refactoring process.</li>\n<li>The current implementation may terminate the monitoring loop upon encountering an exception.</li>\n<li>Hardcoded values are present and should be externalized via environment variables.</li>\n<li>The script does not explicitly handle file encodings, which could lead to issues.</li>\n<li>Subprocess calls lack timeouts, potentially leading to indefinite hanging.</li>\n</ul>\n</li>\n</ul>"},"user":{"display_name":"LiveReview Bot","links":{"self":{"href":"https://api.bitbucket.org/2.0/users/%7B268007d3-10bd-4edb-93d1-7056116ad08c%7D"},"avatar":{"href":"https://secure.gravatar.com/avatar/4859002beefd073d37a496a0e0d9baeb?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FLB-4.png"},"html":{"href":"https://bitbucket.org/%7B268007d3-10bd-4edb-93d1-7056116ad08c%7D/"}},"type":"user","uuid":"{268007d3-10bd-4edb-93d1-7056116ad08c}","account_id":"712020:cd5db0f9-0d82-428a-b778-80a5b9416408","nickname":"LiveReview Bot"},"deleted":false,"pending":false,"type":"pullrequest_comment","links":{"self":{"href":"https://api.bitbucket.org/2.0/repositories/contorted/fb_backends/pullrequests/1/comments/699722293"},"html":{"href":"https://bitbucket.org/contorted/fb_backends/pull-requests/1/_/diff#comment-699722293"}},"pullrequest":{"type":"pullrequest","id":1,"title":"p1 test","draft":false,"links":{"self":{"href":"https://api.bitbucket.org/2.0/repositories/contorted/fb_backends/pullrequests/1"},"html":{"href":"https://bitbucket.org/contorted/fb_backends/pull-requests/1"}}}}}